import "./chunk-Y7B7GIIZ.js";
import {
  defineComponent,
  h
} from "./chunk-QLSCPXTK.js";
import "./chunk-A4QZX3JM.js";

// node_modules/.pnpm/vue-demi@0.7.5_@vue+composition-api@1.7.2_vue@3.5.13_typescript@5.4.5___vue@3.5.13_typescript@5.4.5_/node_modules/vue-demi/lib/index.esm.js
var isVue2 = false;

// node_modules/.pnpm/@lucky-canvas+vue@0.1.11_vue@3.5.13_typescript@5.4.5_/node_modules/@lucky-canvas/vue/dist/index.esm.js
var n = function() {
  return n = Object.assign || function(t) {
    for (var e, i = 1, n2 = arguments.length; i < n2; i++) for (var r2 in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r2) && (t[r2] = e[r2]);
    return t;
  }, n.apply(this, arguments);
};
var r = function(t, e) {
  return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t2, e2) {
    t2.__proto__ = e2;
  } || function(t2, e2) {
    for (var i in e2) Object.prototype.hasOwnProperty.call(e2, i) && (t2[i] = e2[i]);
  }, r(t, e);
};
function o(t, e) {
  if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null");
  function i() {
    this.constructor = t;
  }
  r(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}
var s = function() {
  return s = Object.assign || function(t) {
    for (var e, i = 1, n2 = arguments.length; i < n2; i++) for (var r2 in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r2) && (t[r2] = e[r2]);
    return t;
  }, s.apply(this, arguments);
};
function a(t, e, i, n2) {
  return new (i || (i = Promise))(function(r2, o2) {
    function s2(t2) {
      try {
        h3(n2.next(t2));
      } catch (t3) {
        o2(t3);
      }
    }
    function a2(t2) {
      try {
        h3(n2.throw(t2));
      } catch (t3) {
        o2(t3);
      }
    }
    function h3(t2) {
      var e2;
      t2.done ? r2(t2.value) : (e2 = t2.value, e2 instanceof i ? e2 : new i(function(t3) {
        t3(e2);
      })).then(s2, a2);
    }
    h3((n2 = n2.apply(t, e || [])).next());
  });
}
function h2(t, e) {
  var i, n2, r2, o2, s2 = { label: 0, sent: function() {
    if (1 & r2[0]) throw r2[1];
    return r2[1];
  }, trys: [], ops: [] };
  return o2 = { next: a2(0), throw: a2(1), return: a2(2) }, "function" == typeof Symbol && (o2[Symbol.iterator] = function() {
    return this;
  }), o2;
  function a2(o3) {
    return function(a3) {
      return function(o4) {
        if (i) throw new TypeError("Generator is already executing.");
        for (; s2; ) try {
          if (i = 1, n2 && (r2 = 2 & o4[0] ? n2.return : o4[0] ? n2.throw || ((r2 = n2.return) && r2.call(n2), 0) : n2.next) && !(r2 = r2.call(n2, o4[1])).done) return r2;
          switch (n2 = 0, r2 && (o4 = [2 & o4[0], r2.value]), o4[0]) {
            case 0:
            case 1:
              r2 = o4;
              break;
            case 4:
              return s2.label++, { value: o4[1], done: false };
            case 5:
              s2.label++, n2 = o4[1], o4 = [0];
              continue;
            case 7:
              o4 = s2.ops.pop(), s2.trys.pop();
              continue;
            default:
              if (!((r2 = (r2 = s2.trys).length > 0 && r2[r2.length - 1]) || 6 !== o4[0] && 2 !== o4[0])) {
                s2 = 0;
                continue;
              }
              if (3 === o4[0] && (!r2 || o4[1] > r2[0] && o4[1] < r2[3])) {
                s2.label = o4[1];
                break;
              }
              if (6 === o4[0] && s2.label < r2[1]) {
                s2.label = r2[1], r2 = o4;
                break;
              }
              if (r2 && s2.label < r2[2]) {
                s2.label = r2[2], s2.ops.push(o4);
                break;
              }
              r2[2] && s2.ops.pop(), s2.trys.pop();
              continue;
          }
          o4 = e.call(t, s2);
        } catch (t2) {
          o4 = [6, t2], n2 = 0;
        } finally {
          i = r2 = 0;
        }
        if (5 & o4[0]) throw o4[1];
        return { value: o4[0] ? o4[1] : void 0, done: true };
      }([o3, a3]);
    };
  }
}
function c(t, e) {
  for (var i = 0, n2 = e.length, r2 = t.length; i < n2; i++, r2++) t[r2] = e[i];
  return t;
}
Array.prototype.includes || Object.defineProperty(Array.prototype, "includes", { value: function(t, e) {
  if (null == this) throw new TypeError('"this" is null or not defined');
  var i = Object(this), n2 = i.length >>> 0;
  if (0 === n2) return false;
  for (var r2, o2, s2 = 0 | e, a2 = Math.max(s2 >= 0 ? s2 : n2 - Math.abs(s2), 0); a2 < n2; ) {
    if ((r2 = i[a2]) === (o2 = t) || "number" == typeof r2 && "number" == typeof o2 && isNaN(r2) && isNaN(o2)) return true;
    a2++;
  }
  return false;
} }), String.prototype.includes || (String.prototype.includes = function(t, e) {
  return "number" != typeof e && (e = 0), !(e + t.length > this.length) && -1 !== this.indexOf(t, e);
}), Array.prototype.find || Object.defineProperty(Array.prototype, "find", { value: function(t) {
  if (null == this) throw new TypeError('"this" is null or not defined');
  var e = Object(this), i = e.length >>> 0;
  if ("function" != typeof t) throw new TypeError("predicate must be a function");
  for (var n2 = arguments[1], r2 = 0; r2 < i; ) {
    var o2 = e[r2];
    if (t.call(n2, o2, r2, e)) return o2;
    r2++;
  }
} });
var l = function(t) {
  for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
  return e.some(function(e2) {
    return Object.prototype.toString.call(t).slice(8, -1).toLowerCase() === e2;
  });
};
var u = function(t, e) {
  return Object.prototype.hasOwnProperty.call(t, e);
};
var f = function(t) {
  return [].filter.call(t, function(t2) {
    return "\n" !== t2;
  }).join("");
};
var d = function(t) {
  if ("string" != typeof t) return false;
  if ("transparent" === (t = t.toLocaleLowerCase().trim())) return false;
  var e;
  if (/^rgba/.test(t) && 0 === (null === (e = /([^\s,]+)\)$/.exec(t)) ? 0 : "object" == typeof e ? NaN : "number" == typeof e ? e : "string" == typeof e ? "%" === e[e.length - 1] ? Number(e.slice(0, -1)) / 100 : Number(e) : NaN)) return false;
  return true;
};
var p = function(t, e) {
  var i, n2 = (null === (i = t.padding) || void 0 === i ? void 0 : i.split(" ").map(function(t2) {
    return e(t2);
  })) || [0], r2 = 0, o2 = 0, s2 = 0, a2 = 0;
  switch (n2.length) {
    case 1:
      r2 = o2 = s2 = a2 = n2[0];
      break;
    case 2:
      r2 = o2 = n2[0], s2 = a2 = n2[1];
      break;
    case 3:
      r2 = n2[0], s2 = a2 = n2[1], o2 = n2[2];
      break;
    default:
      r2 = n2[0], o2 = n2[1], s2 = n2[2], a2 = n2[3];
  }
  var h3 = { paddingTop: r2, paddingBottom: o2, paddingLeft: s2, paddingRight: a2 };
  for (var c2 in h3) h3[c2] = u(t, c2) && l(t[c2], "string", "number") ? e(t[c2]) : h3[c2];
  return [r2, o2, s2, a2];
};
var g = function(t) {
  var e = [], i = t.map(function(t2) {
    return Number(t2);
  }).reduce(function(t2, i2) {
    if (i2 > 0) {
      var n3 = t2 + i2;
      return e.push(n3), n3;
    }
    return e.push(NaN), t2;
  }, 0), n2 = Math.random() * i;
  return e.findIndex(function(t2) {
    return n2 <= t2;
  });
};
var v = function(t, e, i, n2) {
  void 0 === n2 && (n2 = 1 / 0), n2 <= 0 && (n2 = 1 / 0);
  for (var r2 = "", o2 = [], s2 = t.measureText("...").width, a2 = 0; a2 < e.length; a2++) {
    r2 += e[a2];
    var h3 = t.measureText(r2).width, c2 = i(o2);
    if (n2 === o2.length + 1 && (h3 += s2), c2 < 0) return o2;
    if (h3 > c2 && (o2.push(r2.slice(0, -1)), r2 = e[a2]), n2 === o2.length) return o2[o2.length - 1] += "...", o2;
  }
  return r2 && o2.push(r2), o2.length || o2.push(e), o2;
};
var y = function() {
  function t() {
    this.subs = [];
  }
  return t.prototype.addSub = function(t2) {
    this.subs.includes(t2) || this.subs.push(t2);
  }, t.prototype.notify = function() {
    this.subs.forEach(function(t2) {
      t2.update();
    });
  }, t;
}();
var m = "__proto__" in {};
function w(t, e, i, n2) {
  Object.defineProperty(t, e, { value: i, enumerable: !!n2, writable: true, configurable: true });
}
var b = Array.prototype;
var k = Object.create(b);
["push", "pop", "shift", "unshift", "sort", "splice", "reverse"].forEach(function(t) {
  k[t] = function() {
    for (var e = [], i = 0; i < arguments.length; i++) e[i] = arguments[i];
    var n2 = b[t].apply(this, e), r2 = this.__luckyOb__;
    return ["push", "unshift", "splice"].includes(t) && r2.walk(this), r2.dep.notify(), n2;
  };
});
var S = function() {
  function t(t2) {
    this.dep = new y(), w(t2, "__luckyOb__", this), Array.isArray(t2) && (m ? t2.__proto__ = k : Object.getOwnPropertyNames(k).forEach(function(e) {
      w(t2, e, k[e]);
    })), this.walk(t2);
  }
  return t.prototype.walk = function(t2) {
    Object.keys(t2).forEach(function(e) {
      z(t2, e, t2[e]);
    });
  }, t;
}();
function C(t) {
  if (t && "object" == typeof t) return "__luckyOb__" in t ? t.__luckyOb__ : new S(t);
}
function z(t, e, i) {
  var n2 = new y(), r2 = Object.getOwnPropertyDescriptor(t, e);
  if (!r2 || false !== r2.configurable) {
    var o2 = r2 && r2.get, s2 = r2 && r2.set;
    o2 && !s2 || 2 !== arguments.length || (i = t[e]);
    var a2 = C(i);
    Object.defineProperty(t, e, { get: function() {
      var e2 = o2 ? o2.call(t) : i;
      return y.target && (n2.addSub(y.target), a2 && a2.dep.addSub(y.target)), e2;
    }, set: function(e2) {
      e2 !== i && (i = e2, o2 && !s2 || (s2 ? s2.call(t, e2) : i = e2, a2 = C(e2), n2.notify()));
    } });
  }
}
var x = 0;
var I = function() {
  function t(t2, e, i, n2) {
    void 0 === n2 && (n2 = {}), this.id = x++, this.$lucky = t2, this.expr = e, this.deep = !!n2.deep, this.getter = "function" == typeof e ? e : function(t3) {
      t3 += ".";
      for (var e2 = [], i2 = "", n3 = 0; n3 < t3.length; n3++) {
        var r2 = t3[n3];
        if (/\[|\./.test(r2)) e2.push(i2), i2 = "";
        else {
          if (/\W/.test(r2)) continue;
          i2 += r2;
        }
      }
      return function(t4) {
        return e2.reduce(function(t5, e3) {
          return t5[e3];
        }, t4);
      };
    }(e), this.cb = i, this.value = this.get();
  }
  return t.prototype.get = function() {
    y.target = this;
    var t2 = this.getter.call(this.$lucky, this.$lucky);
    return this.deep && function(t3) {
      var e = function(t4) {
        l(t4, "array", "object") && Object.keys(t4).forEach(function(i) {
          var n2 = t4[i];
          e(n2);
        });
      };
      e(t3);
    }(t2), y.target = null, t2;
  }, t.prototype.update = function() {
    var t2 = this.get(), e = this.value;
    this.value = t2, this.cb.call(this.$lucky, t2, e);
  }, t;
}();
var $ = function() {
  function t(t2, e) {
    var i = this;
    this.version = "1.7.21", this.htmlFontSize = 16, this.rAF = function() {
    }, this.boxWidth = 0, this.boxHeight = 0, "string" == typeof t2 ? t2 = { el: t2 } : 1 === t2.nodeType && (t2 = { el: "", divElement: t2 }), t2 = t2, this.config = t2, this.data = e, t2.flag || (t2.flag = "WEB"), t2.el && (t2.divElement = document.querySelector(t2.el)), t2.divElement && (t2.canvasElement = document.createElement("canvas"), t2.divElement.appendChild(t2.canvasElement)), t2.canvasElement && (t2.ctx = t2.canvasElement.getContext("2d"), t2.canvasElement.setAttribute("package", "lucky-canvas@1.7.21"), t2.canvasElement.addEventListener("click", function(t3) {
      return i.handleClick(t3);
    })), this.ctx = t2.ctx, this.initWindowFunction(), this.config.ctx || console.error("无法获取到 CanvasContext2D"), window && "function" == typeof window.addEventListener && window.addEventListener("resize", function(t3, e2) {
      void 0 === e2 && (e2 = 300);
      var i2 = null;
      return function() {
        for (var n2 = this, r2 = [], o2 = 0; o2 < arguments.length; o2++) r2[o2] = arguments[o2];
        i2 || (i2 = setTimeout(function() {
          t3.apply(n2, r2), clearTimeout(i2), i2 = null;
        }, e2));
      };
    }(function() {
      return i.resize();
    }, 300)), window && "function" == typeof window.MutationObserver && new window.MutationObserver(function() {
      i.resize();
    }).observe(document.documentElement, { attributes: true });
  }
  return t.prototype.resize = function() {
    var t2, e;
    null === (e = (t2 = this.config).beforeResize) || void 0 === e || e.call(t2), this.setHTMLFontSize(), this.setDpr(), this.resetWidthAndHeight(), this.zoomCanvas();
  }, t.prototype.initLucky = function() {
    if (this.resize(), !this.boxWidth || !this.boxHeight) return console.error("无法获取到宽度或高度");
  }, t.prototype.handleClick = function(t2) {
  }, t.prototype.setHTMLFontSize = function() {
    window && (this.htmlFontSize = +window.getComputedStyle(document.documentElement).fontSize.slice(0, -2));
  }, t.prototype.clearCanvas = function() {
    var t2 = [this.boxWidth, this.boxHeight], e = t2[0], i = t2[1];
    this.ctx.clearRect(-e, -i, 2 * e, 2 * i);
  }, t.prototype.setDpr = function() {
    var t2 = this.config;
    t2.dpr || (window ? window.dpr = t2.dpr = window.devicePixelRatio || 1 : t2.dpr || console.error(t2, "未传入 dpr 可能会导致绘制异常"));
  }, t.prototype.resetWidthAndHeight = function() {
    var t2 = this.config, e = this.data, i = 0, n2 = 0;
    t2.divElement && (i = t2.divElement.offsetWidth, n2 = t2.divElement.offsetHeight), this.boxWidth = this.getLength(e.width || t2.width) || i, this.boxHeight = this.getLength(e.height || t2.height) || n2, t2.divElement && (t2.divElement.style.overflow = "hidden", t2.divElement.style.width = this.boxWidth + "px", t2.divElement.style.height = this.boxHeight + "px");
  }, t.prototype.zoomCanvas = function() {
    var t2 = this.config, e = this.ctx, i = t2.canvasElement, n2 = t2.dpr, r2 = [this.boxWidth * n2, this.boxHeight * n2], o2 = r2[0], s2 = r2[1];
    i && (i.width = o2, i.height = s2, i.style.width = o2 + "px", i.style.height = s2 + "px", i.style["transform-origin"] = "left top", i.style.transform = "scale(" + 1 / n2 + ")", e.scale(n2, n2));
  }, t.prototype.initWindowFunction = function() {
    var t2 = this.config;
    if (window) return this.rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(t3) {
      window.setTimeout(t3, 1e3 / 60);
    }, t2.setTimeout = window.setTimeout, t2.setInterval = window.setInterval, t2.clearTimeout = window.clearTimeout, void (t2.clearInterval = window.clearInterval);
    if (t2.rAF) this.rAF = t2.rAF;
    else if (t2.setTimeout) {
      var e = t2.setTimeout;
      this.rAF = function(t3) {
        return e(t3, 16.7);
      };
    } else this.rAF = function(t3) {
      return setTimeout(t3, 16.7);
    };
  }, t.prototype.loadImg = function(t2, e, i) {
    var n2 = this;
    return void 0 === i && (i = "$resolve"), new Promise(function(r2, o2) {
      if (t2 || o2("=> '" + e.src + "' 不能为空或不合法"), "WEB" !== n2.config.flag) return e[i] = r2, void (e.$reject = o2);
      var s2 = new Image();
      s2.onload = function() {
        return r2(s2);
      }, s2.onerror = function() {
        return o2("=> '" + e.src + "' 图片加载失败");
      }, s2.src = t2;
    });
  }, t.prototype.drawImage = function(t2, e) {
    for (var i, n2 = [], r2 = 2; r2 < arguments.length; r2++) n2[r2 - 2] = arguments[r2];
    var o2 = this.config, s2 = o2.flag, a2 = o2.dpr;
    if (["WEB", "MP-WX"].includes(s2)) i = e;
    else {
      if (!["UNI-H5", "UNI-MP", "TARO-H5", "TARO-MP"].includes(s2)) return console.error("意料之外的 flag, 该平台尚未兼容!");
      i = e.path;
    }
    if (!i.canvas) return 8 === n2.length && (n2 = n2.map(function(t3, e2) {
      return e2 < 4 ? t3 * a2 : t3;
    })), t2.drawImage.apply(t2, c([i], n2));
    var h3 = i.canvas.getContext("2d");
    n2 = n2.map(function(t3) {
      return t3 * a2;
    });
    var l2 = h3.getImageData.apply(h3, n2.slice(0, 4));
    t2.putImageData.apply(t2, c([l2], n2.slice(4, 6)));
  }, t.prototype.computedWidthAndHeight = function(t2, e, i, n2) {
    if (!e.width && !e.height) return [t2.width, t2.height];
    if (e.width && !e.height) {
      var r2 = this.getLength(e.width, i);
      return [r2, t2.height * (r2 / t2.width)];
    }
    if (!e.width && e.height) {
      var o2 = this.getLength(e.height, n2);
      return [t2.width * (o2 / t2.height), o2];
    }
    return [this.getLength(e.width, i), this.getLength(e.height, n2)];
  }, t.prototype.changeUnits = function(t2, e) {
    var i = this;
    void 0 === e && (e = 1);
    var n2 = this.config;
    return Number(t2.replace(/^([-]*[0-9.]*)([a-z%]*)$/, function(t3, r2, o2) {
      var s2 = { "%": function(t4) {
        return t4 * (e / 100);
      }, px: function(t4) {
        return 1 * t4;
      }, rem: function(t4) {
        return t4 * i.htmlFontSize;
      }, vw: function(t4) {
        return t4 / 100 * window.innerWidth;
      } }[o2];
      if (s2) return s2(r2);
      var a2 = n2.handleCssUnit || n2.unitFunc;
      return a2 ? a2(r2, o2) : r2;
    }));
  }, t.prototype.getLength = function(t2, e) {
    return l(t2, "number") ? t2 : l(t2, "string") ? this.changeUnits(t2, e) : 0;
  }, t.prototype.getOffsetX = function(t2, e) {
    return void 0 === e && (e = 0), (e - t2) / 2;
  }, t.prototype.getOffscreenCanvas = function(t2, e) {
    if (!u(this, "_offscreenCanvas") && (window && window.document && "WEB" === this.config.flag ? this._offscreenCanvas = document.createElement("canvas") : this._offscreenCanvas = this.config.offscreenCanvas, !this._offscreenCanvas)) return console.error("离屏 Canvas 无法渲染!");
    var i = this.config.dpr, n2 = this._offscreenCanvas;
    n2.width = (t2 || 300) * i, n2.height = (e || 150) * i;
    var r2 = n2.getContext("2d");
    return r2.clearRect(0, 0, t2, e), r2.scale(i, i), r2.dpr = i, { _offscreenCanvas: n2, _ctx: r2 };
  }, t.prototype.$set = function(t2, e, i) {
    t2 && "object" == typeof t2 && z(t2, e, i);
  }, t.prototype.$computed = function(t2, e, i) {
    var n2 = this;
    Object.defineProperty(t2, e, { get: function() {
      return i.call(n2);
    } });
  }, t.prototype.$watch = function(t2, e, i) {
    void 0 === i && (i = {}), "object" == typeof e && (e = (i = e).handler);
    var n2 = new I(this, t2, e, i);
    return i.immediate && e.call(this, n2.value), function() {
    };
  }, t.version = "1.7.21", t;
}();
var A = function(t) {
  return Math.PI / 180 * t;
};
var L = function(t) {
  for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
  var n2 = e[0], r2 = e[1], o2 = e[2], s2 = e[3], a2 = e[4], h3 = Math.min(o2, s2), c2 = Math.PI;
  a2 > h3 / 2 && (a2 = h3 / 2), t.beginPath(), t.moveTo(n2 + a2, r2), t.lineTo(n2 + a2, r2), t.lineTo(n2 + o2 - a2, r2), t.arc(n2 + o2 - a2, r2 + a2, a2, -c2 / 2, 0), t.lineTo(n2 + o2, r2 + s2 - a2), t.arc(n2 + o2 - a2, r2 + s2 - a2, a2, 0, c2 / 2), t.lineTo(n2 + a2, r2 + s2), t.arc(n2 + a2, r2 + s2 - a2, a2, c2 / 2, c2), t.lineTo(n2, r2 + a2), t.arc(n2 + a2, r2 + a2, a2, c2, -c2 / 2), t.closePath();
};
var O = function(t, e, i, n2) {
  return t >= n2 && (t = n2), i * (t /= n2) * t + e;
};
var T = function(t, e, i, n2) {
  return t >= n2 && (t = n2), -i * (t /= n2) * (t - 2) + e;
};
var E = function(t) {
  function e(e2, i) {
    var n2, r2 = t.call(this, e2, { width: i.width, height: i.height }) || this;
    return r2.blocks = [], r2.prizes = [], r2.buttons = [], r2.defaultConfig = {}, r2.defaultStyle = {}, r2._defaultConfig = {}, r2._defaultStyle = {}, r2.Radius = 0, r2.prizeRadius = 0, r2.prizeDeg = 0, r2.prizeAng = 0, r2.rotateDeg = 0, r2.maxBtnRadius = 0, r2.startTime = 0, r2.endTime = 0, r2.stopDeg = 0, r2.endDeg = 0, r2.FPS = 16.6, r2.step = 0, r2.ImageCache = /* @__PURE__ */ new Map(), r2.initData(i), r2.initWatch(), r2.initComputed(), null === (n2 = e2.beforeCreate) || void 0 === n2 || n2.call(r2), r2.init(), r2;
  }
  return o(e, t), e.prototype.resize = function() {
    var e2, i;
    t.prototype.resize.call(this), this.Radius = Math.min(this.boxWidth, this.boxHeight) / 2, this.ctx.translate(this.Radius, this.Radius), this.draw(), null === (i = (e2 = this.config).afterResize) || void 0 === i || i.call(e2);
  }, e.prototype.initLucky = function() {
    this.Radius = 0, this.prizeRadius = 0, this.prizeDeg = 0, this.prizeAng = 0, this.rotateDeg = 0, this.maxBtnRadius = 0, this.startTime = 0, this.endTime = 0, this.stopDeg = 0, this.endDeg = 0, this.FPS = 16.6, this.prizeFlag = -1, this.step = 0, t.prototype.initLucky.call(this);
  }, e.prototype.initData = function(t2) {
    this.$set(this, "width", t2.width || "300px"), this.$set(this, "height", t2.height || "300px"), this.$set(this, "blocks", t2.blocks || []), this.$set(this, "prizes", t2.prizes || []), this.$set(this, "buttons", t2.buttons || []), this.$set(this, "defaultConfig", t2.defaultConfig || {}), this.$set(this, "defaultStyle", t2.defaultStyle || {}), this.$set(this, "startCallback", t2.start), this.$set(this, "endCallback", t2.end);
  }, e.prototype.initComputed = function() {
    var t2 = this;
    this.$computed(this, "_defaultConfig", function() {
      return s({ gutter: "0px", offsetDegree: 0, speed: 20, speedFunction: "quad", accelerationTime: 2500, decelerationTime: 2500, stopRange: 0 }, t2.defaultConfig);
    }), this.$computed(this, "_defaultStyle", function() {
      return s({ fontSize: "18px", fontColor: "#000", fontStyle: "sans-serif", fontWeight: "400", background: "rgba(0,0,0,0)", wordWrap: true, lengthLimit: "90%" }, t2.defaultStyle);
    });
  }, e.prototype.initWatch = function() {
    var t2 = this;
    this.$watch("width", function(e2) {
      t2.data.width = e2, t2.resize();
    }), this.$watch("height", function(e2) {
      t2.data.height = e2, t2.resize();
    }), this.$watch("blocks", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("prizes", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("buttons", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("defaultConfig", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("defaultStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("startCallback", function() {
      return t2.init();
    }), this.$watch("endCallback", function() {
      return t2.init();
    });
  }, e.prototype.init = function() {
    var t2, e2;
    return a(this, void 0, void 0, function() {
      var i;
      return h2(this, function(n2) {
        switch (n2.label) {
          case 0:
            return this.initLucky(), i = this.config, null === (t2 = i.beforeInit) || void 0 === t2 || t2.call(this), this.draw(), this.draw(), [4, this.initImageCache()];
          case 1:
            return n2.sent(), null === (e2 = i.afterInit) || void 0 === e2 || e2.call(this), [2];
        }
      });
    });
  }, e.prototype.initImageCache = function() {
    var t2 = this;
    return new Promise(function(e2) {
      var i = { blocks: t2.blocks.map(function(t3) {
        return t3.imgs;
      }), prizes: t2.prizes.map(function(t3) {
        return t3.imgs;
      }), buttons: t2.buttons.map(function(t3) {
        return t3.imgs;
      }) };
      Object.keys(i).forEach(function(n2) {
        var r2 = i[n2], o2 = [];
        r2 && r2.forEach(function(e3, i2) {
          e3 && e3.forEach(function(e4, r3) {
            o2.push(t2.loadAndCacheImg(n2, i2, r3));
          });
        }), Promise.all(o2).then(function() {
          t2.draw(), e2();
        });
      });
    });
  }, e.prototype.handleClick = function(t2) {
    var e2, i = this.ctx;
    i.beginPath(), i.arc(0, 0, this.maxBtnRadius, 0, 2 * Math.PI, false), i.isPointInPath(t2.offsetX, t2.offsetY) && 0 === this.step && (null === (e2 = this.startCallback) || void 0 === e2 || e2.call(this, t2));
  }, e.prototype.loadAndCacheImg = function(t2, e2, i) {
    return a(this, void 0, void 0, function() {
      var n2 = this;
      return h2(this, function(r2) {
        return [2, new Promise(function(r3, o2) {
          var s2 = n2[t2][e2];
          if (s2 && s2.imgs) {
            var c2 = s2.imgs[i];
            c2 && n2.loadImg(c2.src, c2).then(function(t3) {
              return a(n2, void 0, void 0, function() {
                return h2(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return "function" != typeof c2.formatter ? [3, 2] : [4, Promise.resolve(c2.formatter.call(this, t3))];
                    case 1:
                      t3 = e3.sent(), e3.label = 2;
                    case 2:
                      return this.ImageCache.set(c2.src, t3), r3(), [2];
                  }
                });
              });
            }).catch(function(n3) {
              console.error(t2 + "[" + e2 + "].imgs[" + i + "] " + n3), o2();
            });
          }
        })];
      });
    });
  }, e.prototype.drawBlock = function(t2, e2, i) {
    var n2 = this, r2 = this.ctx;
    d(e2.background) && (r2.beginPath(), r2.fillStyle = e2.background, r2.arc(0, 0, t2, 0, 2 * Math.PI, false), r2.fill()), e2.imgs && e2.imgs.forEach(function(e3, i2) {
      var o2 = n2.ImageCache.get(e3.src);
      if (o2) {
        var s2 = n2.computedWidthAndHeight(o2, e3, 2 * t2, 2 * t2), a2 = s2[0], h3 = s2[1], c2 = [n2.getOffsetX(a2) + n2.getLength(e3.left, 2 * t2), n2.getLength(e3.top, 2 * t2) - t2], l2 = c2[0], u2 = c2[1];
        r2.save(), e3.rotate && r2.rotate(A(n2.rotateDeg)), n2.drawImage(r2, o2, l2, u2, a2, h3), r2.restore();
      }
    });
  }, e.prototype.draw = function() {
    var t2, e2, i = this, n2 = this, r2 = n2.config, o2 = n2.ctx, s2 = n2._defaultConfig, a2 = n2._defaultStyle;
    null === (t2 = r2.beforeDraw) || void 0 === t2 || t2.call(this, o2), o2.clearRect(-this.Radius, -this.Radius, 2 * this.Radius, 2 * this.Radius), this.prizeRadius = this.blocks.reduce(function(t3, e3, n3) {
      return i.drawBlock(t3, e3, n3), t3 - i.getLength(e3.padding && e3.padding.split(" ")[0]);
    }, this.Radius), this.prizeDeg = 360 / this.prizes.length, this.prizeAng = A(this.prizeDeg);
    var h3 = this.prizeRadius * Math.sin(this.prizeAng / 2) * 2, c2 = A(this.rotateDeg - 90 + this.prizeDeg / 2 + s2.offsetDegree), l2 = function(t3, e3) {
      return i.getOffsetX(o2.measureText(e3).width) + i.getLength(t3.left, h3);
    }, p2 = function(t3, e3, n3) {
      var r3 = t3.lineHeight || a2.lineHeight || t3.fontSize || a2.fontSize;
      return i.getLength(t3.top, e3) + (n3 + 1) * i.getLength(r3);
    };
    o2.save(), this.prizes.forEach(function(t3, e3) {
      var n3 = c2 + e3 * i.prizeAng, r3 = i.prizeRadius - i.maxBtnRadius, g2 = t3.background || a2.background;
      d(g2) && (o2.fillStyle = g2, function(t4, e4, i2, n4, r4, o3) {
        t4.beginPath();
        var s3, a3, h4 = A(90 / Math.PI / i2 * o3), c3 = n4 + h4, l3 = r4 - h4;
        t4.arc(0, 0, i2, c3, l3, false), t4.lineTo.apply(t4, (s3 = (n4 + r4) / 2, a3 = o3 / 2 / Math.abs(Math.sin((n4 - r4) / 2)), [+(Math.cos(s3) * a3).toFixed(8), +(Math.sin(s3) * a3).toFixed(8)])), t4.closePath();
      }(o2, i.maxBtnRadius, i.prizeRadius, n3 - i.prizeAng / 2, n3 + i.prizeAng / 2, i.getLength(s2.gutter)), o2.fill());
      var y2 = Math.cos(n3) * i.prizeRadius, m2 = Math.sin(n3) * i.prizeRadius;
      o2.translate(y2, m2), o2.rotate(n3 + A(90)), t3.imgs && t3.imgs.forEach(function(t4, e4) {
        var n4 = i.ImageCache.get(t4.src);
        if (n4) {
          var s3 = i.computedWidthAndHeight(n4, t4, i.prizeAng * i.prizeRadius, r3), a3 = s3[0], c3 = s3[1], l3 = [i.getOffsetX(a3) + i.getLength(t4.left, h3), i.getLength(t4.top, r3)], u2 = l3[0], f2 = l3[1];
          i.drawImage(o2, n4, u2, f2, a3, c3);
        }
      }), t3.fonts && t3.fonts.forEach(function(t4) {
        var e4 = t4.fontColor || a2.fontColor, n4 = t4.fontWeight || a2.fontWeight, h4 = i.getLength(t4.fontSize || a2.fontSize), c3 = t4.fontStyle || a2.fontStyle, d2 = u(t4, "wordWrap") ? t4.wordWrap : a2.wordWrap, g3 = t4.lengthLimit || a2.lengthLimit, y3 = t4.lineClamp || a2.lineClamp;
        o2.fillStyle = e4, o2.font = n4 + " " + (h4 >> 0) + "px " + c3;
        var m3 = String(t4.text);
        (d2 ? v(o2, f(m3), function(e5) {
          var n5 = (i.prizeRadius - p2(t4, r3, e5.length)) * Math.tan(i.prizeAng / 2) * 2 - i.getLength(s2.gutter);
          return i.getLength(g3, n5);
        }, y3) : m3.split("\n")).filter(function(t5) {
          return !!t5;
        }).forEach(function(e5, i2) {
          o2.fillText(e5, l2(t4, e5), p2(t4, r3, i2));
        });
      }), o2.rotate(A(360) - n3 - A(90)), o2.translate(-y2, -m2);
    }), o2.restore(), this.buttons.forEach(function(t3, e3) {
      var n3 = i.getLength(t3.radius, i.prizeRadius);
      i.maxBtnRadius = Math.max(i.maxBtnRadius, n3), d(t3.background) && (o2.beginPath(), o2.fillStyle = t3.background, o2.arc(0, 0, n3, 0, 2 * Math.PI, false), o2.fill()), t3.pointer && d(t3.background) && (o2.beginPath(), o2.fillStyle = t3.background, o2.moveTo(-n3, 0), o2.lineTo(n3, 0), o2.lineTo(0, 2 * -n3), o2.closePath(), o2.fill()), t3.imgs && t3.imgs.forEach(function(t4, e4) {
        var r3 = i.ImageCache.get(t4.src);
        if (r3) {
          var s3 = i.computedWidthAndHeight(r3, t4, 2 * n3, 2 * n3), a3 = s3[0], h4 = s3[1], c3 = [i.getOffsetX(a3) + i.getLength(t4.left, n3), i.getLength(t4.top, n3)], l3 = c3[0], u2 = c3[1];
          i.drawImage(o2, r3, l3, u2, a3, h4);
        }
      }), t3.fonts && t3.fonts.forEach(function(t4) {
        var e4 = t4.fontColor || a2.fontColor, r3 = t4.fontWeight || a2.fontWeight, s3 = i.getLength(t4.fontSize || a2.fontSize), h4 = t4.fontStyle || a2.fontStyle;
        o2.fillStyle = e4, o2.font = r3 + " " + (s3 >> 0) + "px " + h4, String(t4.text).split("\n").forEach(function(e5, i2) {
          o2.fillText(e5, l2(t4, e5), p2(t4, n3, i2));
        });
      });
    }), null === (e2 = r2.afterDraw) || void 0 === e2 || e2.call(this, o2);
  }, e.prototype.carveOnGunwaleOfAMovingBoat = function() {
    var t2 = this, e2 = t2._defaultConfig, i = t2.prizeFlag, n2 = t2.prizeDeg, r2 = t2.rotateDeg;
    this.endTime = Date.now();
    for (var o2 = this.stopDeg = r2, s2 = e2.speed, a2 = (Math.random() * n2 - n2 / 2) * this.getLength(e2.stopRange), h3 = 0, c2 = 0, l2 = 0; ++h3; ) {
      var u2 = 360 * h3 - i * n2 - r2 - e2.offsetDegree + a2 - n2 / 2, f2 = T(this.FPS, o2, u2, e2.decelerationTime) - o2;
      if (f2 > s2) {
        this.endDeg = s2 - c2 > f2 - s2 ? u2 : l2;
        break;
      }
      l2 = u2, c2 = f2;
    }
  }, e.prototype.play = function() {
    var t2, e2;
    0 === this.step && (this.startTime = Date.now(), this.prizeFlag = void 0, this.step = 1, null === (e2 = (t2 = this.config).afterStart) || void 0 === e2 || e2.call(t2), this.run());
  }, e.prototype.stop = function(t2) {
    if (0 !== this.step && 3 !== this.step) {
      if (!t2 && 0 !== t2) {
        var e2 = this.prizes.map(function(t3) {
          return t3.range;
        });
        t2 = g(e2);
      }
      t2 < 0 ? (this.step = 0, this.prizeFlag = -1) : (this.step = 2, this.prizeFlag = t2 % this.prizes.length);
    }
  }, e.prototype.run = function(t2) {
    var e2;
    void 0 === t2 && (t2 = 0);
    var i = this, n2 = i.rAF, r2 = i.step, o2 = i.prizeFlag, s2 = i._defaultConfig, a2 = s2.accelerationTime, h3 = s2.decelerationTime, c2 = s2.speed;
    if (0 !== r2) {
      if (-1 !== o2) {
        3 !== r2 || this.endDeg || this.carveOnGunwaleOfAMovingBoat();
        var l2 = Date.now() - this.startTime, u2 = Date.now() - this.endTime, f2 = this.rotateDeg;
        if (1 === r2 || l2 < a2) {
          this.FPS = l2 / t2;
          var d2 = O(l2, 0, c2, a2);
          d2 === c2 && (this.step = 2), f2 += d2 % 360;
        } else 2 === r2 ? (f2 += c2 % 360, void 0 !== o2 && o2 >= 0 && (this.step = 3, this.stopDeg = 0, this.endDeg = 0)) : 3 === r2 ? (f2 = T(u2, this.stopDeg, this.endDeg, h3), u2 >= h3 && (this.step = 0)) : this.stop(-1);
        this.rotateDeg = f2, this.draw(), n2(this.run.bind(this, t2 + 1));
      }
    } else null === (e2 = this.endCallback) || void 0 === e2 || e2.call(this, this.prizes.find(function(t3, e3) {
      return e3 === o2;
    }) || {});
  }, e.prototype.conversionAxis = function(t2, e2) {
    var i = this.config;
    return [t2 / i.dpr - this.Radius, e2 / i.dpr - this.Radius];
  }, e;
}($);
var W = function(t) {
  function e(e2, i) {
    var n2, r2 = t.call(this, e2, { width: i.width, height: i.height }) || this;
    return r2.rows = 3, r2.cols = 3, r2.blocks = [], r2.prizes = [], r2.buttons = [], r2.defaultConfig = {}, r2.defaultStyle = {}, r2.activeStyle = {}, r2._defaultConfig = {}, r2._defaultStyle = {}, r2._activeStyle = {}, r2.cellWidth = 0, r2.cellHeight = 0, r2.startTime = 0, r2.endTime = 0, r2.currIndex = 0, r2.stopIndex = 0, r2.endIndex = 0, r2.demo = false, r2.timer = 0, r2.FPS = 16.6, r2.step = 0, r2.prizeFlag = -1, r2.cells = [], r2.ImageCache = /* @__PURE__ */ new Map(), r2.initData(i), r2.initWatch(), r2.initComputed(), null === (n2 = e2.beforeCreate) || void 0 === n2 || n2.call(r2), r2.init(), r2;
  }
  return o(e, t), e.prototype.resize = function() {
    var e2, i;
    t.prototype.resize.call(this), this.draw(), null === (i = (e2 = this.config).afterResize) || void 0 === i || i.call(e2);
  }, e.prototype.initLucky = function() {
    this.cellWidth = 0, this.cellHeight = 0, this.startTime = 0, this.endTime = 0, this.currIndex = 0, this.stopIndex = 0, this.endIndex = 0, this.demo = false, this.timer = 0, this.FPS = 16.6, this.prizeFlag = -1, this.step = 0, t.prototype.initLucky.call(this);
  }, e.prototype.initData = function(t2) {
    this.$set(this, "width", t2.width || "300px"), this.$set(this, "height", t2.height || "300px"), this.$set(this, "rows", Number(t2.rows) || 3), this.$set(this, "cols", Number(t2.cols) || 3), this.$set(this, "blocks", t2.blocks || []), this.$set(this, "prizes", t2.prizes || []), this.$set(this, "buttons", t2.buttons || []), this.$set(this, "button", t2.button), this.$set(this, "defaultConfig", t2.defaultConfig || {}), this.$set(this, "defaultStyle", t2.defaultStyle || {}), this.$set(this, "activeStyle", t2.activeStyle || {}), this.$set(this, "startCallback", t2.start), this.$set(this, "endCallback", t2.end);
  }, e.prototype.initComputed = function() {
    var t2 = this;
    this.$computed(this, "_defaultConfig", function() {
      var e2 = s({ gutter: 5, speed: 20, accelerationTime: 2500, decelerationTime: 2500 }, t2.defaultConfig);
      return e2.gutter = t2.getLength(e2.gutter), e2.speed = e2.speed / 40, e2;
    }), this.$computed(this, "_defaultStyle", function() {
      return s({ borderRadius: 20, fontColor: "#000", fontSize: "18px", fontStyle: "sans-serif", fontWeight: "400", background: "rgba(0,0,0,0)", shadow: "", wordWrap: true, lengthLimit: "90%" }, t2.defaultStyle);
    }), this.$computed(this, "_activeStyle", function() {
      return s({ background: "#ffce98", shadow: "" }, t2.activeStyle);
    });
  }, e.prototype.initWatch = function() {
    var t2 = this;
    this.$watch("width", function(e2) {
      t2.data.width = e2, t2.resize();
    }), this.$watch("height", function(e2) {
      t2.data.height = e2, t2.resize();
    }), this.$watch("blocks", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("prizes", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("buttons", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("rows", function() {
      return t2.init();
    }), this.$watch("cols", function() {
      return t2.init();
    }), this.$watch("defaultConfig", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("defaultStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("activeStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("startCallback", function() {
      return t2.init();
    }), this.$watch("endCallback", function() {
      return t2.init();
    });
  }, e.prototype.init = function() {
    var t2, e2;
    return a(this, void 0, void 0, function() {
      var i;
      return h2(this, function(n2) {
        switch (n2.label) {
          case 0:
            return this.initLucky(), i = this.config, null === (t2 = i.beforeInit) || void 0 === t2 || t2.call(this), this.draw(), [4, this.initImageCache()];
          case 1:
            return n2.sent(), null === (e2 = i.afterInit) || void 0 === e2 || e2.call(this), [2];
        }
      });
    });
  }, e.prototype.initImageCache = function() {
    var t2 = this;
    return new Promise(function(e2) {
      var i = t2.buttons.map(function(t3) {
        return t3.imgs;
      });
      t2.button && i.push(t2.button.imgs);
      var n2 = { blocks: t2.blocks.map(function(t3) {
        return t3.imgs;
      }), prizes: t2.prizes.map(function(t3) {
        return t3.imgs;
      }), buttons: i };
      Object.keys(n2).forEach(function(i2) {
        var r2 = n2[i2], o2 = [];
        r2 && r2.forEach(function(e3, n3) {
          e3 && e3.forEach(function(e4, r3) {
            o2.push(t2.loadAndCacheImg(i2, n3, r3));
          });
        }), Promise.all(o2).then(function() {
          t2.draw(), e2();
        });
      });
    });
  }, e.prototype.handleClick = function(t2) {
    var e2 = this, i = this.ctx;
    c(c([], this.buttons), [this.button]).forEach(function(n2) {
      var r2;
      if (n2) {
        var o2 = e2.getGeometricProperty([n2.x, n2.y, n2.col || 1, n2.row || 1]), s2 = o2[0], a2 = o2[1], h3 = o2[2], c2 = o2[3];
        i.beginPath(), i.rect(s2, a2, h3, c2), i.isPointInPath(t2.offsetX, t2.offsetY) && 0 === e2.step && ("function" == typeof n2.callback && n2.callback.call(e2, n2), null === (r2 = e2.startCallback) || void 0 === r2 || r2.call(e2, t2, n2));
      }
    });
  }, e.prototype.loadAndCacheImg = function(t2, e2, i) {
    return a(this, void 0, void 0, function() {
      var n2 = this;
      return h2(this, function(r2) {
        return [2, new Promise(function(r3, o2) {
          var s2 = n2[t2][e2];
          if ("buttons" === t2 && !n2.buttons.length && n2.button && (s2 = n2.button), s2 && s2.imgs) {
            var c2 = s2.imgs[i];
            if (c2) {
              var l2 = [n2.loadImg(c2.src, c2), c2.activeSrc && n2.loadImg(c2.activeSrc, c2, "$activeResolve")];
              Promise.all(l2).then(function(t3) {
                var e3 = t3[0], i2 = t3[1];
                return a(n2, void 0, void 0, function() {
                  var t4;
                  return h2(this, function(n3) {
                    switch (n3.label) {
                      case 0:
                        return "function" != typeof (t4 = c2.formatter) ? [3, 3] : [4, Promise.resolve(t4.call(this, e3))];
                      case 1:
                        return e3 = n3.sent(), i2 ? [4, Promise.resolve(t4.call(this, i2))] : [3, 3];
                      case 2:
                        i2 = n3.sent(), n3.label = 3;
                      case 3:
                        return this.ImageCache.set(c2.src, e3), i2 && this.ImageCache.set(c2.activeSrc, i2), r3(), [2];
                    }
                  });
                });
              }).catch(function(n3) {
                console.error(t2 + "[" + e2 + "].imgs[" + i + "] " + n3), o2();
              });
            }
          }
        })];
      });
    });
  }, e.prototype.draw = function() {
    var t2, e2, i = this, n2 = this, r2 = n2.config, o2 = n2.ctx, s2 = n2._defaultConfig, a2 = n2._defaultStyle, h3 = n2._activeStyle;
    null === (t2 = r2.beforeDraw) || void 0 === t2 || t2.call(this, o2), o2.clearRect(0, 0, this.boxWidth, this.boxHeight), this.cells = c(c([], this.prizes), this.buttons), this.button && this.cells.push(this.button), this.cells.forEach(function(t3) {
      t3.col = t3.col || 1, t3.row = t3.row || 1;
    }), this.prizeArea = this.blocks.reduce(function(t3, e3, n3) {
      var r3 = t3.x, s3 = t3.y, a3 = t3.w, h4 = t3.h, c2 = p(e3, i.getLength.bind(i)), l2 = c2[0], u2 = c2[1], f2 = c2[2], g2 = c2[3], v2 = e3.borderRadius ? i.getLength(e3.borderRadius) : 0, y2 = e3.background;
      return d(y2) && (o2.fillStyle = i.handleBackground(r3, s3, a3, h4, y2), L(o2, r3, s3, a3, h4, v2), o2.fill()), e3.imgs && e3.imgs.forEach(function(t4, e4) {
        var n4 = i.ImageCache.get(t4.src);
        if (n4) {
          var c3 = i.computedWidthAndHeight(n4, t4, a3, h4), l3 = c3[0], u3 = c3[1], f3 = [i.getOffsetX(l3, a3) + i.getLength(t4.left, a3), i.getLength(t4.top, h4)], d2 = f3[0], p2 = f3[1];
          i.drawImage(o2, n4, r3 + d2, s3 + p2, l3, u3);
        }
      }), { x: r3 + f2, y: s3 + l2, w: a3 - f2 - g2, h: h4 - l2 - u2 };
    }, { x: 0, y: 0, w: this.boxWidth, h: this.boxHeight }), this.cellWidth = (this.prizeArea.w - s2.gutter * (this.cols - 1)) / this.cols, this.cellHeight = (this.prizeArea.h - s2.gutter * (this.rows - 1)) / this.rows, this.cells.forEach(function(t3, e3) {
      var n3 = i.getGeometricProperty([t3.x, t3.y, t3.col, t3.row]), s3 = n3[0], c2 = n3[1], l2 = n3[2], p2 = n3[3], g2 = false;
      (void 0 === i.prizeFlag || i.prizeFlag > -1) && (g2 = e3 === i.currIndex % i.prizes.length >> 0);
      var y2 = g2 ? h3.background : t3.background || a2.background;
      if (d(y2)) {
        var m2 = (g2 ? h3.shadow : t3.shadow || a2.shadow).replace(/px/g, "").split(",")[0].split(" ").map(function(t4, e4) {
          return e4 < 3 ? Number(t4) : t4;
        });
        4 === m2.length && (o2.shadowColor = m2[3], o2.shadowOffsetX = m2[0] * r2.dpr, o2.shadowOffsetY = m2[1] * r2.dpr, o2.shadowBlur = m2[2], m2[0] > 0 ? l2 -= m2[0] : (l2 += m2[0], s3 -= m2[0]), m2[1] > 0 ? p2 -= m2[1] : (p2 += m2[1], c2 -= m2[1])), o2.fillStyle = i.handleBackground(s3, c2, l2, p2, y2);
        var w2 = i.getLength(t3.borderRadius ? t3.borderRadius : a2.borderRadius);
        L(o2, s3, c2, l2, p2, w2), o2.fill(), o2.shadowColor = "rgba(0, 0, 0, 0)", o2.shadowOffsetX = 0, o2.shadowOffsetY = 0, o2.shadowBlur = 0;
      }
      e3 >= i.prizes.length && (e3 -= i.prizes.length), t3.imgs && t3.imgs.forEach(function(t4, e4) {
        var n4 = i.ImageCache.get(t4.src), r3 = i.ImageCache.get(t4.activeSrc);
        if (n4) {
          var a3 = g2 && r3 || n4;
          if (a3) {
            var h4 = i.computedWidthAndHeight(a3, t4, l2, p2), u2 = h4[0], f2 = h4[1], d2 = [s3 + i.getOffsetX(u2, l2) + i.getLength(t4.left, l2), c2 + i.getLength(t4.top, p2)], v2 = d2[0], y3 = d2[1];
            i.drawImage(o2, a3, v2, y3, u2, f2);
          }
        }
      }), t3.fonts && t3.fonts.forEach(function(t4) {
        var e4 = g2 && h3.fontStyle ? h3.fontStyle : t4.fontStyle || a2.fontStyle, n4 = g2 && h3.fontWeight ? h3.fontWeight : t4.fontWeight || a2.fontWeight, r3 = g2 && h3.fontSize ? i.getLength(h3.fontSize) : i.getLength(t4.fontSize || a2.fontSize), d2 = g2 && h3.lineHeight ? h3.lineHeight : t4.lineHeight || a2.lineHeight || t4.fontSize || a2.fontSize, y3 = u(t4, "wordWrap") ? t4.wordWrap : a2.wordWrap, m3 = t4.lengthLimit || a2.lengthLimit, w3 = t4.lineClamp || a2.lineClamp;
        o2.font = n4 + " " + (r3 >> 0) + "px " + e4, o2.fillStyle = g2 && h3.fontColor ? h3.fontColor : t4.fontColor || a2.fontColor;
        var b2 = [], k2 = String(t4.text);
        if (y3) {
          var S2 = i.getLength(m3, l2);
          b2 = v(o2, f(k2), function() {
            return S2;
          }, w3);
        } else b2 = k2.split("\n");
        b2.forEach(function(e5, n5) {
          o2.fillText(e5, s3 + i.getOffsetX(o2.measureText(e5).width, l2) + i.getLength(t4.left, l2), c2 + i.getLength(t4.top, p2) + (n5 + 1) * i.getLength(d2));
        });
      });
    }), null === (e2 = r2.afterDraw) || void 0 === e2 || e2.call(this, o2);
  }, e.prototype.handleBackground = function(t2, e2, i, n2, r2) {
    var o2 = this.ctx;
    return r2.includes("linear-gradient") && (r2 = function(t3, e3, i2, n3, r3, o3) {
      var s2 = /linear-gradient\((.+)\)/.exec(o3)[1].split(",").map(function(t4) {
        return t4.trim();
      }), a2 = s2.shift(), h3 = [0, 0, 0, 0];
      if (a2.includes("deg")) {
        var c2 = function(t4) {
          return Math.tan(t4 / 180 * Math.PI);
        };
        (a2 = a2.slice(0, -3) % 360) >= 0 && a2 < 45 ? h3 = [e3, i2 + r3, e3 + n3, i2 + r3 - n3 * c2(a2 - 0)] : a2 >= 45 && a2 < 90 ? h3 = [e3, i2 + r3, e3 + n3 - r3 * c2(a2 - 45), i2] : a2 >= 90 && a2 < 135 ? h3 = [e3 + n3, i2 + r3, e3 + n3 - r3 * c2(a2 - 90), i2] : a2 >= 135 && a2 < 180 ? h3 = [e3 + n3, i2 + r3, e3, i2 + n3 * c2(a2 - 135)] : a2 >= 180 && a2 < 225 ? h3 = [e3 + n3, i2, e3, i2 + n3 * c2(a2 - 180)] : a2 >= 225 && a2 < 270 ? h3 = [e3 + n3, i2, e3 + r3 * c2(a2 - 225), i2 + r3] : a2 >= 270 && a2 < 315 ? h3 = [e3, i2, e3 + r3 * c2(a2 - 270), i2 + r3] : a2 >= 315 && a2 < 360 && (h3 = [e3, i2, e3 + n3, i2 + r3 - n3 * c2(a2 - 315)]);
      } else a2.includes("top") ? h3 = [e3, i2 + r3, e3, i2] : a2.includes("bottom") ? h3 = [e3, i2, e3, i2 + r3] : a2.includes("left") ? h3 = [e3 + n3, i2, e3, i2] : a2.includes("right") && (h3 = [e3, i2, e3 + n3, i2]);
      var l2 = t3.createLinearGradient.apply(t3, h3.map(function(t4) {
        return t4 >> 0;
      }));
      return s2.reduce(function(t4, e4, i3) {
        var n4 = e4.split(" ");
        return 1 === n4.length ? t4.addColorStop(i3, n4[0]) : 2 === n4.length && t4.addColorStop.apply(t4, n4), t4;
      }, l2);
    }(o2, t2, e2, i, n2, r2)), r2;
  }, e.prototype.carveOnGunwaleOfAMovingBoat = function() {
    var t2 = this, e2 = t2._defaultConfig, i = t2.prizeFlag, n2 = t2.currIndex;
    this.endTime = Date.now();
    for (var r2 = this.stopIndex = n2, o2 = e2.speed, s2 = 0, a2 = 0, h3 = 0; ++s2; ) {
      var c2 = this.prizes.length * s2 + i - r2, l2 = T(this.FPS, r2, c2, e2.decelerationTime) - r2;
      if (l2 > o2) {
        this.endIndex = o2 - a2 > l2 - o2 ? c2 : h3;
        break;
      }
      h3 = c2, a2 = l2;
    }
  }, e.prototype.play = function() {
    var t2, e2;
    0 === this.step && (this.startTime = Date.now(), this.prizeFlag = void 0, this.step = 1, null === (e2 = (t2 = this.config).afterStart) || void 0 === e2 || e2.call(t2), this.run());
  }, e.prototype.stop = function(t2) {
    if (0 !== this.step && 3 !== this.step) {
      if (!t2 && 0 !== t2) {
        var e2 = this.prizes.map(function(t3) {
          return t3.range;
        });
        t2 = g(e2);
      }
      t2 < 0 ? (this.step = 0, this.prizeFlag = -1) : (this.step = 2, this.prizeFlag = t2 % this.prizes.length);
    }
  }, e.prototype.run = function(t2) {
    var e2;
    void 0 === t2 && (t2 = 0);
    var i = this, n2 = i.rAF, r2 = i.step, o2 = i.prizes, s2 = i.prizeFlag, a2 = i._defaultConfig, h3 = a2.accelerationTime, c2 = a2.decelerationTime, l2 = a2.speed;
    if (0 !== r2) {
      if (-1 !== s2) {
        3 !== r2 || this.endIndex || this.carveOnGunwaleOfAMovingBoat();
        var u2 = Date.now() - this.startTime, f2 = Date.now() - this.endTime, d2 = this.currIndex;
        if (1 === r2 || u2 < h3) {
          this.FPS = u2 / t2;
          var p2 = O(u2, 0.1, l2 - 0.1, h3);
          p2 === l2 && (this.step = 2), d2 += p2 % o2.length;
        } else 2 === r2 ? (d2 += l2 % o2.length, void 0 !== s2 && s2 >= 0 && (this.step = 3, this.stopIndex = 0, this.endIndex = 0)) : 3 === r2 ? (d2 = T(f2, this.stopIndex, this.endIndex, c2), f2 >= c2 && (this.step = 0)) : this.stop(-1);
        this.currIndex = d2, this.draw(), n2(this.run.bind(this, t2 + 1));
      }
    } else null === (e2 = this.endCallback) || void 0 === e2 || e2.call(this, this.prizes.find(function(t3, e3) {
      return e3 === s2;
    }) || {});
  }, e.prototype.getGeometricProperty = function(t2) {
    var e2 = t2[0], i = t2[1], n2 = t2[2], r2 = void 0 === n2 ? 1 : n2, o2 = t2[3], s2 = void 0 === o2 ? 1 : o2, a2 = this.cellWidth, h3 = this.cellHeight, c2 = this._defaultConfig.gutter, l2 = [this.prizeArea.x + (a2 + c2) * e2, this.prizeArea.y + (h3 + c2) * i];
    return r2 && s2 && l2.push(a2 * r2 + c2 * (r2 - 1), h3 * s2 + c2 * (s2 - 1)), l2;
  }, e.prototype.conversionAxis = function(t2, e2) {
    var i = this.config;
    return [t2 / i.dpr, e2 / i.dpr];
  }, e;
}($);
var _ = function(t) {
  function e(e2, i) {
    var n2, r2 = t.call(this, e2, { width: i.width, height: i.height }) || this;
    return r2.blocks = [], r2.prizes = [], r2.slots = [], r2.defaultConfig = {}, r2._defaultConfig = {}, r2.defaultStyle = {}, r2._defaultStyle = {}, r2.endCallback = function() {
    }, r2.cellWidth = 0, r2.cellHeight = 0, r2.cellAndSpacing = 0, r2.widthAndSpacing = 0, r2.heightAndSpacing = 0, r2.FPS = 16.6, r2.scroll = [], r2.stopScroll = [], r2.endScroll = [], r2.startTime = 0, r2.endTime = 0, r2.step = 0, r2.prizeFlag = void 0, r2.ImageCache = /* @__PURE__ */ new Map(), r2.initData(i), r2.initWatch(), r2.initComputed(), null === (n2 = e2.beforeCreate) || void 0 === n2 || n2.call(r2), r2.init(), r2;
  }
  return o(e, t), e.prototype.resize = function() {
    var e2, i;
    t.prototype.resize.call(this), this.draw(), null === (i = (e2 = this.config).afterResize) || void 0 === i || i.call(e2);
  }, e.prototype.initLucky = function() {
    this.cellWidth = 0, this.cellHeight = 0, this.cellAndSpacing = 0, this.widthAndSpacing = 0, this.heightAndSpacing = 0, this.FPS = 16.6, this.scroll = [], this.stopScroll = [], this.endScroll = [], this.startTime = 0, this.endTime = 0, this.prizeFlag = void 0, this.step = 0, t.prototype.initLucky.call(this);
  }, e.prototype.initData = function(t2) {
    this.$set(this, "width", t2.width || "300px"), this.$set(this, "height", t2.height || "300px"), this.$set(this, "blocks", t2.blocks || []), this.$set(this, "prizes", t2.prizes || []), this.$set(this, "slots", t2.slots || []), this.$set(this, "defaultConfig", t2.defaultConfig || {}), this.$set(this, "defaultStyle", t2.defaultStyle || {}), this.$set(this, "endCallback", t2.end);
  }, e.prototype.initComputed = function() {
    var t2 = this;
    this.$computed(this, "_defaultConfig", function() {
      var e2 = s({ mode: "vertical", rowSpacing: 0, colSpacing: 5, speed: 20, direction: 1, accelerationTime: 2500, decelerationTime: 2500 }, t2.defaultConfig);
      return e2.rowSpacing = t2.getLength(e2.rowSpacing), e2.colSpacing = t2.getLength(e2.colSpacing), e2;
    }), this.$computed(this, "_defaultStyle", function() {
      return s({ borderRadius: 0, fontColor: "#000", fontSize: "18px", fontStyle: "sans-serif", fontWeight: "400", background: "rgba(0,0,0,0)", wordWrap: true, lengthLimit: "90%" }, t2.defaultStyle);
    });
  }, e.prototype.initWatch = function() {
    var t2 = this;
    this.$watch("width", function(e2) {
      t2.data.width = e2, t2.resize();
    }), this.$watch("height", function(e2) {
      t2.data.height = e2, t2.resize();
    }), this.$watch("blocks", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("prizes", function(e2) {
      t2.initImageCache();
    }, { deep: true }), this.$watch("slots", function(e2) {
      t2.drawOffscreenCanvas(), t2.draw();
    }, { deep: true }), this.$watch("defaultConfig", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("defaultStyle", function() {
      return t2.draw();
    }, { deep: true }), this.$watch("endCallback", function() {
      return t2.init();
    });
  }, e.prototype.init = function() {
    var t2, e2;
    return a(this, void 0, void 0, function() {
      var i;
      return h2(this, function(n2) {
        switch (n2.label) {
          case 0:
            return this.initLucky(), i = this.config, null === (t2 = i.beforeInit) || void 0 === t2 || t2.call(this), this.drawOffscreenCanvas(), this.draw(), [4, this.initImageCache()];
          case 1:
            return n2.sent(), null === (e2 = i.afterInit) || void 0 === e2 || e2.call(this), [2];
        }
      });
    });
  }, e.prototype.initImageCache = function() {
    var t2 = this;
    return new Promise(function(e2) {
      var i = { blocks: t2.blocks.map(function(t3) {
        return t3.imgs;
      }), prizes: t2.prizes.map(function(t3) {
        return t3.imgs;
      }) };
      Object.keys(i).forEach(function(n2) {
        var r2 = i[n2], o2 = [];
        r2 && r2.forEach(function(e3, i2) {
          e3 && e3.forEach(function(e4, r3) {
            o2.push(t2.loadAndCacheImg(n2, i2, r3));
          });
        }), Promise.all(o2).then(function() {
          t2.drawOffscreenCanvas(), t2.draw(), e2();
        });
      });
    });
  }, e.prototype.loadAndCacheImg = function(t2, e2, i) {
    return a(this, void 0, void 0, function() {
      var n2 = this;
      return h2(this, function(r2) {
        return [2, new Promise(function(r3, o2) {
          var s2 = n2[t2][e2];
          if (s2 && s2.imgs) {
            var c2 = s2.imgs[i];
            c2 && n2.loadImg(c2.src, c2).then(function(t3) {
              return a(n2, void 0, void 0, function() {
                return h2(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return "function" != typeof c2.formatter ? [3, 2] : [4, Promise.resolve(c2.formatter.call(this, t3))];
                    case 1:
                      t3 = e3.sent(), e3.label = 2;
                    case 2:
                      return this.ImageCache.set(c2.src, t3), r3(), [2];
                  }
                });
              });
            }).catch(function(n3) {
              console.error(t2 + "[" + e2 + "].imgs[" + i + "] " + n3), o2();
            });
          }
        })];
      });
    });
  }, e.prototype.drawOffscreenCanvas = function() {
    var t2 = this, e2 = this._defaultConfig, i = this._defaultStyle, n2 = this.drawBlocks(), r2 = n2.w, o2 = n2.h, s2 = this.prizes.length, a2 = this.displacementWidthOrHeight(), h3 = a2.cellWidth, c2 = a2.cellHeight, l2 = a2.widthAndSpacing, p2 = a2.heightAndSpacing, g2 = new Array(s2).fill(void 0).map(function(t3, e3) {
      return e3;
    }), y2 = 0, m2 = 0;
    this.slots.forEach(function(e3, i2) {
      void 0 === t2.scroll[i2] && (t2.scroll[i2] = 0), e3.order = e3.order || g2;
      var n3 = e3.order.length;
      y2 = Math.max(y2, r2 + l2 * n3), m2 = Math.max(m2, o2 + p2 * n3);
    });
    var w2 = this.getOffscreenCanvas(y2, m2), b2 = w2._offscreenCanvas, k2 = w2._ctx;
    this._offscreenCanvas = b2, this.slots.forEach(function(n3, r3) {
      var o3 = h3 * r3, s3 = c2 * r3, a3 = 0, g3 = function(t3, e3) {
        for (var i2 = {}, n4 = [], r4 = 0; r4 < t3.length; r4++) i2[r4] = t3[r4];
        for (r4 = 0; r4 < e3.length; r4++) {
          var o4 = i2[e3[r4]];
          o4 && (n4[r4] = o4);
        }
        return n4;
      }(t2.prizes, n3.order);
      if (g3.length) {
        g3.forEach(function(r4, g4) {
          if (r4) {
            n3.order[g4];
            var y4 = l2 * g4 + e2.colSpacing / 2, m3 = p2 * g4 + e2.rowSpacing / 2, w4 = t2.displacement([o3, m3, p2], [y4, s3, l2]), b3 = w4[0], S3 = w4[1], C3 = w4[2];
            a3 += C3;
            var z3 = r4.background || i.background;
            if (d(z3)) {
              var x3 = t2.getLength(u(r4, "borderRadius") ? r4.borderRadius : i.borderRadius);
              L(k2, b3, S3, h3, h3, x3), k2.fillStyle = z3, k2.fill();
            }
            r4.imgs && r4.imgs.forEach(function(e3, i2) {
              var n4 = t2.ImageCache.get(e3.src);
              if (n4) {
                var r5 = t2.computedWidthAndHeight(n4, e3, h3, c2), o4 = r5[0], s4 = r5[1], a4 = [b3 + t2.getOffsetX(o4, h3) + t2.getLength(e3.left, h3), S3 + t2.getLength(e3.top, c2)], l3 = a4[0], u2 = a4[1];
                t2.drawImage(k2, n4, l3, u2, o4, s4);
              }
            }), r4.fonts && r4.fonts.forEach(function(e3) {
              var n4 = e3.fontStyle || i.fontStyle, r5 = e3.fontWeight || i.fontWeight, o4 = t2.getLength(e3.fontSize || i.fontSize), s4 = e3.lineHeight || i.lineHeight || e3.fontSize || i.fontSize, a4 = u(e3, "wordWrap") ? e3.wordWrap : i.wordWrap, l3 = e3.lengthLimit || i.lengthLimit, d2 = e3.lineClamp || i.lineClamp;
              k2.font = r5 + " " + (o4 >> 0) + "px " + n4, k2.fillStyle = e3.fontColor || i.fontColor;
              var p3 = [], g5 = String(e3.text);
              if (a4) {
                var y5 = t2.getLength(l3, h3);
                p3 = v(k2, f(g5), function() {
                  return y5;
                }, d2);
              } else p3 = g5.split("\n");
              p3.forEach(function(i2, n5) {
                k2.fillText(i2, b3 + t2.getOffsetX(k2.measureText(i2).width, h3) + t2.getLength(e3.left, h3), S3 + t2.getLength(e3.top, c2) + (n5 + 1) * t2.getLength(s4));
              });
            });
          }
        });
        for (var y3 = t2.displacement([o3, 0, h3, a3], [0, s3, a3, c2]), w3 = y3[0], S2 = y3[1], C2 = y3[2], z2 = y3[3], x2 = a3; x2 < m2 + a3; ) {
          var I2 = t2.displacement([w3, x2], [x2, S2]), $2 = I2[0], A2 = I2[1];
          t2.drawImage(k2, b2, w3, S2, C2, z2, $2, A2, C2, z2), x2 += a3;
        }
      }
    });
  }, e.prototype.drawBlocks = function() {
    var t2 = this, e2 = this;
    e2.config;
    var i = e2.ctx;
    e2._defaultConfig;
    var n2 = e2._defaultStyle;
    return this.prizeArea = this.blocks.reduce(function(e3, r2, o2) {
      var s2 = e3.x, a2 = e3.y, h3 = e3.w, c2 = e3.h, l2 = p(r2, t2.getLength.bind(t2)), u2 = l2[0], f2 = l2[1], g2 = l2[2], v2 = l2[3], y2 = r2.borderRadius ? t2.getLength(r2.borderRadius) : 0, m2 = r2.background || n2.background;
      return d(m2) && (L(i, s2, a2, h3, c2, y2), i.fillStyle = m2, i.fill()), r2.imgs && r2.imgs.forEach(function(e4, n3) {
        var r3 = t2.ImageCache.get(e4.src);
        if (r3) {
          var o3 = t2.computedWidthAndHeight(r3, e4, h3, c2), l3 = o3[0], u3 = o3[1], f3 = [t2.getOffsetX(l3, h3) + t2.getLength(e4.left, h3), t2.getLength(e4.top, c2)], d2 = f3[0], p2 = f3[1];
          t2.drawImage(i, r3, s2 + d2, a2 + p2, l3, u3);
        }
      }), { x: s2 + g2, y: a2 + u2, w: h3 - g2 - v2, h: c2 - u2 - f2 };
    }, { x: 0, y: 0, w: this.boxWidth, h: this.boxHeight });
  }, e.prototype.draw = function() {
    var t2, e2 = this, i = this, n2 = i.config, r2 = i.ctx;
    i._defaultConfig, i._defaultStyle, null === (t2 = n2.beforeDraw) || void 0 === t2 || t2.call(this, r2), r2.clearRect(0, 0, this.boxWidth, this.boxHeight);
    var o2 = this.drawBlocks(), s2 = o2.x, a2 = o2.y, h3 = o2.w, c2 = o2.h;
    if (this._offscreenCanvas) {
      var l2 = this, u2 = l2.cellWidth, f2 = l2.cellHeight, d2 = l2.cellAndSpacing, p2 = l2.widthAndSpacing, g2 = l2.heightAndSpacing;
      this.slots.forEach(function(t3, i2) {
        var n3 = d2 * t3.order.length, o3 = e2.displacement(-(c2 - g2) / 2, -(h3 - p2) / 2), l3 = e2.scroll[i2] + o3;
        l3 < 0 && (l3 = l3 % n3 + n3), l3 > n3 && (l3 %= n3);
        var v2 = e2.displacement([u2 * i2, l3, u2, c2], [l3, f2 * i2, h3, f2]), y2 = v2[0], m2 = v2[1], w2 = v2[2], b2 = v2[3], k2 = e2.displacement([s2 + p2 * i2, a2, u2, c2], [s2, a2 + g2 * i2, h3, f2]), S2 = k2[0], C2 = k2[1], z2 = k2[2], x2 = k2[3];
        e2.drawImage(r2, e2._offscreenCanvas, y2, m2, w2, b2, S2, C2, z2, x2);
      });
    }
  }, e.prototype.carveOnGunwaleOfAMovingBoat = function() {
    var t2 = this, e2 = this, i = e2._defaultConfig, n2 = e2.prizeFlag, r2 = e2.cellAndSpacing;
    this.endTime = Date.now(), this.slots.forEach(function(e3, o2) {
      var s2 = e3.order;
      if (s2.length) for (var a2 = e3.speed || i.speed, h3 = e3.direction || i.direction, c2 = s2.findIndex(function(t3) {
        return t3 === n2[o2];
      }), l2 = r2 * s2.length, u2 = t2.stopScroll[o2] = t2.scroll[o2], f2 = 0; ++f2; ) {
        var d2 = r2 * c2 + l2 * f2 * h3 - u2, p2 = T(t2.FPS, u2, d2, i.decelerationTime) - u2;
        if (Math.abs(p2) > a2) {
          t2.endScroll[o2] = d2;
          break;
        }
      }
    });
  }, e.prototype.play = function() {
    var t2, e2;
    0 === this.step && (this.startTime = Date.now(), this.prizeFlag = void 0, this.step = 1, null === (e2 = (t2 = this.config).afterStart) || void 0 === e2 || e2.call(t2), this.run());
  }, e.prototype.stop = function(t2) {
    var e2;
    if (0 !== this.step && 3 !== this.step) {
      if ("number" == typeof t2) this.prizeFlag = new Array(this.slots.length).fill(t2);
      else {
        if (!l(t2, "array")) return this.stop(-1), console.error("stop() 无法识别的参数类型 " + typeof t2);
        if (t2.length !== this.slots.length) return this.stop(-1), console.error("stop([" + t2 + "]) 参数长度的不正确");
        this.prizeFlag = t2;
      }
      (null === (e2 = this.prizeFlag) || void 0 === e2 ? void 0 : e2.includes(-1)) ? (this.prizeFlag = [], this.step = 0) : this.step = 2;
    }
  }, e.prototype.run = function(t2) {
    var e2, i, n2 = this;
    void 0 === t2 && (t2 = 0);
    var r2 = this, o2 = r2.rAF, s2 = r2.step, a2 = r2.prizeFlag, h3 = r2._defaultConfig, c2 = r2.cellAndSpacing, l2 = r2.slots, u2 = h3.accelerationTime, f2 = h3.decelerationTime;
    if (0 !== this.step || (null == a2 ? void 0 : a2.length) !== l2.length) {
      if (void 0 === a2 || a2.length) {
        3 !== this.step || this.endScroll.length || this.carveOnGunwaleOfAMovingBoat();
        var d2 = Date.now() - this.startTime, p2 = Date.now() - this.endTime;
        l2.forEach(function(e3, i2) {
          var r3 = e3.order;
          if (r3 && r3.length) {
            var o3 = c2 * r3.length, g3 = Math.abs(e3.speed || h3.speed), v3 = e3.direction || h3.direction, y3 = 0, m3 = n2.scroll[i2];
            if (1 === s2 || d2 < u2) {
              n2.FPS = d2 / t2;
              var w2 = O(d2, 0, g3, u2);
              w2 === g3 && (n2.step = 2), y3 = (m3 + w2 * v3) % o3;
            } else if (2 === s2) y3 = (m3 + g3 * v3) % o3, (null == a2 ? void 0 : a2.length) === l2.length && (n2.step = 3, n2.stopScroll = [], n2.endScroll = []);
            else if (3 === s2 && p2) {
              var b2 = n2.stopScroll[i2], k2 = n2.endScroll[i2];
              y3 = T(p2, b2, k2, f2), p2 >= f2 && (n2.step = 0);
            }
            n2.scroll[i2] = y3;
          }
        }), this.draw(), o2(this.run.bind(this, t2 + 1));
      }
    } else {
      for (var g2 = a2[0], v2 = 0; v2 < l2.length; v2++) {
        var y2 = l2[v2], m2 = a2[v2];
        if (!(null === (e2 = y2.order) || void 0 === e2 ? void 0 : e2.includes(m2)) || g2 !== m2) {
          g2 = -1;
          break;
        }
      }
      null === (i = this.endCallback) || void 0 === i || i.call(this, this.prizes.find(function(t3, e3) {
        return e3 === g2;
      }) || void 0);
    }
  }, e.prototype.displacement = function(t2, e2) {
    return "horizontal" === this._defaultConfig.mode ? e2 : t2;
  }, e.prototype.displacementWidthOrHeight = function() {
    var t2 = this._defaultConfig.mode, e2 = this.slots.length, i = this._defaultConfig, n2 = i.colSpacing, r2 = i.rowSpacing, o2 = this.prizeArea || this.drawBlocks();
    o2.x, o2.y;
    var s2, a2, h3 = o2.w, c2 = o2.h, l2 = 0, u2 = 0;
    return "horizontal" === t2 ? (u2 = this.cellHeight = (c2 - r2 * (e2 - 1)) / e2, l2 = this.cellWidth = u2) : (l2 = this.cellWidth = (h3 - n2 * (e2 - 1)) / e2, u2 = this.cellHeight = l2), s2 = this.widthAndSpacing = this.cellWidth + n2, a2 = this.heightAndSpacing = this.cellHeight + r2, this.cellAndSpacing = "horizontal" === t2 ? s2 : a2, { cellWidth: l2, cellHeight: u2, widthAndSpacing: s2, heightAndSpacing: a2 };
  }, e;
}($);
var P = function(i, r2, o2) {
  if (void 0 === r2 && (r2 = {}), isVue2) return h(i, r2, o2);
  var s2 = r2.props, a2 = r2.domProps, h3 = r2.on, c2 = function(t, e) {
    var i2 = {};
    for (var n2 in t) Object.prototype.hasOwnProperty.call(t, n2) && e.indexOf(n2) < 0 && (i2[n2] = t[n2]);
    if (null != t && "function" == typeof Object.getOwnPropertySymbols) {
      var r3 = 0;
      for (n2 = Object.getOwnPropertySymbols(t); r3 < n2.length; r3++) e.indexOf(n2[r3]) < 0 && Object.prototype.propertyIsEnumerable.call(t, n2[r3]) && (i2[n2[r3]] = t[n2[r3]]);
    }
    return i2;
  }(r2, ["props", "domProps", "on"]), l2 = function(t) {
    return t ? Object.entries(t).reduce(function(t2, e) {
      var i2, r3 = e[0], o3 = e[1];
      return r3 = "on" + (r3 = r3.charAt(0).toUpperCase() + r3.slice(1)), n(n({}, t2), ((i2 = {})[r3] = o3, i2));
    }, {}) : null;
  }(h3), u2 = n(n(n(n({}, c2), s2), a2), l2);
  return h(i, u2, o2);
};
var F = "@lucky-canvas/vue";
var R = defineComponent({ name: "LuckyWheel", props: { width: { type: [String, Number] }, height: { type: [String, Number] }, blocks: { type: Array, default: function() {
  return [];
} }, prizes: { type: Array, default: function() {
  return [];
} }, buttons: { type: Array, default: function() {
  return [];
} }, defaultStyle: { type: Object, default: function() {
  return {};
} }, defaultConfig: { type: Object, default: function() {
  return {};
} } }, emits: ["start", "end", "success", "error", "finally"], watch: { blocks: function(t, e) {
  this.lucky && (this.lucky.blocks = t);
}, prizes: function(t, e) {
  this.lucky && (this.lucky.prizes = t);
}, buttons: function(t, e) {
  this.lucky && (this.lucky.buttons = t);
} }, data: function() {
  return { lucky: null };
}, mounted: function() {
  this.$refs.myLucky && this.$refs.myLucky.setAttribute("package", F + "@0.1.11");
  try {
    this.initLucky(), this.$emit("success");
  } catch (t) {
    this.$emit("error", t);
  } finally {
    this.$emit("finally");
  }
}, methods: { initLucky: function() {
  var t = this;
  this.lucky = new E({ flag: "WEB", width: String(this.width), height: String(this.height), divElement: this.$refs.myLucky, rAF: window.requestAnimationFrame, setTimeout: window.setTimeout, setInterval: window.setInterval, clearTimeout: window.clearTimeout, clearInterval: window.clearInterval }, n(n({}, this.$props), { start: function(e) {
    t.$emit("start", e);
  }, end: function(e) {
    t.$emit("end", e);
  } }));
}, init: function() {
  this.lucky && this.lucky.init();
}, play: function() {
  var t;
  null === (t = this.lucky) || void 0 === t || t.play();
}, stop: function(t) {
  var e;
  null === (e = this.lucky) || void 0 === e || e.stop(t);
} }, render: function() {
  return P("div", { ref: "myLucky" });
} });
var D = defineComponent({ name: "LuckyGrid", props: { width: { type: [String, Number] }, height: { type: [String, Number] }, cols: { type: [String, Number], default: 3 }, rows: { type: [String, Number], default: 3 }, blocks: { type: Array, default: function() {
  return [];
} }, prizes: { type: Array, default: function() {
  return [];
} }, buttons: { type: Array, default: function() {
  return [];
} }, button: { type: Object }, defaultStyle: { type: Object, default: function() {
  return {};
} }, activeStyle: { type: Object, default: function() {
  return {};
} }, defaultConfig: { type: Object, default: function() {
  return {};
} } }, emits: ["start", "end", "success", "error", "finally"], watch: { cols: function(t, e) {
  this.lucky && (this.lucky.cols = t);
}, rows: function(t, e) {
  this.lucky && (this.lucky.rows = t);
}, blocks: function(t, e) {
  this.lucky && (this.lucky.blocks = t);
}, prizes: function(t, e) {
  this.lucky && (this.lucky.prizes = t);
}, buttons: function(t, e) {
  this.lucky && (this.lucky.buttons = t);
}, button: function(t, e) {
  this.lucky && (this.lucky.button = t);
} }, data: function() {
  return { lucky: null };
}, mounted: function() {
  this.$refs.myLucky && this.$refs.myLucky.setAttribute("package", F + "@0.1.11");
  try {
    this.initLucky(), this.$emit("success");
  } catch (t) {
    this.$emit("error", t);
  } finally {
    this.$emit("finally");
  }
}, methods: { initLucky: function() {
  var t = this;
  this.lucky = new W({ flag: "WEB", width: String(this.width), height: String(this.height), divElement: this.$refs.myLucky, rAF: window.requestAnimationFrame, setTimeout: window.setTimeout, setInterval: window.setInterval, clearTimeout: window.clearTimeout, clearInterval: window.clearInterval }, n(n({}, this.$props), { start: function(e, i) {
    t.$emit("start", e, i);
  }, end: function(e) {
    t.$emit("end", e);
  } }));
}, init: function() {
  this.lucky && this.lucky.init();
}, play: function() {
  var t;
  null === (t = this.lucky) || void 0 === t || t.play();
}, stop: function(t) {
  var e;
  null === (e = this.lucky) || void 0 === e || e.stop(t);
} }, render: function() {
  return P("div", { ref: "myLucky" });
} });
var H = defineComponent({ name: "SlotMachine", props: { width: { type: [String, Number] }, height: { type: [String, Number] }, blocks: { type: Array, default: function() {
  return [];
} }, prizes: { type: Array, default: function() {
  return [];
} }, slots: { type: Array, default: function() {
  return [];
} }, defaultStyle: { type: Object, default: function() {
  return {};
} }, defaultConfig: { type: Object, default: function() {
  return {};
} } }, watch: { blocks: function(t, e) {
  this.lucky && (this.lucky.blocks = t);
}, slots: function(t, e) {
  this.lucky && (this.lucky.slots = t);
}, prizes: function(t, e) {
  this.lucky && (this.lucky.prizes = t);
} }, data: function() {
  return { lucky: null };
}, mounted: function() {
  this.$refs.myLucky && this.$refs.myLucky.setAttribute("package", F + "@0.1.11");
  try {
    this.initLucky(), this.$emit("success");
  } catch (t) {
    this.$emit("error", t);
  } finally {
    this.$emit("finally");
  }
}, methods: { initLucky: function() {
  var t = this;
  this.lucky = new _({ flag: "WEB", width: String(this.width), height: String(this.height), divElement: this.$refs.myLucky, rAF: window.requestAnimationFrame, setTimeout: window.setTimeout, setInterval: window.setInterval, clearTimeout: window.clearTimeout, clearInterval: window.clearInterval }, n(n({}, this.$props), { start: function(e) {
    t.$emit("start", e);
  }, end: function(e) {
    t.$emit("end", e);
  } }));
}, init: function() {
  this.lucky && this.lucky.init();
}, play: function() {
  var t;
  null === (t = this.lucky) || void 0 === t || t.play();
}, stop: function(t) {
  var e;
  null === (e = this.lucky) || void 0 === e || e.stop(t);
} }, render: function() {
  return P("div", { ref: "myLucky" });
} });
var M = function(t) {
  t.component("LuckyWheel", R), t.component("LuckyGrid", D), t.component("SlotMachine", H);
};
"undefined" != typeof window && window.Vue && isVue2 && M(window.Vue);
var j = { install: M };
export {
  D as LuckyGrid,
  R as LuckyWheel,
  H as SlotMachine,
  j as default,
  M as install
};
/*! Bundled license information:

@lucky-canvas/vue/dist/index.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=@lucky-canvas_vue.js.map
