import { renderless, api } from '@opentiny/vue-renderless/mind-map/vue';
import { defineComponent, props, setup } from '@opentiny/vue-common';
import { openBlock, createElementBlock } from 'vue';

function _createForOfIteratorHelperLoose$1(r, e) {
  var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
  if (t)
    return (t = t.call(r)).next.bind(t);
  if (Array.isArray(r) || (t = _unsupportedIterableToArray$1(r)) || e && r && "number" == typeof r.length) {
    t && (r = t);
    var o = 0;
    return function() {
      return o >= r.length ? { done: true } : { done: false, value: r[o++] };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray$1(r, a) {
  if (r) {
    if ("string" == typeof r)
      return _arrayLikeToArray$1(r, a);
    var t = {}.toString.call(r).slice(8, -1);
    return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray$1(r, a) : void 0;
  }
}
function _arrayLikeToArray$1(r, a) {
  (null == a || a > r.length) && (a = r.length);
  for (var e = 0, n = Array(a); e < a; e++)
    n[e] = r[e];
  return n;
}
var _export_sfc = function _export_sfc2(sfc, props) {
  var target = sfc.__vccOpts || sfc;
  for (var _iterator = _createForOfIteratorHelperLoose$1(props), _step; !(_step = _iterator()).done; ) {
    var _step$value = _step.value, key = _step$value[0], val = _step$value[1];
    target[key] = val;
  }
  return target;
};

function _assertThisInitialized(e) {
  if (void 0 === e)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e;
}
function _inheritsLoose(t, o) {
  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o);
}
function _setPrototypeOf(t, e) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t2, e2) {
    return t2.__proto__ = e2, t2;
  }, _setPrototypeOf(t, e);
}
function _regeneratorRuntime() {
  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
  _regeneratorRuntime = function _regeneratorRuntime2() {
    return e;
  };
  var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function(t2, e2, r2) {
    t2[e2] = r2.value;
  }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag";
  function define(t2, e2, r2) {
    return Object.defineProperty(t2, e2, { value: r2, enumerable: true, configurable: true, writable: true }), t2[e2];
  }
  try {
    define({}, "");
  } catch (t2) {
    define = function define2(t3, e2, r2) {
      return t3[e2] = r2;
    };
  }
  function wrap(t2, e2, r2, n2) {
    var i2 = e2 && e2.prototype instanceof Generator ? e2 : Generator, a2 = Object.create(i2.prototype), c2 = new Context(n2 || []);
    return o(a2, "_invoke", { value: makeInvokeMethod(t2, r2, c2) }), a2;
  }
  function tryCatch(t2, e2, r2) {
    try {
      return { type: "normal", arg: t2.call(e2, r2) };
    } catch (t3) {
      return { type: "throw", arg: t3 };
    }
  }
  e.wrap = wrap;
  var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {};
  function Generator() {
  }
  function GeneratorFunction() {
  }
  function GeneratorFunctionPrototype() {
  }
  var p = {};
  define(p, a, function() {
    return this;
  });
  var d = Object.getPrototypeOf, v = d && d(d(values([])));
  v && v !== r && n.call(v, a) && (p = v);
  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);
  function defineIteratorMethods(t2) {
    ["next", "throw", "return"].forEach(function(e2) {
      define(t2, e2, function(t3) {
        return this._invoke(e2, t3);
      });
    });
  }
  function AsyncIterator(t2, e2) {
    function invoke(r3, o2, i2, a2) {
      var c2 = tryCatch(t2[r3], t2, o2);
      if ("throw" !== c2.type) {
        var u2 = c2.arg, h2 = u2.value;
        return h2 && "object" == typeof h2 && n.call(h2, "__await") ? e2.resolve(h2.__await).then(function(t3) {
          invoke("next", t3, i2, a2);
        }, function(t3) {
          invoke("throw", t3, i2, a2);
        }) : e2.resolve(h2).then(function(t3) {
          u2.value = t3, i2(u2);
        }, function(t3) {
          return invoke("throw", t3, i2, a2);
        });
      }
      a2(c2.arg);
    }
    var r2;
    o(this, "_invoke", { value: function value(t3, n2) {
      function callInvokeWithMethodAndArg() {
        return new e2(function(e3, r3) {
          invoke(t3, n2, e3, r3);
        });
      }
      return r2 = r2 ? r2.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
    } });
  }
  function makeInvokeMethod(e2, r2, n2) {
    var o2 = h;
    return function(i2, a2) {
      if (o2 === f)
        throw Error("Generator is already running");
      if (o2 === s) {
        if ("throw" === i2)
          throw a2;
        return { value: t, done: true };
      }
      for (n2.method = i2, n2.arg = a2; ; ) {
        var c2 = n2.delegate;
        if (c2) {
          var u2 = maybeInvokeDelegate(c2, n2);
          if (u2) {
            if (u2 === y)
              continue;
            return u2;
          }
        }
        if ("next" === n2.method)
          n2.sent = n2._sent = n2.arg;
        else if ("throw" === n2.method) {
          if (o2 === h)
            throw o2 = s, n2.arg;
          n2.dispatchException(n2.arg);
        } else
          "return" === n2.method && n2.abrupt("return", n2.arg);
        o2 = f;
        var p2 = tryCatch(e2, r2, n2);
        if ("normal" === p2.type) {
          if (o2 = n2.done ? s : l, p2.arg === y)
            continue;
          return { value: p2.arg, done: n2.done };
        }
        "throw" === p2.type && (o2 = s, n2.method = "throw", n2.arg = p2.arg);
      }
    };
  }
  function maybeInvokeDelegate(e2, r2) {
    var n2 = r2.method, o2 = e2.iterator[n2];
    if (o2 === t)
      return r2.delegate = null, "throw" === n2 && e2.iterator.return && (r2.method = "return", r2.arg = t, maybeInvokeDelegate(e2, r2), "throw" === r2.method) || "return" !== n2 && (r2.method = "throw", r2.arg = new TypeError("The iterator does not provide a '" + n2 + "' method")), y;
    var i2 = tryCatch(o2, e2.iterator, r2.arg);
    if ("throw" === i2.type)
      return r2.method = "throw", r2.arg = i2.arg, r2.delegate = null, y;
    var a2 = i2.arg;
    return a2 ? a2.done ? (r2[e2.resultName] = a2.value, r2.next = e2.nextLoc, "return" !== r2.method && (r2.method = "next", r2.arg = t), r2.delegate = null, y) : a2 : (r2.method = "throw", r2.arg = new TypeError("iterator result is not an object"), r2.delegate = null, y);
  }
  function pushTryEntry(t2) {
    var e2 = { tryLoc: t2[0] };
    1 in t2 && (e2.catchLoc = t2[1]), 2 in t2 && (e2.finallyLoc = t2[2], e2.afterLoc = t2[3]), this.tryEntries.push(e2);
  }
  function resetTryEntry(t2) {
    var e2 = t2.completion || {};
    e2.type = "normal", delete e2.arg, t2.completion = e2;
  }
  function Context(t2) {
    this.tryEntries = [{ tryLoc: "root" }], t2.forEach(pushTryEntry, this), this.reset(true);
  }
  function values(e2) {
    if (e2 || "" === e2) {
      var r2 = e2[a];
      if (r2)
        return r2.call(e2);
      if ("function" == typeof e2.next)
        return e2;
      if (!isNaN(e2.length)) {
        var o2 = -1, i2 = function next() {
          for (; ++o2 < e2.length; )
            if (n.call(e2, o2))
              return next.value = e2[o2], next.done = false, next;
          return next.value = t, next.done = true, next;
        };
        return i2.next = i2;
      }
    }
    throw new TypeError(typeof e2 + " is not iterable");
  }
  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: true }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: true }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function(t2) {
    var e2 = "function" == typeof t2 && t2.constructor;
    return !!e2 && (e2 === GeneratorFunction || "GeneratorFunction" === (e2.displayName || e2.name));
  }, e.mark = function(t2) {
    return Object.setPrototypeOf ? Object.setPrototypeOf(t2, GeneratorFunctionPrototype) : (t2.__proto__ = GeneratorFunctionPrototype, define(t2, u, "GeneratorFunction")), t2.prototype = Object.create(g), t2;
  }, e.awrap = function(t2) {
    return { __await: t2 };
  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function() {
    return this;
  }), e.AsyncIterator = AsyncIterator, e.async = function(t2, r2, n2, o2, i2) {
    void 0 === i2 && (i2 = Promise);
    var a2 = new AsyncIterator(wrap(t2, r2, n2, o2), i2);
    return e.isGeneratorFunction(r2) ? a2 : a2.next().then(function(t3) {
      return t3.done ? t3.value : a2.next();
    });
  }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function() {
    return this;
  }), define(g, "toString", function() {
    return "[object Generator]";
  }), e.keys = function(t2) {
    var e2 = Object(t2), r2 = [];
    for (var n2 in e2)
      r2.push(n2);
    return r2.reverse(), function next() {
      for (; r2.length; ) {
        var t3 = r2.pop();
        if (t3 in e2)
          return next.value = t3, next.done = false, next;
      }
      return next.done = true, next;
    };
  }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e2) {
    if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = false, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e2)
      for (var r2 in this)
        "t" === r2.charAt(0) && n.call(this, r2) && !isNaN(+r2.slice(1)) && (this[r2] = t);
  }, stop: function stop() {
    this.done = true;
    var t2 = this.tryEntries[0].completion;
    if ("throw" === t2.type)
      throw t2.arg;
    return this.rval;
  }, dispatchException: function dispatchException(e2) {
    if (this.done)
      throw e2;
    var r2 = this;
    function handle(n2, o3) {
      return a2.type = "throw", a2.arg = e2, r2.next = n2, o3 && (r2.method = "next", r2.arg = t), !!o3;
    }
    for (var o2 = this.tryEntries.length - 1; o2 >= 0; --o2) {
      var i2 = this.tryEntries[o2], a2 = i2.completion;
      if ("root" === i2.tryLoc)
        return handle("end");
      if (i2.tryLoc <= this.prev) {
        var c2 = n.call(i2, "catchLoc"), u2 = n.call(i2, "finallyLoc");
        if (c2 && u2) {
          if (this.prev < i2.catchLoc)
            return handle(i2.catchLoc, true);
          if (this.prev < i2.finallyLoc)
            return handle(i2.finallyLoc);
        } else if (c2) {
          if (this.prev < i2.catchLoc)
            return handle(i2.catchLoc, true);
        } else {
          if (!u2)
            throw Error("try statement without catch or finally");
          if (this.prev < i2.finallyLoc)
            return handle(i2.finallyLoc);
        }
      }
    }
  }, abrupt: function abrupt(t2, e2) {
    for (var r2 = this.tryEntries.length - 1; r2 >= 0; --r2) {
      var o2 = this.tryEntries[r2];
      if (o2.tryLoc <= this.prev && n.call(o2, "finallyLoc") && this.prev < o2.finallyLoc) {
        var i2 = o2;
        break;
      }
    }
    i2 && ("break" === t2 || "continue" === t2) && i2.tryLoc <= e2 && e2 <= i2.finallyLoc && (i2 = null);
    var a2 = i2 ? i2.completion : {};
    return a2.type = t2, a2.arg = e2, i2 ? (this.method = "next", this.next = i2.finallyLoc, y) : this.complete(a2);
  }, complete: function complete(t2, e2) {
    if ("throw" === t2.type)
      throw t2.arg;
    return "break" === t2.type || "continue" === t2.type ? this.next = t2.arg : "return" === t2.type ? (this.rval = this.arg = t2.arg, this.method = "return", this.next = "end") : "normal" === t2.type && e2 && (this.next = e2), y;
  }, finish: function finish(t2) {
    for (var e2 = this.tryEntries.length - 1; e2 >= 0; --e2) {
      var r2 = this.tryEntries[e2];
      if (r2.finallyLoc === t2)
        return this.complete(r2.completion, r2.afterLoc), resetTryEntry(r2), y;
    }
  }, catch: function _catch(t2) {
    for (var e2 = this.tryEntries.length - 1; e2 >= 0; --e2) {
      var r2 = this.tryEntries[e2];
      if (r2.tryLoc === t2) {
        var n2 = r2.completion;
        if ("throw" === n2.type) {
          var o2 = n2.arg;
          resetTryEntry(r2);
        }
        return o2;
      }
    }
    throw Error("illegal catch attempt");
  }, delegateYield: function delegateYield(e2, r2, n2) {
    return this.delegate = { iterator: values(e2), resultName: r2, nextLoc: n2 }, "next" === this.method && (this.arg = t), y;
  } }, e;
}
function asyncGeneratorStep(n, t, e, r, o, a, c) {
  try {
    var i = n[a](c), u = i.value;
  } catch (n2) {
    return void e(n2);
  }
  i.done ? t(u) : Promise.resolve(u).then(r, o);
}
function _asyncToGenerator(n) {
  return function() {
    var t = this, e = arguments;
    return new Promise(function(r, o) {
      var a = n.apply(t, e);
      function _next(n2) {
        asyncGeneratorStep(a, r, o, _next, _throw, "next", n2);
      }
      function _throw(n2) {
        asyncGeneratorStep(a, r, o, _next, _throw, "throw", n2);
      }
      _next(void 0);
    });
  };
}
function _createForOfIteratorHelperLoose(r, e) {
  var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
  if (t)
    return (t = t.call(r)).next.bind(t);
  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) {
    t && (r = t);
    var o = 0;
    return function() {
      return o >= r.length ? { done: true } : { done: false, value: r[o++] };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray(r, a) {
  if (r) {
    if ("string" == typeof r)
      return _arrayLikeToArray(r, a);
    var t = {}.toString.call(r).slice(8, -1);
    return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;
  }
}
function _arrayLikeToArray(r, a) {
  (null == a || a > r.length) && (a = r.length);
  for (var e = 0, n = Array(a); e < a; e++)
    n[e] = r[e];
  return n;
}
function _extends() {
  return _extends = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r in t)
        ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
    }
    return n;
  }, _extends.apply(null, arguments);
}
(function() {
  try {
    if (typeof document < "u") {
      var i = document.createElement("style");
      i.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;line-height:1.2em;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:20px 65px}.map-container me-main>me-wrapper>me-parent{margin:var(--gap);padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px var(--gap)}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px var(--gap)}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding);line-height:1.2em}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>div,.map-container me-tpc>span,.map-container me-tpc>img{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")), document.head.appendChild(i);
    }
  } catch (e) {
    console.error("vite-plugin-css-injected-by-js", e);
  }
})();
(function(e) {
  var t, _n22, o, i, s, _r, l = '<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>', c = (c = document.getElementsByTagName("script"))[c.length - 1].getAttribute("data-injectcss");
  if (c && !e.__iconfont__svg__cssinject__) {
    e.__iconfont__svg__cssinject__ = true;
    try {
      document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>");
    } catch (a) {
      console && console.log(a);
    }
  }
  function h() {
    s || (s = true, o());
  }
  t = function t2() {
    var a, u, d, p;
    (p = document.createElement("div")).innerHTML = l, l = null, (d = p.getElementsByTagName("svg")[0]) && (d.setAttribute("aria-hidden", "true"), d.style.position = "absolute", d.style.width = 0, d.style.height = 0, d.style.overflow = "hidden", a = d, (u = document.body).firstChild ? (p = a, (d = u.firstChild).parentNode.insertBefore(p, d)) : u.appendChild(a));
  }, document.addEventListener ? ~["complete", "loaded", "interactive"].indexOf(document.readyState) ? setTimeout(t, 0) : (_n22 = function n() {
    document.removeEventListener("DOMContentLoaded", _n22, false), t();
  }, document.addEventListener("DOMContentLoaded", _n22, false)) : document.attachEvent && (o = t, i = e.document, s = false, (_r = function r() {
    try {
      i.documentElement.doScroll("left");
    } catch (_unused) {
      return void setTimeout(_r, 50);
    }
    h();
  })(), i.onreadystatechange = function() {
    i.readyState == "complete" && (i.onreadystatechange = null, h());
  });
})(window);
var L = 0, z = 1, X = 2, T = 30, M = 8, Le = {
  name: "Latte",
  palette: ["#dd7878", "#ea76cb", "#8839ef", "#e64553", "#fe640b", "#df8e1d", "#40a02b", "#209fb5", "#1e66f5", "#7287fd"],
  cssVar: {
    "--main-color": "#444446",
    "--main-bgcolor": "#ffffff",
    "--color": "#777777",
    "--bgcolor": "#f6f6f6",
    "--panel-color": "#444446",
    "--panel-bgcolor": "#ffffff",
    "--panel-border-color": "#eaeaea"
  }
}, Me = {
  name: "Dark",
  palette: ["#848FA0", "#748BE9", "#D2F9FE", "#4145A5", "#789AFA", "#706CF4", "#EF987F", "#775DD5", "#FCEECF", "#DA7FBC"],
  cssVar: {
    "--main-color": "#ffffff",
    "--main-bgcolor": "#4c4f69",
    "--color": "#cccccc",
    "--bgcolor": "#252526",
    "--panel-color": "#ffffff",
    "--panel-bgcolor": "#2d3748",
    "--panel-border-color": "#696969"
  }
};
function ne(e) {
  return e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/"/g, "&quot;");
}
var Ye = function Ye2() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}, _oe = function oe(e, t) {
  if (t.id === e)
    return t;
  if (t.children && t.children.length) {
    for (var n = 0; n < t.children.length; n++) {
      var o = _oe(e, t.children[n]);
      if (o)
        return o;
    }
    return null;
  } else
    return null;
}, _$ = function $(e, t) {
  if (e.parent = t, e.children)
    for (var n = 0; n < e.children.length; n++)
      _$(e.children[n], e);
};
function Te(e) {
  if (e.id = J(), e.children)
    for (var t = 0; t < e.children.length; t++)
      Te(e.children[t]);
}
var Ge = function Ge2(e, t) {
  var n = Date.now();
  return function() {
    Date.now() - n >= t && (e.apply(void 0, arguments), n = Date.now());
  };
};
function $e(e, t, n, o) {
  var i = o - t, s = e - n;
  var r = Math.atan(Math.abs(i) / Math.abs(s)) / 3.14 * 180;
  s < 0 && i > 0 && (r = 180 - r), s < 0 && i < 0 && (r = 180 + r), s > 0 && i < 0 && (r = 360 - r);
  var l = 15, c = 30, h = r + c, a = r - c;
  return {
    x1: n + Math.cos(Math.PI * h / 180) * l,
    y1: o - Math.sin(Math.PI * h / 180) * l,
    x2: n + Math.cos(Math.PI * a / 180) * l,
    y2: o - Math.sin(Math.PI * a / 180) * l
  };
}
function J() {
  return ((/* @__PURE__ */ new Date()).getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);
}
var Xe = function Xe2() {
  var e = J();
  return {
    topic: this.newTopicName,
    id: e
  };
};
function Je(e, t) {
  var n = true;
  for (; t.parent; ) {
    if (t.parent === e) {
      n = false;
      break;
    }
    t = t.parent;
  }
  return n;
}
function De(e) {
  return JSON.parse(JSON.stringify(e, function(n, o) {
    if (n !== "parent")
      return o;
  }));
}
var K = function K2(e, t) {
  var n = 0, o = 0;
  for (; t && t !== e; )
    n += t.offsetLeft, o += t.offsetTop, t = t.offsetParent;
  return {
    offsetLeft: n,
    offsetTop: o
  };
}, C = function C2(e, t) {
  for (var n in t)
    e.setAttribute(n, t[n]);
}, ae = function ae2(e) {
  return e ? e.tagName === "ME-TPC" : false;
}, S = {
  moved: false,
  // diffrentiate click and move
  mousedown: false,
  onMove: function onMove(e, t) {
    if (this.mousedown) {
      this.moved = true;
      var n = e.movementX, o = e.movementY;
      t.scrollTo(t.scrollLeft - n, t.scrollTop - o);
    }
  },
  clear: function clear() {
    this.moved = false, this.mousedown = false;
  }
};
function Qe(e) {
  e.map.addEventListener("click", function(t) {
    var o, i;
    if (t.button !== 0)
      return;
    if ((o = e.helper1) != null && o.moved) {
      e.helper1.clear();
      return;
    }
    if ((i = e.helper2) != null && i.moved) {
      e.helper2.clear();
      return;
    }
    if (S.moved) {
      S.clear();
      return;
    }
    e.unselectNode(), e.unselectNodes(), e.unselectSummary(), e.unselectLink();
    var n = t.target;
    if (n.tagName === "ME-EPD")
      e.expandNode(n.previousSibling);
    else if (e.editable)
      ae(n) ? e.selectNode(n, false, t) : n.tagName === "text" ? n.dataset.type === "custom-link" ? e.selectLink(n.parentElement) : e.selectSummary(n.parentElement) : n.className === "circle" || e.hideLinkController && e.hideLinkController();
    else
      return;
  }), e.map.addEventListener("dblclick", function(t) {
    if (t.preventDefault(), !e.editable)
      return;
    var n = t.target;
    ae(n) ? e.beginEdit(n) : n.tagName === "text" && (n.dataset.type === "custom-link" ? e.editCutsomLinkLabel(n.parentElement) : e.editSummary(n.parentElement));
  }), e.map.addEventListener("mousemove", function(t) {
    t.target.contentEditable !== "true" && S.onMove(t, e.container);
  }), e.map.addEventListener("mousedown", function(t) {
    var n = e.mouseSelectionButton === 0 ? 2 : 0;
    t.button === n && t.target.contentEditable !== "true" && (S.moved = false, S.mousedown = true);
  }), e.map.addEventListener("mouseleave", function(t) {
    var n = e.mouseSelectionButton === 0 ? 2 : 0;
    t.button === n && S.clear();
  }), e.map.addEventListener("mouseup", function(t) {
    var n = e.mouseSelectionButton === 0 ? 2 : 0;
    t.button === n && S.clear();
  }), e.map.addEventListener("contextmenu", function(t) {
    t.preventDefault();
  });
}
var Ze = {
  create: function create() {
    return {
      handlers: {},
      showHandler: function showHandler() {
        console.log(this.handlers);
      },
      addListener: function addListener(e, t) {
        this.handlers[e] === void 0 && (this.handlers[e] = []), this.handlers[e].push(t);
      },
      fire: function fire(e) {
        if (this.handlers[e] instanceof Array) {
          var n = this.handlers[e];
          for (var _len = arguments.length, t = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            t[_key - 1] = arguments[_key];
          }
          for (var o = 0; o < n.length; o++)
            n[o].apply(n, t);
        }
      },
      removeListener: function removeListener(e, t) {
        if (!this.handlers[e])
          return;
        var n = this.handlers[e];
        if (!t)
          n.length = 0;
        else if (n.length)
          for (var o = 0; o < n.length; o++)
            n[o] === t && this.handlers[e].splice(o, 1);
      }
    };
  }
}, ie = document, et = function et2() {
  console.time("layout"), this.nodes.innerHTML = "";
  var e = this.createTopic(this.nodeData);
  ue(e, this.nodeData), e.draggable = false;
  var t = ie.createElement("me-root");
  t.appendChild(e);
  var n = this.nodeData.children || [];
  if (this.direction === X) {
    var o = 0, i = 0;
    n.map(function(s) {
      s.direction === L ? o += 1 : s.direction === z ? i += 1 : o <= i ? (s.direction = L, o += 1) : (s.direction = z, i += 1);
    });
  }
  tt(this, n, t), console.timeEnd("layout");
}, tt = function tt2(e, t, n) {
  var o = ie.createElement("me-main");
  o.className = "lhs";
  var i = ie.createElement("me-main");
  i.className = "rhs";
  for (var s = 0; s < t.length; s++) {
    var r = t[s], _e$createWrapper = e.createWrapper(r), l = _e$createWrapper.grp;
    e.direction === X ? r.direction === L ? o.appendChild(l) : i.appendChild(l) : e.direction === L ? o.appendChild(l) : i.appendChild(l);
  }
  e.nodes.appendChild(o), e.nodes.appendChild(n), e.nodes.appendChild(i), e.nodes.appendChild(e.lines);
}, nt = function nt2(e, t) {
  var n = ie.createElement("me-children");
  for (var o = 0; o < t.length; o++) {
    var i = t[o], _e$createWrapper2 = e.createWrapper(i), s = _e$createWrapper2.grp;
    n.appendChild(s);
  }
  return n;
}, k = document, N = function N2(e, t) {
  var o = (t ? t.mindElixirBox : k).querySelector("[data-nodeid=me" + e + "]");
  if (!o)
    throw new Error("FindEle: Node " + e + " not found, maybe it's collapsed.");
  return o;
}, ue = function ue2(e, t) {
  if (e.innerHTML = "", t.style && (e.style.color = t.style.color || "", e.style.background = t.style.background || "", e.style.fontSize = t.style.fontSize + "px", e.style.fontWeight = t.style.fontWeight || "normal"), t.branchColor && (e.style.borderColor = t.branchColor), t.image) {
    var n = t.image;
    if (n.url && n.width && n.height) {
      var o = k.createElement("img");
      o.src = n.url, o.style.width = n.width + "px", o.style.height = n.height + "px", e.appendChild(o), e.image = o;
    } else
      console.warn("image url/width/height are required");
  } else
    e.image && (e.image = void 0);
  {
    var _n3 = k.createElement("span");
    _n3.className = "text", _n3.textContent = t.topic, e.appendChild(_n3), e.text = _n3;
  }
  if (t.hyperLink) {
    var _n4 = k.createElement("a");
    _n4.className = "hyper-link", _n4.target = "_blank", _n4.innerText = "🔗", _n4.href = t.hyperLink, e.appendChild(_n4), e.linkContainer = _n4;
  } else
    e.linkContainer && (e.linkContainer = void 0);
  if (t.icons && t.icons.length) {
    var _n5 = k.createElement("span");
    _n5.className = "icons", _n5.innerHTML = t.icons.map(function(o2) {
      return "<span>" + ne(o2) + "</span>";
    }).join(""), e.appendChild(_n5), e.icons = _n5;
  } else
    e.icons && (e.icons = void 0);
  if (t.tags && t.tags.length) {
    var _n6 = k.createElement("div");
    _n6.className = "tags", _n6.innerHTML = t.tags.map(function(o2) {
      return "<span>" + ne(o2) + "</span>";
    }).join(""), e.appendChild(_n6), e.tags = _n6;
  } else
    e.tags && (e.tags = void 0);
}, ot = function ot2(e, t) {
  var n = k.createElement("me-wrapper"), _this$createParent = this.createParent(e), o = _this$createParent.p, i = _this$createParent.tpc;
  if (n.appendChild(o), !t && e.children && e.children.length > 0) {
    var s = re(e.expanded);
    if (o.appendChild(s), e.expanded !== false) {
      var r = nt(this, e.children);
      n.appendChild(r);
    }
  }
  return {
    grp: n,
    top: o,
    tpc: i
  };
}, it = function it2(e) {
  var t = k.createElement("me-parent"), n = this.createTopic(e);
  return ue(n, e), t.appendChild(n), {
    p: t,
    tpc: n
  };
}, st = function st2(e) {
  var t = k.createElement("me-children");
  return t.append.apply(t, e), t;
}, rt = function rt2(e) {
  var t = k.createElement("me-tpc");
  return t.nodeObj = e, t.dataset.nodeid = "me" + e.id, t.draggable = this.draggable, t;
};
function je(e) {
  var t = k.createRange();
  t.selectNodeContents(e);
  var n = window.getSelection();
  n && (n.removeAllRanges(), n.addRange(t));
}
var lt = function lt2(e) {
  var _this = this;
  if (console.time("editTopic"), !e)
    return;
  var t = k.createElement("div"), n = e.text.textContent;
  e.appendChild(t), t.id = "input-box", t.textContent = n, t.contentEditable = "true", t.spellcheck = false, t.style.cssText = "min-width:" + (e.offsetWidth - 8) + "px;", this.direction === L && (t.style.right = "0"), t.focus(), je(t), this.bus.fire("operation", {
    name: "beginEdit",
    obj: e.nodeObj
  }), t.addEventListener("keydown", function(o) {
    o.stopPropagation();
    var i = o.key;
    if (i === "Enter" || i === "Tab") {
      if (o.shiftKey)
        return;
      o.preventDefault(), t == null || t.blur(), _this.map.focus();
    }
  }), t.addEventListener("blur", function() {
    var s;
    if (!t)
      return;
    var o = e.nodeObj, i = ((s = t.textContent) == null ? void 0 : s.trim()) || "";
    console.log(i), i === "" ? o.topic = n : o.topic = i, t.remove(), i !== n && (e.text.textContent = o.topic, _this.linkDiv(), _this.bus.fire("operation", {
      name: "finishEdit",
      obj: o,
      origin: n
    }));
  }), console.timeEnd("editTopic");
}, re = function re2(e) {
  var t = k.createElement("me-epd");
  return t.expanded = e !== false, t.className = e !== false ? "minus" : "", t;
}, q = document, F = "http://www.w3.org/2000/svg", ct = function ct2(e, t) {
  var n = q.createElementNS(F, "path");
  return n.setAttribute("d", e), n.setAttribute("stroke", t || "#666"), n.setAttribute("fill", "none"), n.setAttribute("stroke-width", "3"), n;
}, G = function G2(e) {
  var t = q.createElementNS(F, "svg");
  return t.setAttribute("class", e), t.setAttribute("overflow", "visible"), t;
}, pe = function pe2() {
  var e = q.createElementNS(F, "line");
  return e.setAttribute("stroke", "#bbb"), e.setAttribute("fill", "none"), e.setAttribute("stroke-width", "2"), e;
}, at = function at2(e, t) {
  var n = q.createElementNS(F, "path");
  return n.setAttribute("d", e), n.setAttribute("stroke", t || "#555"), n.setAttribute("fill", "none"), n.setAttribute("stroke-linecap", "square"), n.setAttribute("stroke-width", "2"), n;
}, dt = function dt2(e, t) {
  var n = {
    stroke: "rgb(235, 95, 82)",
    fill: "none",
    "stroke-linecap": "cap",
    "stroke-width": "2"
  }, o = q.createElementNS(F, "g"), i = q.createElementNS(F, "path"), s = q.createElementNS(F, "path");
  return C(s, _extends({
    d: t
  }, n)), C(i, _extends({
    d: e
  }, n, {
    "stroke-dasharray": "8,2"
  })), o.appendChild(i), o.appendChild(s), o;
}, Oe = function Oe2(e, t, n) {
  if (console.time("editSummary"), !t)
    return;
  var o = document.createElement("div");
  e.nodes.appendChild(o);
  var i = t.innerHTML;
  o.id = "input-box", o.textContent = i, o.contentEditable = "true", o.spellcheck = false;
  var s = t.getAttribute("x") + "px", r = t.getAttribute("y") + "px";
  o.style.cssText = "min-width:" + (100 - 8) + "px;position:absolute;left:" + s + ";top:" + r + ";";
  var l = t.getAttribute("text-anchor");
  l === "end" ? o.style.cssText += "transform: translate(-100%, -100%);" : l === "middle" ? o.style.cssText += "transform: translate(-50%, -100%);" : o.style.cssText += "transform: translate(0, -100%);", o.focus(), je(o), o.addEventListener("keydown", function(c) {
    c.stopPropagation();
    var h = c.key;
    if (h === "Enter" || h === "Tab") {
      if (c.shiftKey)
        return;
      c.preventDefault(), o.blur(), e.map.focus();
    }
  }), o.addEventListener("blur", function() {
    o && n(o);
  }), console.timeEnd("editSummary");
};
var Ae = He;
var ht = function ht2(e) {
  console.time("linkDiv");
  var t = this.map.querySelector("me-root");
  this.nodes.style.top = 1e4 - this.nodes.offsetHeight / 2 + "px", this.nodes.style.left = 1e4 - t.offsetLeft - t.offsetWidth / 2 + "px";
  var n = this.map.querySelectorAll("me-main > me-wrapper");
  this.lines.innerHTML = "", Ae = this.subLinkStyle === 2 ? pt : He;
  for (var o = 0; o < n.length; o++) {
    var i = n[o], s = i.querySelector("me-tpc"), r = i.firstChild, l = i.parentNode.className;
    var c = t.offsetLeft + t.offsetWidth / 2;
    var h = t.offsetTop + t.offsetHeight / 2;
    var a = void 0;
    var u = this.theme.palette, d = s.nodeObj.branchColor || u[o % u.length], _K = K(this.nodes, r), p = _K.offsetLeft, g = _K.offsetTop;
    l === "lhs" ? a = p + r.offsetWidth : a = p;
    var m = g + r.offsetHeight / 2;
    var f = "";
    if (this.mainLinkStyle === 2)
      this.direction === X && (l === "lhs" ? c = c - t.offsetWidth / 6 : c = c + t.offsetWidth / 6), f = ut({
        x1: c,
        y1: h,
        x2: a,
        y2: m
      });
    else {
      var b = (1 - Math.abs(m - i.parentElement.offsetTop - i.parentElement.offsetHeight / 2) / i.parentElement.offsetHeight) * 0.25 * (t.offsetWidth / 2);
      l === "lhs" ? c = c - t.offsetWidth / 10 - b : c = c + t.offsetWidth / 10 + b, f = ft({
        x1: c,
        y1: h,
        x2: a,
        y2: m
      });
    }
    this.lines.appendChild(ct(f, d));
    var v = i.children[0].children[1];
    if (v && (v.style.top = (v.parentNode.offsetHeight - v.offsetHeight) / 2 + "px", l === "lhs" ? v.style.left = "-10px" : v.style.right = "-10px"), !(e && e !== i) && i.childElementCount) {
      var y = G("subLines"), _b = i.lastChild;
      _b.tagName === "svg" && _b.remove(), i.appendChild(y);
      var x = i.firstChild, w = i.children[1].children, _ = _Pe(w, x, l, true);
      y.appendChild(at(_, d));
    }
  }
  this.renderCustomLink(), this.renderSummary(), console.timeEnd("linkDiv");
}, _Pe = function Pe(e, t, n, o) {
  var i = "";
  var s = t.offsetTop, r = t.offsetLeft, l = t.offsetWidth, c = t.offsetHeight;
  for (var h = 0; h < e.length; h++) {
    var a = e[h], u = a.firstChild, d = u.offsetTop, p = u.offsetLeft, g = u.offsetWidth, m = u.offsetHeight;
    i += Ae({
      pT: s,
      pL: r,
      pW: l,
      pH: c,
      cT: d,
      cL: p,
      cW: g,
      cH: m,
      direction: n,
      isFirst: o
    });
    var f = u.children[1];
    if (f) {
      if (f.style.bottom = -(f.offsetHeight / 2) + "px", n === "lhs" ? f.style.left = "10px" : n === "rhs" && (f.style.right = "10px"), !f.expanded)
        continue;
    } else
      continue;
    var v = a.children[1].children;
    v.length > 0 && (i += _Pe(v, u, n));
  }
  return i;
};
function ut(_ref) {
  var e = _ref.x1, t = _ref.y1, n = _ref.x2, o = _ref.y2;
  return "M " + e + " " + t + " V " + (o > t ? o - 20 : o + 20) + " C " + e + " " + o + " " + e + " " + o + " " + (n > e ? e + 20 : e - 20) + " " + o + " H " + n;
}
function ft(_ref2) {
  var e = _ref2.x1, t = _ref2.y1, n = _ref2.x2, o = _ref2.y2;
  return "M " + e + " " + t + " Q " + e + " " + o + " " + n + " " + o;
}
function pt(_ref3) {
  var e = _ref3.pT, t = _ref3.pL, n = _ref3.pW, o = _ref3.pH, i = _ref3.cT, s = _ref3.cL, r = _ref3.cW, l = _ref3.cH, c = _ref3.direction, h = _ref3.isFirst;
  var a;
  h ? a = e + o / 2 : a = e + o;
  var u = i + l;
  var d = 0, p = 0, g = 0;
  return c === "lhs" ? (d = t + T, p = s, g = s + r) : c === "rhs" && (d = t + n - T, p = s + r, g = s), u < a + 50 && u > a - 50 ? "M " + d + " " + a + " H " + g + " V " + u + " H " + p : u >= a ? "M " + d + " " + a + " H " + g + " V " + (u - M) + " A " + M + " " + M + " 0 0 " + (d > p ? 1 : 0) + " " + (d > p ? g - M : g + M) + " " + u + " H " + p : "M " + d + " " + a + " H " + g + " V " + (u + M) + " A " + M + " " + M + " 0 0 " + (d > p ? 0 : 1) + " " + (d > p ? g - M : g + M) + " " + u + " H " + p;
}
function He(_ref4) {
  var e = _ref4.pT, t = _ref4.pL, n = _ref4.pW, o = _ref4.pH, i = _ref4.cT, s = _ref4.cL, r = _ref4.cW, l = _ref4.cH, c = _ref4.direction, h = _ref4.isFirst;
  var a = 0, u = 0;
  h ? a = e + o / 2 : a = e + o;
  var d = i + l;
  var p = 0, g = 0, m = 0;
  var f = Math.min(Math.abs(a - d) / 800, 1.2) * T;
  return c === "lhs" ? (m = t, p = m + T, g = m - T, u = s + T, "M " + p + " " + a + " C " + m + " " + a + " " + (m + f) + " " + d + " " + g + " " + d + " H " + u) : (m = t + n, p = m - T, g = m + T, u = s + r - T, "M " + p + " " + a + " C " + m + " " + a + " " + (m - f) + " " + d + " " + g + " " + d + " H " + u);
}
var me = {
  addChild: "插入子节点",
  addParent: "插入父节点",
  addSibling: "插入同级节点",
  removeNode: "删除节点",
  focus: "专注",
  cancelFocus: "取消专注",
  moveUp: "上移",
  moveDown: "下移",
  link: "连接",
  clickTips: "请点击目标节点",
  summary: "摘要"
}, ge = {
  cn: me,
  zh_CN: me,
  zh_TW: {
    addChild: "插入子節點",
    addParent: "插入父節點",
    addSibling: "插入同級節點",
    removeNode: "刪除節點",
    focus: "專注",
    cancelFocus: "取消專注",
    moveUp: "上移",
    moveDown: "下移",
    link: "連接",
    clickTips: "請點擊目標節點",
    summary: "摘要"
  },
  en: {
    addChild: "Add child",
    addParent: "Add parent",
    addSibling: "Add sibling",
    removeNode: "Remove node",
    focus: "Focus Mode",
    cancelFocus: "Cancel Focus Mode",
    moveUp: "Move up",
    moveDown: "Move down",
    link: "Link",
    clickTips: "Please click the target node",
    summary: "Summary"
  },
  ru: {
    addChild: "Добавить дочерний элемент",
    addParent: "Добавить родительский элемент",
    addSibling: "Добавить на этом уровне",
    removeNode: "Удалить узел",
    focus: "Режим фокусировки",
    cancelFocus: "Отменить режим фокусировки",
    moveUp: "Поднять выше",
    moveDown: "Опустить ниже",
    link: "Ссылка",
    clickTips: "Пожалуйста, нажмите на целевой узел",
    summary: "Описание"
  },
  ja: {
    addChild: "子ノードを追加する",
    addParent: "親ノードを追加します",
    addSibling: "兄弟ノードを追加する",
    removeNode: "ノードを削除",
    focus: "集中",
    cancelFocus: "集中解除",
    moveUp: "上へ移動",
    moveDown: "下へ移動",
    link: "コネクト",
    clickTips: "ターゲットノードをクリックしてください",
    summary: "概要"
  },
  pt: {
    addChild: "Adicionar item filho",
    addParent: "Adicionar item pai",
    addSibling: "Adicionar item irmao",
    removeNode: "Remover item",
    focus: "Modo Foco",
    cancelFocus: "Cancelar Modo Foco",
    moveUp: "Mover para cima",
    moveDown: "Mover para baixo",
    link: "Link",
    clickTips: "Favor clicar no item alvo",
    summary: "Resumo"
  }
};
function mt(e, t) {
  var n = function n2(b2) {
    var x = document.createElement("div");
    return x.innerText = b2, x.className = "tips", x;
  }, o = function o2(b2, x, w) {
    var _ = document.createElement("li");
    return _.id = b2, _.innerHTML = "<span>" + ne(x) + "</span><span>" + ne(w) + "</span>", _;
  }, i = ge[e.locale] ? e.locale : "en", s = ge[i], r = o("cm-add_child", s.addChild, "tab"), l = o("cm-add_parent", s.addParent, ""), c = o("cm-add_sibling", s.addSibling, "enter"), h = o("cm-remove_child", s.removeNode, "delete"), a = o("cm-fucus", s.focus, ""), u = o("cm-unfucus", s.cancelFocus, ""), d = o("cm-up", s.moveUp, "PgUp"), p = o("cm-down", s.moveDown, "Pgdn"), g = o("cm-down", s.link, ""), m = o("cm-down", s.summary, ""), f = document.createElement("ul");
  if (f.className = "menu-list", f.appendChild(r), f.appendChild(l), f.appendChild(c), f.appendChild(h), (!t || t.focus) && (f.appendChild(a), f.appendChild(u)), f.appendChild(d), f.appendChild(p), f.appendChild(m), (!t || t.link) && f.appendChild(g), t && t.extend) {
    var _loop = function _loop2() {
      var x = t.extend[b], w = o(x.name, x.name, x.key || "");
      f.appendChild(w), w.onclick = function(_) {
        x.onclick(_);
      };
    };
    for (var b = 0; b < t.extend.length; b++) {
      _loop();
    }
  }
  var v = document.createElement("div");
  v.className = "context-menu", v.appendChild(f), v.hidden = true, e.container.append(v);
  var y = true;
  e.container.oncontextmenu = function(b2) {
    if (b2.preventDefault(), !e.editable)
      return;
    var x = b2.target;
    if (ae(x)) {
      x.parentElement.tagName === "ME-ROOT" ? y = true : y = false, y ? (a.className = "disabled", d.className = "disabled", p.className = "disabled", l.className = "disabled", c.className = "disabled", h.className = "disabled") : (a.className = "", d.className = "", p.className = "", l.className = "", c.className = "", h.className = ""), e.currentNodes || e.selectNode(x), v.hidden = false, S.mousedown && (S.mousedown = false), f.style.top = "", f.style.bottom = "", f.style.left = "", f.style.right = "";
      var w = f.getBoundingClientRect(), _ = f.offsetHeight, P = f.offsetWidth, U = b2.clientY - w.top, H = b2.clientX - w.left;
      _ + U > window.innerHeight ? (f.style.top = "", f.style.bottom = "0px") : (f.style.bottom = "", f.style.top = U + 15 + "px"), P + H > window.innerWidth ? (f.style.left = "", f.style.right = "0px") : (f.style.right = "", f.style.left = H + 10 + "px");
    }
  }, v.onclick = function(b2) {
    b2.target === v && (v.hidden = true);
  }, r.onclick = function() {
    e.addChild(), v.hidden = true;
  }, l.onclick = function() {
    e.insertParent(), v.hidden = true;
  }, c.onclick = function() {
    y || (e.insertSibling(), v.hidden = true);
  }, h.onclick = function() {
    y || (e.removeNode(), v.hidden = true);
  }, a.onclick = function() {
    y || (e.focusNode(e.currentNode), v.hidden = true);
  }, u.onclick = function() {
    e.cancelFocus(), v.hidden = true;
  }, d.onclick = function() {
    y || (e.moveUpNode(), v.hidden = true);
  }, p.onclick = function() {
    y || (e.moveDownNode(), v.hidden = true);
  }, g.onclick = function() {
    v.hidden = true;
    var b2 = e.currentNode, x = n(s.clickTips);
    e.container.appendChild(x), e.map.addEventListener("click", function(w) {
      w.preventDefault(), x.remove();
      var _ = w.target;
      _.parentElement.tagName === "ME-PARENT" || _.parentElement.tagName === "ME-ROOT" ? e.createLink(b2, _) : console.log("link cancel");
    }, {
      once: true
    });
  }, m.onclick = function() {
    v.hidden = true, e.createSummary(), e.unselectNodes();
  };
}
var gt = function gt2(e) {
  var t = e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");
  e.selectNode(t[Math.ceil(t.length / 2) - 1]);
}, vt = function vt2(e) {
  var t = e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");
  e.selectNode(t[Math.ceil(t.length / 2) - 1]);
}, ve = function ve2(e) {
  e.selectNode(e.map.querySelector("me-root>me-tpc"));
};
function bt(e) {
  var t = {
    13: function _(n) {
      n.shiftKey ? e.insertBefore() : e.insertSibling();
    },
    9: function _() {
      e.addChild();
    },
    112: function _() {
      e.toCenter();
    },
    113: function _() {
      e.beginEdit();
    },
    38: function _(n) {
      if (n.altKey)
        e.moveUpNode();
      else {
        if (n.metaKey || n.ctrlKey)
          return e.initSide();
        e.selectPrevSibling();
      }
    },
    40: function _(n) {
      n.altKey ? e.moveDownNode() : e.selectNextSibling();
    },
    37: function _(n) {
      var s;
      if (n.metaKey || n.ctrlKey)
        return e.initLeft();
      if (!e.currentNode)
        return;
      var o = e.currentNode.nodeObj, i = e.currentNode.offsetParent.offsetParent.parentElement;
      e.currentNode.nodeObj.root ? gt(e) : i.className === "rhs" ? (s = o.parent) != null && s.root ? ve(e) : e.selectParent() : i.className === "lhs" && e.selectFirstChild();
    },
    39: function _(n) {
      var s;
      if (n.metaKey || n.ctrlKey)
        return e.initRight();
      if (!e.currentNode)
        return;
      var o = e.currentNode.nodeObj, i = e.currentNode.offsetParent.offsetParent.parentElement;
      o.root ? vt(e) : i.className === "lhs" ? (s = o.parent) != null && s.root ? ve(e) : e.selectParent() : i.className === "rhs" && e.selectFirstChild();
    },
    33: function _() {
      e.moveUpNode();
    },
    34: function _() {
      e.moveDownNode();
    },
    67: function _(n) {
      (n.metaKey || n.ctrlKey) && (e.waitCopy = e.currentNode);
    },
    86: function _(n) {
      !e.waitCopy || !e.currentNode || (n.metaKey || n.ctrlKey) && (e.copyNode(e.waitCopy, e.currentNode), e.waitCopy = null);
    },
    // ctrl +
    187: function _(n) {
      if (n.metaKey || n.ctrlKey) {
        if (e.scaleVal > 1.6)
          return;
        e.scale(e.scaleVal += 0.2);
      }
    },
    // ctrl -
    189: function _(n) {
      if (n.metaKey || n.ctrlKey) {
        if (e.scaleVal < 0.6)
          return;
        e.scale(e.scaleVal -= 0.2);
      }
    },
    // ctrl 0
    48: function _(n) {
      (n.metaKey || n.ctrlKey) && e.scale(1);
    }
  };
  e.map.onkeydown = function(n) {
    if (n.preventDefault(), !!e.editable && n.target === n.currentTarget)
      if (n.keyCode === 8 || n.keyCode === 46)
        e.currentLink ? e.removeLink() : e.currentSummary ? e.removeSummary(e.currentSummary.summaryObj.id) : e.currentNode ? e.removeNode() : e.currentNodes && e.removeNodes(e.currentNodes);
      else {
        var o = t[n.keyCode];
        o && o(n);
      }
  };
}
function yt(e, t) {
  var n = function n2(d2, p) {
    var g = document.createElement("div");
    return g.id = d2, g.innerHTML = '<svg class="icon" aria-hidden="true">\n    <use xlink:href="#icon-' + p + '"></use>\n  </svg>', g;
  }, o = n("cm-add_child", "zijiedian"), i = n("cm-add_sibling", "tongjijiedian-"), s = n("cm-remove_child", "shanchu2"), r = n("cm-up", "rising"), l = n("cm-down", "falling"), c = n("cm-edit", "edit"), h = document.createElement("ul");
  if (h.className = "menu-list", t && t.extend) {
    var _loop2 = function _loop22() {
      var p = t.extend[d], g = n(p.name, p.name);
      h.appendChild(g), g.onclick = function(m) {
        p.onclick(m);
      };
    };
    for (var d = 0; d < t.extend.length; d++) {
      _loop2();
    }
  }
  var a = document.createElement("mmenu");
  a.className = "mobile-menu", a.appendChild(o), a.appendChild(i), a.appendChild(s), a.appendChild(r), a.appendChild(l), a.appendChild(c), a.hidden = true, e.container.append(a);
  var u = true;
  e.bus.addListener("unselectNode", function() {
    a.hidden = true;
  }), e.bus.addListener("selectNode", function(d2) {
    a.hidden = false, d2.root ? u = true : u = false;
  }), a.onclick = function(d2) {
    d2.target === a && (a.hidden = true);
  }, o.onclick = function() {
    e.addChild();
  }, i.onclick = function() {
    u || e.insertSibling();
  }, s.onclick = function() {
    u || e.removeNode();
  }, r.onclick = function(d2) {
    u || e.moveUpNode();
  }, l.onclick = function(d2) {
    u || e.moveDownNode();
  }, c.onclick = function(d2) {
    e.beginEdit();
  };
}
var de = document, xt = function xt2(e, t) {
  if (!t)
    return he(e), e;
  var n = e.getElementsByClassName("insert-preview"), o = "insert-preview " + t + " show";
  if (n.length > 0)
    n[0].className = o;
  else {
    var i = de.createElement("div");
    i.className = o, e.appendChild(i);
  }
  return e;
}, he = function he2(e) {
  if (!e)
    return;
  var t = e.getElementsByClassName("insert-preview");
  for (var _iterator = _createForOfIteratorHelperLoose(t || []), _step; !(_step = _iterator()).done; ) {
    var n = _step.value;
    n.remove();
  }
}, be = function be2(e, t) {
  var n = t.parentElement.parentElement.contains(e);
  return e && e.tagName === "ME-TPC" && e !== t && !n && e.nodeObj.root !== true;
}, wt = function wt2(e) {
  var t = document.createElement("div");
  return t.className = "mind-elixir-ghost", e.map.appendChild(t), t;
};
function Et(e) {
  var t = null, n = null, o = null;
  var i = wt(e), s = 12;
  e.map.addEventListener("dragstart", function(r) {
    var c;
    var l = r.target;
    if ((l == null ? void 0 : l.tagName) !== "ME-TPC") {
      r.preventDefault();
      return;
    }
    t = l, t.parentElement.parentElement.style.opacity = "0.5", i.innerHTML = t.innerHTML, (c = r.dataTransfer) == null || c.setDragImage(i, 0, 0), S.clear();
  }), e.map.addEventListener("dragend", /* @__PURE__ */ function() {
    var _ref5 = _asyncToGenerator(/* @__PURE__ */ _regeneratorRuntime().mark(function _callee(r) {
      var l, c;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1)
          switch (_context.prev = _context.next) {
            case 0:
              if (t) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              t.parentElement.parentElement.style.opacity = "1";
              l = r.target;
              if (!(l.style.opacity = "", !o)) {
                _context.next = 6;
                break;
              }
              return _context.abrupt("return");
            case 6:
              he(o);
              c = t.nodeObj;
              _context.t0 = n;
              _context.next = _context.t0 === "before" ? 11 : _context.t0 === "after" ? 13 : _context.t0 === "in" ? 15 : 17;
              break;
            case 11:
              e.moveNodeBefore(t, o), e.selectNode(N(c.id));
              return _context.abrupt("break", 17);
            case 13:
              e.moveNodeAfter(t, o), e.selectNode(N(c.id));
              return _context.abrupt("break", 17);
            case 15:
              e.moveNode(t, o);
              return _context.abrupt("break", 17);
            case 17:
              t = null;
            case 18:
            case "end":
              return _context.stop();
          }
      }, _callee);
    }));
    return function(_x) {
      return _ref5.apply(this, arguments);
    };
  }()), e.map.addEventListener("dragover", Ge(function(r) {
    if (!t)
      return;
    he(o);
    var l = de.elementFromPoint(r.clientX, r.clientY - s);
    if (be(l, t)) {
      o = l;
      var c = l.getBoundingClientRect().y;
      r.clientY > c + l.clientHeight ? n = "after" : r.clientY > c + l.clientHeight / 2 && (n = "in");
    } else {
      var _c = de.elementFromPoint(r.clientX, r.clientY + s);
      if (be(_c, t)) {
        o = _c;
        var h = _c.getBoundingClientRect().y;
        r.clientY < h ? n = "before" : r.clientY < h + _c.clientHeight / 2 && (n = "in");
      } else
        n = o = null;
    }
    o && xt(o, n);
  }, 200));
}
var Nt = function Nt2(e) {
  return ["createSummary", "removeSummary", "finishEditSummary"].includes(e.name) ? {
    type: "summary",
    value: e.obj.id
  } : ["createCustomLink", "removeCustomLink", "finishEditCustomLinkLabel"].includes(e.name) ? {
    type: "customLink",
    value: e.obj.id
  } : ["removeNodes"].includes(e.name) ? {
    type: "nodes",
    value: e.objs.map(function(t) {
      return t.id;
    })
  } : {
    type: "node",
    value: e.obj.id
  };
};
function Ct(e) {
  var t = [], n = -1, o = e.getData();
  e.bus.addListener("operation", function(i) {
    if (i.name === "beginEdit")
      return;
    t = t.slice(0, n + 1);
    var s = e.getData();
    t.push({
      prev: o,
      currentObject: Nt(i),
      next: s
    }), o = s, n = t.length - 1;
  }), e.undo = function() {
    if (n > -1) {
      var i = t[n];
      o = i.prev, e.refresh(i.prev), i.currentObject.type === "node" && e.selectNode(N(i.currentObject.value)), n--, console.log("current", o);
    }
  }, e.redo = function() {
    if (n < t.length - 1) {
      n++;
      var i = t[n];
      o = i.next, e.refresh(i.next), i.currentObject.type === "node" && e.selectNode(N(i.currentObject.value));
    }
  }, e.map.addEventListener("keydown", function(i) {
    (i.metaKey || i.ctrlKey) && i.shiftKey && i.key === "Z" ? e.redo() : (i.metaKey || i.ctrlKey) && i.key === "z" && e.undo();
  });
}
var R = function R2(e, t) {
  var n = document.createElement("span");
  return n.id = e, n.innerHTML = '<svg class="icon" aria-hidden="true">\n    <use xlink:href="#icon-' + t + '"></use>\n  </svg>', n;
};
function _t(e) {
  var t = document.createElement("div"), n = R("fullscreen", "full"), o = R("toCenter", "living"), i = R("zoomout", "move"), s = R("zoomin", "add"), r = document.createElement("span");
  return r.innerText = "100%", t.appendChild(n), t.appendChild(o), t.appendChild(i), t.appendChild(s), t.className = "mind-elixir-toolbar rb", n.onclick = function() {
    e.container.requestFullscreen();
  }, o.onclick = function() {
    e.toCenter();
  }, i.onclick = function() {
    e.scaleVal < 0.6 || e.scale(e.scaleVal -= 0.2);
  }, s.onclick = function() {
    e.scaleVal > 1.6 || e.scale(e.scaleVal += 0.2);
  }, t;
}
function kt(e) {
  var t = document.createElement("div"), n = R("tbltl", "left"), o = R("tbltr", "right"), i = R("tblts", "side");
  return t.appendChild(n), t.appendChild(o), t.appendChild(i), t.className = "mind-elixir-toolbar lt", n.onclick = function() {
    e.initLeft();
  }, o.onclick = function() {
    e.initRight();
  }, i.onclick = function() {
    e.initSide();
  }, t;
}
function St(e) {
  e.container.append(_t(e)), e.container.append(kt(e));
}
/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */
var Lt = Object.defineProperty, Mt = function Mt2(e, t, n) {
  return t in e ? Lt(e, t, {
    enumerable: true,
    configurable: true,
    writable: true,
    value: n
  }) : e[t] = n;
}, E = function E2(e, t, n) {
  return Mt(e, typeof t != "symbol" ? t + "" : t, n), n;
};
var Tt = /* @__PURE__ */ function() {
  function Tt2() {
    E(this, "_listeners", /* @__PURE__ */ new Map()), E(this, "on", this.addEventListener), E(this, "off", this.removeEventListener), E(this, "emit", this.dispatchEvent);
  }
  var _proto = Tt2.prototype;
  _proto.addEventListener = function addEventListener(t, n) {
    var _this$_listeners$get;
    var o = (_this$_listeners$get = this._listeners.get(t)) != null ? _this$_listeners$get : /* @__PURE__ */ new Set();
    return this._listeners.set(t, o), o.add(n), this;
  };
  _proto.removeEventListener = function removeEventListener(t, n) {
    var o;
    return (o = this._listeners.get(t)) == null || o.delete(n), this;
  };
  _proto.dispatchEvent = function dispatchEvent(t) {
    var o = true;
    for (var _len2 = arguments.length, n = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      n[_key2 - 1] = arguments[_key2];
    }
    for (var _iterator2 = _createForOfIteratorHelperLoose((_this$_listeners$get2 = this._listeners.get(t)) != null ? _this$_listeners$get2 : []), _step2; !(_step2 = _iterator2()).done; ) {
      var _this$_listeners$get2;
      var i = _step2.value;
      o = i.apply(void 0, n) !== false && o;
    }
    return o;
  };
  _proto.unbindAllListeners = function unbindAllListeners() {
    this._listeners.clear();
  };
  return Tt2;
}();
var ye = function ye2(e, t) {
  if (t === void 0) {
    t = "px";
  }
  return typeof e == "number" ? e + t : e;
};
function j(_ref6, t, n) {
  var e = _ref6.style;
  if (typeof t == "object")
    for (var _i = 0, _Object$entries = Object.entries(t); _i < _Object$entries.length; _i++) {
      var _Object$entries$_i = _Object$entries[_i], o = _Object$entries$_i[0], i = _Object$entries$_i[1];
      i !== void 0 && (e[o] = ye(i));
    }
  else
    n !== void 0 && (e[t] = ye(n));
}
function Be(e) {
  return function(t, n, o, i) {
    if (i === void 0) {
      i = {};
    }
    t instanceof HTMLCollection || t instanceof NodeList ? t = Array.from(t) : Array.isArray(t) || (t = [t]), Array.isArray(n) || (n = [n]);
    for (var _iterator3 = _createForOfIteratorHelperLoose(t), _step3; !(_step3 = _iterator3()).done; ) {
      var s = _step3.value;
      for (var _iterator4 = _createForOfIteratorHelperLoose(n), _step4; !(_step4 = _iterator4()).done; ) {
        var r = _step4.value;
        s[e](r, o, _extends({
          capture: false
        }, i));
      }
    }
    return [t, n, o, i];
  };
}
var V = Be("addEventListener"), O = Be("removeEventListener"), ee = function ee2(e) {
  var _ref8;
  var t;
  var _ref7 = (_ref8 = (t = e.touches) == null ? void 0 : t[0]) != null ? _ref8 : e, n = _ref7.clientX, o = _ref7.clientY, i = _ref7.target;
  return {
    x: n,
    y: o,
    target: i
  };
};
function xe(e, t, n) {
  if (n === void 0) {
    n = "touch";
  }
  switch (n) {
    case "center": {
      var o = t.left + t.width / 2, i = t.top + t.height / 2;
      return o >= e.left && o <= e.right && i >= e.top && i <= e.bottom;
    }
    case "cover":
      return t.left >= e.left && t.top >= e.top && t.right <= e.right && t.bottom <= e.bottom;
    case "touch":
      return e.right >= t.left && e.left <= t.right && e.bottom >= t.top && e.top <= t.bottom;
  }
}
function W(e, t) {
  if (t === void 0) {
    t = document;
  }
  var n = Array.isArray(e) ? e : [e];
  var o = [];
  for (var i = 0, s = n.length; i < s; i++) {
    var r = n[i];
    typeof r == "string" ? o = o.concat(Array.from(t.querySelectorAll(r))) : r instanceof Element && o.push(r);
  }
  return o;
}
var $t = function $t2() {
  return matchMedia("(hover: none), (pointer: coarse)").matches;
}, Dt = function Dt2() {
  return "safari" in window;
}, jt = function jt2(e) {
  var t, n = -1, o = false;
  return {
    next: function next() {
      for (var _len3 = arguments.length, i = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        i[_key3] = arguments[_key3];
      }
      t = i, o || (o = true, n = requestAnimationFrame(function() {
        e.apply(void 0, t), o = false;
      }));
    },
    cancel: function cancel() {
      cancelAnimationFrame(n), o = false;
    }
  };
}, B = Math.abs, we = Math.max, Ee = Math.min, Ne = Math.ceil;
var ze = /* @__PURE__ */ function(_Tt) {
  function ze2(t) {
    var _this2;
    var n, o, i, s, r;
    _this2 = _Tt.call(this) || this, E(_assertThisInitialized(_this2), "_options"), E(_assertThisInitialized(_this2), "_selection", {
      stored: [],
      selected: [],
      touched: [],
      changed: {
        added: [],
        // Added elements since last selection
        removed: []
        // Removed elements since last selection
      }
    }), E(_assertThisInitialized(_this2), "_area"), E(_assertThisInitialized(_this2), "_clippingElement"), E(_assertThisInitialized(_this2), "_targetElement"), E(_assertThisInitialized(_this2), "_targetRect"), E(_assertThisInitialized(_this2), "_selectables", []), E(_assertThisInitialized(_this2), "_latestElement"), E(_assertThisInitialized(_this2), "_areaRect", new DOMRect()), E(_assertThisInitialized(_this2), "_areaLocation", {
      y1: 0,
      x2: 0,
      y2: 0,
      x1: 0
    }), E(_assertThisInitialized(_this2), "_singleClick", true), E(_assertThisInitialized(_this2), "_frame"), E(_assertThisInitialized(_this2), "_scrollAvailable", true), E(_assertThisInitialized(_this2), "_scrollingActive", false), E(_assertThisInitialized(_this2), "_scrollSpeed", {
      x: 0,
      y: 0
    }), E(_assertThisInitialized(_this2), "_scrollDelta", {
      x: 0,
      y: 0
    }), E(_assertThisInitialized(_this2), "disable", _this2._bindStartEvents.bind(_assertThisInitialized(_this2), false)), E(_assertThisInitialized(_this2), "enable", _this2._bindStartEvents), _this2._options = _extends({
      selectionAreaClass: "selection-area",
      selectionContainerClass: void 0,
      selectables: [],
      document: window.document,
      startAreas: ["html"],
      boundaries: ["html"],
      container: "body"
    }, t, {
      behaviour: _extends({
        overlap: "invert",
        intersect: "touch"
      }, t.behaviour, {
        startThreshold: (n = t.behaviour) != null && n.startThreshold ? typeof t.behaviour.startThreshold == "number" ? t.behaviour.startThreshold : _extends({
          x: 10,
          y: 10
        }, t.behaviour.startThreshold) : {
          x: 10,
          y: 10
        },
        scrolling: _extends({
          speedDivider: 10,
          manualSpeed: 750
        }, (o = t.behaviour) == null ? void 0 : o.scrolling, {
          startScrollMargins: _extends({
            x: 0,
            y: 0
          }, (s = (i = t.behaviour) == null ? void 0 : i.scrolling) == null ? void 0 : s.startScrollMargins)
        })
      }),
      features: _extends({
        range: true,
        touch: true
      }, t.features, {
        singleTap: _extends({
          allow: true,
          intersect: "native"
        }, (r = t.features) == null ? void 0 : r.singleTap)
      })
    });
    for (var _iterator5 = _createForOfIteratorHelperLoose(Object.getOwnPropertyNames(Object.getPrototypeOf(_this2))), _step5; !(_step5 = _iterator5()).done; ) {
      var a = _step5.value;
      typeof _this2[a] == "function" && (_this2[a] = _this2[a].bind(_this2));
    }
    var _this2$_options = _this2._options, l = _this2$_options.document, c = _this2$_options.selectionAreaClass, h = _this2$_options.selectionContainerClass;
    _this2._area = l.createElement("div"), _this2._clippingElement = l.createElement("div"), _this2._clippingElement.appendChild(_this2._area), _this2._area.classList.add(c), h && _this2._clippingElement.classList.add(h), j(_this2._area, {
      willChange: "top, left, bottom, right, width, height",
      top: 0,
      left: 0,
      position: "fixed"
    }), j(_this2._clippingElement, {
      overflow: "hidden",
      position: "fixed",
      transform: "translate3d(0, 0, 0)",
      // https://stackoverflow.com/a/38268846
      pointerEvents: "none",
      zIndex: "1"
    }), _this2._frame = jt(function(a2) {
      _this2._recalculateSelectionAreaRect(), _this2._updateElementSelection(), _this2._emitEvent("move", a2), _this2._redrawSelectionArea();
    }), _this2.enable();
    return _this2;
  }
  _inheritsLoose(ze2, _Tt);
  var _proto2 = ze2.prototype;
  _proto2._bindStartEvents = function _bindStartEvents(t) {
    if (t === void 0) {
      t = true;
    }
    var _this$_options = this._options, n = _this$_options.document, o = _this$_options.features, i = t ? V : O;
    i(n, "mousedown", this._onTapStart), o.touch && i(n, "touchstart", this._onTapStart, {
      passive: false
    });
  };
  _proto2._onTapStart = function _onTapStart(t, n) {
    var _l$scrollingElement;
    if (n === void 0) {
      n = false;
    }
    var _ee = ee(t), o = _ee.x, i = _ee.y, s = _ee.target, r = this._options, l = this._options.document, c = s.getBoundingClientRect(), h = W(r.startAreas, r.document), a = W(r.boundaries, r.document);
    this._targetElement = a.find(function(p) {
      return xe(p.getBoundingClientRect(), c);
    });
    var u = t.composedPath();
    if (!this._targetElement || !h.find(function(p) {
      return u.includes(p);
    }) || !a.find(function(p) {
      return u.includes(p);
    }) || !n && this._emitEvent("beforestart", t) === false)
      return;
    this._areaLocation = {
      x1: o,
      y1: i,
      x2: 0,
      y2: 0
    };
    var d = (_l$scrollingElement = l.scrollingElement) != null ? _l$scrollingElement : l.body;
    this._scrollDelta = {
      x: d.scrollLeft,
      y: d.scrollTop
    }, this._singleClick = true, this.clearSelection(false, true), V(l, ["touchmove", "mousemove"], this._delayedTapMove, {
      passive: false
    }), V(l, ["mouseup", "touchcancel", "touchend"], this._onTapStop), V(l, "scroll", this._onScroll);
  };
  _proto2._onSingleTap = function _onSingleTap(t) {
    var _this3 = this;
    var _this$_options$featur = this._options.features, n = _this$_options$featur.singleTap.intersect, o = _this$_options$featur.range, i = ee(t);
    var s;
    if (n === "native")
      s = i.target;
    else if (n === "touch") {
      this.resolveSelectables();
      var l = i.x, c = i.y;
      s = this._selectables.find(function(h2) {
        var _h$getBoundingClientR = h2.getBoundingClientRect(), a2 = _h$getBoundingClientR.right, u = _h$getBoundingClientR.left, d = _h$getBoundingClientR.top, p = _h$getBoundingClientR.bottom;
        return l < a2 && l > u && c < p && c > d;
      });
    }
    if (!s)
      return;
    for (this.resolveSelectables(); !this._selectables.includes(s); ) {
      if (!s.parentElement)
        return;
      s = s.parentElement;
    }
    var r = this._selection.stored;
    if (this._emitEvent("start", t), t.shiftKey && o && this._latestElement) {
      var _l = this._latestElement, _ref9 = _l.compareDocumentPosition(s) & 4 ? [s, _l] : [_l, s], _c2 = _ref9[0], h = _ref9[1], a = [].concat(this._selectables.filter(function(u) {
        return u.compareDocumentPosition(_c2) & 4 && u.compareDocumentPosition(h) & 2;
      }), [_c2, h]);
      this.select(a), this._latestElement = _l;
    } else
      r.includes(s) && (r.length === 1 || t.ctrlKey || r.every(function(l2) {
        return _this3._selection.stored.includes(l2);
      })) ? this.deselect(s) : (this.select(s), this._latestElement = s);
    this._emitEvent("stop", t);
  };
  _proto2._delayedTapMove = function _delayedTapMove(t) {
    var _this4 = this;
    var _this$_options2 = this._options, n = _this$_options2.container, o = _this$_options2.document, i = _this$_options2.behaviour.startThreshold, _this$_areaLocation = this._areaLocation, s = _this$_areaLocation.x1, r = _this$_areaLocation.y1, _ee2 = ee(t), l = _ee2.x, c = _ee2.y;
    if (
      // Single number for both coordinates
      typeof i == "number" && B(l + c - (s + r)) >= i || // Different x and y threshold
      typeof i == "object" && B(l - s) >= i.x || B(c - r) >= i.y
    ) {
      if (O(o, ["mousemove", "touchmove"], this._delayedTapMove, {
        passive: false
      }), this._emitEvent("beforedrag", t) === false) {
        O(o, ["mouseup", "touchcancel", "touchend"], this._onTapStop);
        return;
      }
      V(o, ["mousemove", "touchmove"], this._onTapMove, {
        passive: false
      }), j(this._area, "display", "block"), W(n, o)[0].appendChild(this._clippingElement), this.resolveSelectables(), this._singleClick = false, this._targetRect = this._targetElement.getBoundingClientRect(), this._scrollAvailable = this._targetElement.scrollHeight !== this._targetElement.clientHeight || this._targetElement.scrollWidth !== this._targetElement.clientWidth, this._scrollAvailable && (V(o, "wheel", this._manualScroll, {
        passive: false
      }), this._selectables = this._selectables.filter(function(h) {
        return _this4._targetElement.contains(h);
      })), this._setupSelectionArea(), this._emitEvent("start", t), this._onTapMove(t);
    }
    this._handleMoveEvent(t);
  };
  _proto2._setupSelectionArea = function _setupSelectionArea() {
    var t = this._clippingElement, n = this._targetElement, o = this._area, i = this._targetRect = n.getBoundingClientRect();
    this._scrollAvailable ? (j(t, {
      top: i.top,
      left: i.left,
      width: i.width,
      height: i.height
    }), j(o, {
      marginTop: -i.top,
      marginLeft: -i.left
    })) : (j(t, {
      top: 0,
      left: 0,
      width: "100%",
      height: "100%"
    }), j(o, {
      marginTop: 0,
      marginLeft: 0
    }));
  };
  _proto2._onTapMove = function _onTapMove(t) {
    var _this5 = this;
    var _ee3 = ee(t), n = _ee3.x, o = _ee3.y, i = this._scrollSpeed, s = this._areaLocation, r = this._options, l = this._frame, c = r.behaviour.scrolling.speedDivider, h = this._targetElement;
    if (s.x2 = n, s.y2 = o, this._scrollAvailable && !this._scrollingActive && (i.y || i.x)) {
      this._scrollingActive = true;
      var _a = function a() {
        if (!i.x && !i.y) {
          _this5._scrollingActive = false;
          return;
        }
        var u = h.scrollTop, d = h.scrollLeft;
        i.y && (h.scrollTop += Ne(i.y / c), s.y1 -= h.scrollTop - u), i.x && (h.scrollLeft += Ne(i.x / c), s.x1 -= h.scrollLeft - d), l.next(t), requestAnimationFrame(_a);
      };
      requestAnimationFrame(_a);
    } else
      l.next(t);
    this._handleMoveEvent(t);
  };
  _proto2._handleMoveEvent = function _handleMoveEvent(t) {
    var n = this._options.features;
    (n.touch && $t() || this._scrollAvailable && Dt()) && t.preventDefault();
  };
  _proto2._onScroll = function _onScroll() {
    var _n$scrollingElement;
    var t = this._scrollDelta, n = this._options.document, _ref10 = (_n$scrollingElement = n.scrollingElement) != null ? _n$scrollingElement : n.body, o = _ref10.scrollTop, i = _ref10.scrollLeft;
    this._areaLocation.x1 += t.x - i, this._areaLocation.y1 += t.y - o, t.x = i, t.y = o, this._setupSelectionArea(), this._frame.next(null);
  };
  _proto2._manualScroll = function _manualScroll(t) {
    var n = this._options.behaviour.scrolling.manualSpeed, o = t.deltaY ? t.deltaY > 0 ? 1 : -1 : 0, i = t.deltaX ? t.deltaX > 0 ? 1 : -1 : 0;
    this._scrollSpeed.y += o * n, this._scrollSpeed.x += i * n, this._onTapMove(t), t.preventDefault();
  };
  _proto2._recalculateSelectionAreaRect = function _recalculateSelectionAreaRect() {
    var t = this._scrollSpeed, n = this._areaLocation, o = this._areaRect, i = this._targetElement, s = this._options, r = i.scrollTop, l = i.scrollHeight, c = i.clientHeight, h = i.scrollLeft, a = i.scrollWidth, u = i.clientWidth, d = this._targetRect, p = n.x1, g = n.y1;
    var m = n.x2, f = n.y2;
    var v = s.behaviour.scrolling.startScrollMargins;
    m < d.left + v.x ? (t.x = h ? -B(d.left - m + v.x) : 0, m = m < d.left ? d.left : m) : m > d.right - v.x ? (t.x = a - h - u ? B(d.left + d.width - m - v.x) : 0, m = m > d.right ? d.right : m) : t.x = 0, f < d.top + v.y ? (t.y = r ? -B(d.top - f + v.y) : 0, f = f < d.top ? d.top : f) : f > d.bottom - v.y ? (t.y = l - r - c ? B(d.top + d.height - f - v.y) : 0, f = f > d.bottom ? d.bottom : f) : t.y = 0;
    var y = Ee(p, m), b = Ee(g, f), x = we(p, m), w = we(g, f);
    o.x = y, o.y = b, o.width = x - y, o.height = w - b;
  };
  _proto2._redrawSelectionArea = function _redrawSelectionArea() {
    var _this$_areaRect = this._areaRect, t = _this$_areaRect.x, n = _this$_areaRect.y, o = _this$_areaRect.width, i = _this$_areaRect.height, s = this._area.style;
    s.left = t + "px", s.top = n + "px", s.width = o + "px", s.height = i + "px";
  };
  _proto2._onTapStop = function _onTapStop(t, n) {
    var o;
    var _this$_options3 = this._options, i = _this$_options3.document, s = _this$_options3.features, r = this._singleClick;
    O(i, ["mousemove", "touchmove"], this._delayedTapMove), O(i, ["touchmove", "mousemove"], this._onTapMove), O(i, ["mouseup", "touchcancel", "touchend"], this._onTapStop), O(i, "scroll", this._onScroll), this._keepSelection(), t && r && s.singleTap.allow ? this._onSingleTap(t) : !r && !n && (this._updateElementSelection(), this._emitEvent("stop", t)), this._scrollSpeed.x = 0, this._scrollSpeed.y = 0, this._scrollAvailable && O(i, "wheel", this._manualScroll, {
      passive: true
    }), this._clippingElement.remove(), (o = this._frame) == null || o.cancel(), j(this._area, "display", "none");
  };
  _proto2._updateElementSelection = function _updateElementSelection() {
    var t = this._selectables, n = this._options, o = this._selection, i = this._areaRect, s = o.stored, r = o.selected, l = o.touched, _n$behaviour = n.behaviour, c = _n$behaviour.intersect, h = _n$behaviour.overlap, a = h === "invert", u = [], d = [], p = [];
    for (var m = 0; m < t.length; m++) {
      var f = t[m];
      if (xe(i, f.getBoundingClientRect(), c)) {
        if (r.includes(f))
          s.includes(f) && !l.includes(f) && l.push(f);
        else if (a && s.includes(f)) {
          p.push(f);
          continue;
        } else
          d.push(f);
        u.push(f);
      }
    }
    a && d.push.apply(d, s.filter(function(m2) {
      return !r.includes(m2);
    }));
    var g = h === "keep";
    for (var _m = 0; _m < r.length; _m++) {
      var _f = r[_m];
      !u.includes(_f) && !// Check if user wants to keep previously selected elements, e.g.
      // not make them part of the current selection as soon as they're touched.
      (g && s.includes(_f)) && p.push(_f);
    }
    o.selected = u, o.changed = {
      added: d,
      removed: p
    }, this._latestElement = void 0;
  };
  _proto2._emitEvent = function _emitEvent(t, n) {
    return this.emit(t, {
      event: n,
      store: this._selection,
      selection: this
    });
  };
  _proto2._keepSelection = function _keepSelection() {
    var t = this._options, n = this._selection, o = n.selected, i = n.changed, s = n.touched, r = n.stored, l = o.filter(function(c) {
      return !r.includes(c);
    });
    switch (t.behaviour.overlap) {
      case "drop": {
        n.stored = [].concat(l, r.filter(function(c) {
          return !s.includes(c);
        }));
        break;
      }
      case "invert": {
        n.stored = [].concat(l, r.filter(function(c) {
          return !i.removed.includes(c);
        }));
        break;
      }
      case "keep": {
        n.stored = [].concat(r, o.filter(function(c) {
          return !r.includes(c);
        }));
        break;
      }
    }
  };
  _proto2.trigger = function trigger(t, n) {
    if (n === void 0) {
      n = true;
    }
    this._onTapStart(t, n);
  };
  _proto2.resolveSelectables = function resolveSelectables() {
    this._selectables = W(this._options.selectables, this._options.document);
  };
  _proto2.clearSelection = function clearSelection(t, n) {
    var _s$removed;
    if (t === void 0) {
      t = true;
    }
    if (n === void 0) {
      n = false;
    }
    var _this$_selection = this._selection, o = _this$_selection.selected, i = _this$_selection.stored, s = _this$_selection.changed;
    s.added = [], (_s$removed = s.removed).push.apply(_s$removed, o.concat(t ? i : [])), n || (this._emitEvent("move", null), this._emitEvent("stop", null)), this._selection = {
      stored: t ? [] : i,
      selected: [],
      touched: [],
      changed: {
        added: [],
        removed: []
      }
    };
  };
  _proto2.getSelection = function getSelection() {
    return this._selection.stored;
  };
  _proto2.getSelectionArea = function getSelectionArea() {
    return this._area;
  };
  _proto2.cancel = function cancel(t) {
    if (t === void 0) {
      t = false;
    }
    this._onTapStop(null, !t);
  };
  _proto2.destroy = function destroy() {
    this.cancel(), this.disable(), this._clippingElement.remove(), _Tt.prototype.unbindAllListeners.call(this);
  };
  _proto2.select = function select(t, n) {
    var _o$added;
    if (n === void 0) {
      n = false;
    }
    var _this$_selection2 = this._selection, o = _this$_selection2.changed, i = _this$_selection2.selected, s = _this$_selection2.stored, r = W(t, this._options.document).filter(function(l) {
      return !i.includes(l) && !s.includes(l);
    });
    return s.push.apply(s, r), i.push.apply(i, r), (_o$added = o.added).push.apply(_o$added, r), o.removed = [], this._latestElement = void 0, n || (this._emitEvent("move", null), this._emitEvent("stop", null)), r;
  };
  _proto2.deselect = function deselect(t, n) {
    var _this$_selection$chan;
    if (n === void 0) {
      n = false;
    }
    var _this$_selection3 = this._selection, o = _this$_selection3.selected, i = _this$_selection3.stored, s = _this$_selection3.changed, r = W(t, this._options.document).filter(function(l) {
      return o.includes(l) || i.includes(l);
    });
    r.length && (this._selection.stored = i.filter(function(l) {
      return !r.includes(l);
    }), this._selection.selected = o.filter(function(l) {
      return !r.includes(l);
    }), this._selection.changed.added = [], (_this$_selection$chan = this._selection.changed.removed).push.apply(_this$_selection$chan, r.filter(function(l) {
      return !s.removed.includes(l);
    })), this._latestElement = void 0, n || (this._emitEvent("move", null), this._emitEvent("stop", null)));
  };
  return ze2;
}(Tt);
E(ze, "version", "3.3.1");
function Ot(e) {
  var t = new ze({
    selectables: [".map-container me-tpc"],
    boundaries: [e.container],
    container: "body",
    behaviour: {
      // Scroll configuration.
      scrolling: {
        // On scrollable areas the number on px per frame is devided by this amount.
        // Default is 10 to provide a enjoyable scroll experience.
        speedDivider: 10,
        // Browsers handle mouse-wheel events differently, this number will be used as
        // numerator to calculate the mount of px while scrolling manually: manualScrollSpeed / scrollSpeedDivider.
        manualSpeed: 750,
        // This property defines the virtual inset margins from the borders of the container
        // component that, when crossed by the mouse/touch, trigger the scrolling. Useful for
        // fullscreen containers.
        startScrollMargins: {
          x: 10,
          y: 10
        }
      }
    }
  }).on("beforestart", function(_ref11) {
    var n = _ref11.event;
    if (n.button !== e.mouseSelectionButton || n.target.tagName === "ME-TPC" || n.target.id === "input-box" || n.target.className === "circle")
      return false;
    var o = t.getSelectionArea();
    return o.style.background = "#4f90f22d", o.style.border = "1px solid #4f90f2", o.parentElement && (o.parentElement.style.zIndex = "9999"), true;
  }).on("start", function(_ref12) {
    var n = _ref12.event;
    !n.ctrlKey && !n.metaKey && (e.unselectNode(), e.unselectNodes(), e.unselectSummary(), e.unselectLink(), t.clearSelection(true, true));
  }).on("move", function(_ref13) {
    var _ref13$store$changed = _ref13.store.changed, n = _ref13$store$changed.added, o = _ref13$store$changed.removed;
    S.moved = true;
    for (var _iterator6 = _createForOfIteratorHelperLoose(n), _step6; !(_step6 = _iterator6()).done; ) {
      var i = _step6.value;
      i.classList.add("selected");
    }
    for (var _iterator7 = _createForOfIteratorHelperLoose(o), _step7; !(_step7 = _iterator7()).done; ) {
      var _i2 = _step7.value;
      _i2.classList.remove("selected");
    }
  }).on("stop", function(_ref14) {
    var n = _ref14.store.stored;
    e.selectNodes(n);
  });
  e.selection = t;
}
var At = function At2(e, t) {
  if (t === void 0) {
    t = true;
  }
  this.theme = e;
  var n = this.theme.cssVar, o = Object.keys(n);
  for (var i = 0; i < o.length; i++) {
    var s = o[i];
    this.mindElixirBox.style.setProperty(s, n[s]);
  }
  t && this.refresh();
};
function Re(e) {
  return {
    nodeData: e.isFocusMode ? e.nodeDataBackup : e.nodeData,
    linkData: e.linkData,
    summaries: e.summaries,
    direction: e.direction,
    theme: e.theme
  };
}
var Pt = function Pt2(e, t, n) {
  if (e) {
    if (console.time("selectNode"), typeof e == "string") {
      var o = N(e);
      return o ? this.selectNode(o) : void 0;
    }
    this.currentNode && (this.currentNode.className = ""), e.className = "selected", e.scrollIntoView({
      block: "nearest",
      inline: "nearest"
    }), this.currentNode = e, t ? this.bus.fire("selectNewNode", e.nodeObj) : this.bus.fire("selectNode", e.nodeObj, n), console.timeEnd("selectNode");
  }
}, Ht = function Ht2() {
  this.currentNode && (this.currentNode.className = ""), this.currentNode = null, this.bus.fire("unselectNode");
}, Bt = function Bt2(e) {
  if (e) {
    console.time("selectNodes");
    for (var _iterator8 = _createForOfIteratorHelperLoose(e), _step8; !(_step8 = _iterator8()).done; ) {
      var t = _step8.value;
      t.className = "selected";
    }
    this.currentNodes = e, this.bus.fire("selectNodes", e.map(function(t2) {
      return t2.nodeObj;
    })), console.timeEnd("selectNodes");
  }
}, zt = function zt2() {
  if (this.currentNodes) {
    for (var _iterator9 = _createForOfIteratorHelperLoose(this.currentNodes), _step9; !(_step9 = _iterator9()).done; ) {
      var e = _step9.value;
      e.classList.remove("selected");
    }
  }
  this.currentNodes = null, this.bus.fire("unselectNodes");
}, Rt = function Rt2() {
  if (!this.currentNode || this.currentNode.dataset.nodeid === "meroot")
    return false;
  var e = this.currentNode.parentElement.parentElement.nextSibling;
  var t;
  if (e)
    t = e.firstChild.firstChild;
  else
    return false;
  return this.selectNode(t), true;
}, qt = function qt2() {
  if (!this.currentNode || this.currentNode.dataset.nodeid === "meroot")
    return false;
  var e = this.currentNode.parentElement.parentElement.previousSibling;
  var t;
  if (e)
    t = e.firstChild.firstChild;
  else
    return false;
  return this.selectNode(t), true;
}, Ft = function Ft2() {
  if (!this.currentNode)
    return;
  var e = this.currentNode.parentElement.nextSibling;
  if (e && e.firstChild) {
    var t = e.firstChild.firstChild.firstChild;
    this.selectNode(t);
  }
}, Vt = function Vt2() {
  if (!this.currentNode || this.currentNode.dataset.nodeid === "meroot")
    return;
  var e = this.currentNode.parentElement.parentElement.parentElement.previousSibling;
  if (e) {
    var t = e.firstChild;
    this.selectNode(t);
  }
}, Wt = function Wt2() {
  var e = Re(this);
  return JSON.stringify(e, function(t, n) {
    if (!(t === "parent" && typeof n != "string"))
      return n;
  });
}, It = function It2() {
  return JSON.parse(this.getDataString());
}, Kt = function Kt2() {
  var e = Re(this).nodeData;
  var t = "# " + e.topic + "\n\n";
  function n(o, i) {
    for (var s = 0; s < o.length; s++)
      i <= 6 ? t += "".padStart(i, "#") + " " + o[s].topic + "\n\n" : t += "".padStart(i - 7, "	") + "- " + o[s].topic + "\n", o[s].children && n(o[s].children || [], i + 1);
  }
  return n(e.children || [], 2), t;
}, Ut = function Ut2() {
  this.editable = true;
}, Yt = function Yt2() {
  this.editable = false;
}, Gt = function Gt2(e) {
  this.scaleVal = e, this.map.style.transform = "scale(" + e + ")";
}, Xt = function Xt2() {
  this.container.scrollTo(1e4 - this.container.offsetWidth / 2, 1e4 - this.container.offsetHeight / 2);
}, Jt = function Jt2(e) {
  e(this);
}, Qt = function Qt2(e) {
  e.nodeObj.root || (this.tempDirection === null && (this.tempDirection = this.direction), this.isFocusMode || (this.nodeDataBackup = this.nodeData, this.isFocusMode = true), this.nodeData = e.nodeObj, this.nodeData.root = true, this.initRight(), this.toCenter());
}, Zt = function Zt2() {
  this.isFocusMode = false, this.tempDirection !== null && (delete this.nodeData.root, this.nodeData = this.nodeDataBackup, this.direction = this.tempDirection, this.tempDirection = null, this.refresh(), this.toCenter());
}, en = function en2() {
  this.direction = 0, this.refresh();
}, tn = function tn2() {
  this.direction = 1, this.refresh();
}, nn = function nn2() {
  this.direction = 2, this.refresh();
}, on = function on2(e) {
  this.locale = e, this.refresh();
}, sn = function sn2(e, t) {
  var n = e.nodeObj;
  typeof t == "boolean" ? n.expanded = t : n.expanded !== false ? n.expanded = false : n.expanded = true, this.layout(), this.linkDiv(), this.bus.fire("expandNode", n);
}, rn = function rn2(e) {
  e && (e = JSON.parse(JSON.stringify(e)), this.nodeData = e.nodeData, this.linkData = e.linkData || {}, this.summaries = e.summaries || []), _$(this.nodeData), this.layout(), this.linkDiv();
}, ln = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  cancelFocus: Zt,
  disableEdit: Yt,
  enableEdit: Ut,
  expandNode: sn,
  focusNode: Qt,
  getData: It,
  getDataMd: Kt,
  getDataString: Wt,
  initLeft: en,
  initRight: tn,
  initSide: nn,
  install: Jt,
  refresh: rn,
  scale: Gt,
  selectFirstChild: Ft,
  selectNextSibling: Rt,
  selectNode: Pt,
  selectNodes: Bt,
  selectParent: Vt,
  selectPrevSibling: qt,
  setLocale: on,
  toCenter: Xt,
  unselectNode: Ht,
  unselectNodes: zt
}, Symbol.toStringTag, {
  value: "Module"
})), A = function A2(e) {
  var o;
  var t = (o = e.parent) == null ? void 0 : o.children, n = t.indexOf(e);
  return {
    siblings: t,
    index: n
  };
};
function cn(e) {
  var _A = A(e), t = _A.siblings, n = _A.index, o = t[n];
  n === 0 ? (t[n] = t[t.length - 1], t[t.length - 1] = o) : (t[n] = t[n - 1], t[n - 1] = o);
}
function an(e) {
  var _A2 = A(e), t = _A2.siblings, n = _A2.index, o = t[n];
  n === t.length - 1 ? (t[n] = t[0], t[0] = o) : (t[n] = t[n + 1], t[n + 1] = o);
}
function Q(e) {
  var _A3 = A(e), t = _A3.siblings, n = _A3.index;
  return t.splice(n, 1), t.length;
}
function dn(e, t) {
  var _A4 = A(e), n = _A4.siblings, o = _A4.index;
  n.splice(o + 1, 0, t);
}
function hn(e, t) {
  var _A5 = A(e), n = _A5.siblings, o = _A5.index;
  n.splice(o, 0, t);
}
function un(e, t) {
  var _A6 = A(e), n = _A6.siblings, o = _A6.index;
  n[o] = t, t.children = [e];
}
function fn(e, t) {
  Q(e), t.children ? t.children.push(e) : t.children = [e];
}
function pn(e, t) {
  e.direction !== void 0 && (e.direction = t.direction), Q(e);
  var _A7 = A(t), n = _A7.siblings, o = _A7.index;
  n.splice(o, 0, e);
}
function mn(e, t) {
  e.direction !== void 0 && (e.direction = t.direction), Q(e);
  var _A8 = A(t), n = _A8.siblings, o = _A8.index;
  n.splice(o + 1, 0, e);
}
var qe = function qe2(e, t) {
  var n, o;
  if (e === L)
    return L;
  if (e === z)
    return z;
  if (e === X) {
    var i = ((n = document.querySelector(".lhs")) == null ? void 0 : n.childElementCount) || 0, s = ((o = document.querySelector(".rhs")) == null ? void 0 : o.childElementCount) || 0;
    return i <= s ? (t.direction = L, L) : (t.direction = z, z);
  }
}, Fe = function Fe2(e, t) {
  var l, c;
  if (!e)
    return null;
  var n = e.nodeObj;
  n.expanded === false && (this.expandNode(e, true), e = N(n.id));
  var o = t || this.generateNewObj();
  n.children ? n.children.push(o) : n.children = [o], _$(this.nodeData);
  var i = e.parentElement, _this$createWrapper = this.createWrapper(o), s = _this$createWrapper.grp, r = _this$createWrapper.top;
  if (i.tagName === "ME-PARENT") {
    if (i.children[1])
      i.nextSibling.appendChild(s);
    else {
      var h = this.createChildren([s]);
      i.appendChild(re(true)), i.insertAdjacentElement("afterend", h);
    }
    this.linkDiv(s.offsetParent);
  } else
    i.tagName === "ME-ROOT" && (qe(this.direction, o) === L ? (l = document.querySelector(".lhs")) == null || l.appendChild(s) : (c = document.querySelector(".rhs")) == null || c.appendChild(s), this.linkDiv());
  return {
    newTop: r,
    newNodeObj: o
  };
}, Ve = function Ve2(e, t) {
  var n = e.parentNode;
  if (t === 0) {
    var o = n.parentNode.parentNode;
    o.tagName !== "ME-MAIN" && o.previousSibling.children[1].remove();
  }
  n.parentNode.remove();
}, le = function le2(e) {
  var n = e.parentElement.parentElement.lastElementChild;
  (n == null ? void 0 : n.tagName) === "svg" && (n == null || n.remove());
}, gn = function gn2(e, t) {
  console.log(t);
  var n = e.nodeObj, o = De(n);
  o.style && t.style && (t.style = Object.assign(o.style, t.style));
  var i = Object.assign(n, t);
  ue(e, i), this.linkDiv(), this.bus.fire("operation", {
    name: "reshapeNode",
    obj: i,
    origin: o
  });
}, vn = function vn2(e, t) {
  var h, a, u;
  var n = e || this.currentNode;
  if (!n)
    return;
  var o = n.nodeObj;
  if (o.root === true) {
    this.addChild();
    return;
  } else if (((h = o.parent) == null ? void 0 : h.root) === true && ((u = (a = o.parent) == null ? void 0 : a.children) == null ? void 0 : u.length) === 1) {
    this.addChild(N(o.parent.id));
    return;
  }
  var i = t || this.generateNewObj();
  dn(o, i), _$(this.nodeData);
  var s = n.parentElement;
  console.time("insertSibling_DOM");
  var _this$createWrapper2 = this.createWrapper(i), r = _this$createWrapper2.grp, l = _this$createWrapper2.top;
  s.parentNode.parentNode.insertBefore(r, s.parentNode.nextSibling), this.linkDiv(r.offsetParent), t || this.editTopic(l.firstChild), this.selectNode(l.firstChild, true), console.timeEnd("insertSibling_DOM"), this.bus.fire("operation", {
    name: "insertSibling",
    obj: i
  });
}, bn = function bn2(e, t) {
  var n = e || this.currentNode;
  if (!n)
    return;
  var o = n.nodeObj;
  if (o.root === true) {
    this.addChild();
    return;
  }
  var i = t || this.generateNewObj();
  hn(o, i), _$(this.nodeData);
  var s = n.parentElement;
  console.time("insertSibling_DOM");
  var _this$createWrapper3 = this.createWrapper(i), r = _this$createWrapper3.grp, l = _this$createWrapper3.top;
  s.parentNode.parentNode.insertBefore(r, s.parentNode), this.linkDiv(r.offsetParent), t || this.editTopic(l.firstChild), this.selectNode(l.firstChild, true), console.timeEnd("insertSibling_DOM"), this.bus.fire("operation", {
    name: "insertBefore",
    obj: i
  });
}, yn = function yn2(e, t) {
  var n = e || this.currentNode;
  if (!n)
    return;
  le(n);
  var o = n.nodeObj;
  if (o.root === true)
    return;
  var i = t || this.generateNewObj();
  un(o, i), _$(this.nodeData);
  var s = n.parentElement.parentElement;
  console.time("insertParent_DOM");
  var _this$createWrapper4 = this.createWrapper(i, true), r = _this$createWrapper4.grp, l = _this$createWrapper4.top;
  l.appendChild(re(true)), s.insertAdjacentElement("afterend", r);
  var c = this.createChildren([s]);
  l.insertAdjacentElement("afterend", c), this.linkDiv(), t || this.editTopic(l.firstChild), this.selectNode(l.firstChild, true), console.timeEnd("insertParent_DOM"), this.bus.fire("operation", {
    name: "insertParent",
    obj: i
  });
}, xn = function xn2(e, t) {
  console.time("addChild");
  var n = e || this.currentNode;
  if (!n)
    return;
  var o = Fe.call(this, n, t);
  if (!o)
    return;
  var i = o.newTop, s = o.newNodeObj;
  this.bus.fire("operation", {
    name: "addChild",
    obj: s
  }), console.timeEnd("addChild"), t || this.editTopic(i.firstChild), this.selectNode(i.firstChild, true);
}, wn = function wn2(e, t) {
  console.time("copyNode");
  var n = De(e.nodeObj);
  Te(n);
  var o = Fe.call(this, t, n);
  if (!o)
    return;
  var i = o.newNodeObj;
  console.timeEnd("copyNode"), this.bus.fire("operation", {
    name: "copyNode",
    obj: i
  });
}, En = function En2(e) {
  var t = e || this.currentNode;
  if (!t)
    return;
  var n = t.nodeObj;
  cn(n);
  var o = t.parentNode.parentNode;
  o.parentNode.insertBefore(o, o.previousSibling), this.linkDiv(), this.bus.fire("operation", {
    name: "moveUpNode",
    obj: n
  });
}, Nn = function Nn2(e) {
  var t = e || this.currentNode;
  if (!t)
    return;
  var n = t.nodeObj;
  an(n);
  var o = t.parentNode.parentNode;
  o.nextSibling ? o.nextSibling.insertAdjacentElement("afterend", o) : o.parentNode.prepend(o), this.linkDiv(), this.bus.fire("operation", {
    name: "moveDownNode",
    obj: n
  });
}, Cn = function Cn2(e) {
  var r;
  var t = e || this.currentNode;
  if (!t)
    return;
  var n = t.nodeObj;
  if (n.root === true)
    throw new Error("Can not remove root node");
  var o = n.parent.children, i = o.findIndex(function(l2) {
    return l2 === n;
  }), s = Q(n);
  if (Ve(t, s), o.length !== 0) {
    var l = o[i] || o[i - 1];
    this.selectNode(N(l.id));
  } else
    this.selectNode(N(n.parent.id));
  this.linkDiv(), this.bus.fire("operation", {
    name: "removeNode",
    obj: n,
    originIndex: i,
    originParentId: (r = n == null ? void 0 : n.parent) == null ? void 0 : r.id
  });
}, _n = function _n2(e) {
  for (var _iterator10 = _createForOfIteratorHelperLoose(e), _step10; !(_step10 = _iterator10()).done; ) {
    var t = _step10.value;
    var n = t.nodeObj;
    if (n.root === true)
      continue;
    var o = Q(n);
    Ve(t, o);
  }
  this.linkDiv(), this.bus.fire("operation", {
    name: "removeNodes",
    objs: e.map(function(t2) {
      return t2.nodeObj;
    })
  });
}, kn = function kn2(e, t) {
  var l;
  var n = e.nodeObj, o = t.nodeObj, i = (l = n == null ? void 0 : n.parent) == null ? void 0 : l.id;
  if (o.expanded === false && (this.expandNode(t, true), e = N(n.id), t = N(o.id)), !Je(n, o)) {
    console.warn("Invalid move");
    return;
  }
  console.time("moveNode"), fn(n, o), _$(this.nodeData);
  var s = e.parentElement, r = t.parentElement;
  if (r.tagName === "ME-PARENT") {
    if (le(e), r.children[1])
      r.nextSibling.appendChild(s.parentElement);
    else {
      var c = this.createChildren([s.parentElement]);
      r.appendChild(re(true)), r.parentElement.insertBefore(c, r.nextSibling);
    }
  } else
    r.tagName === "ME-ROOT" && (qe(this.direction, n), r.nextSibling.appendChild(s.parentElement));
  this.linkDiv(), this.bus.fire("operation", {
    name: "moveNode",
    obj: n,
    toObj: o,
    originParentId: i
  }), console.timeEnd("moveNode");
}, Sn = function Sn2(e, t) {
  var l;
  var n = e.nodeObj, o = t.nodeObj, i = (l = n.parent) == null ? void 0 : l.id;
  pn(n, o), _$(this.nodeData), le(e);
  var s = e.parentElement.parentNode;
  t.parentElement.parentNode.insertAdjacentElement("beforebegin", s), this.linkDiv(), this.bus.fire("operation", {
    name: "moveNodeBefore",
    obj: n,
    toObj: o,
    originParentId: i
  });
}, Ln = function Ln2(e, t) {
  var l;
  var n = e.nodeObj, o = t.nodeObj, i = (l = n.parent) == null ? void 0 : l.id;
  mn(n, o), _$(this.nodeData), le(e);
  var s = e.parentElement.parentNode;
  t.parentElement.parentNode.insertAdjacentElement("afterend", s), this.linkDiv(), this.bus.fire("operation", {
    name: "moveNodeAfter",
    obj: n,
    toObj: o,
    originParentId: i
  });
}, Mn = function Mn2(e) {
  var t = e || this.currentNode;
  t && this.editTopic(t);
}, Tn = function Tn2(e, t) {
  e.text.textContent = t, e.nodeObj.topic = t, this.linkDiv();
}, We = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  addChild: xn,
  beginEdit: Mn,
  copyNode: wn,
  insertBefore: bn,
  insertParent: yn,
  insertSibling: vn,
  moveDownNode: Nn,
  moveNode: kn,
  moveNodeAfter: Ln,
  moveNodeBefore: Sn,
  moveUpNode: En,
  removeNode: Cn,
  removeNodes: _n,
  reshapeNode: gn,
  setNodeTopic: Tn
}, Symbol.toStringTag, {
  value: "Module"
})), $n = function $n2(e) {
  return {
    dom: e,
    moved: false,
    // diffrentiate click and move
    mousedown: false,
    handleMouseMove: function handleMouseMove(t) {
      this.mousedown && (this.moved = true, this.cb && this.cb(t.movementX, t.movementY));
    },
    handleMouseDown: function handleMouseDown(t) {
      t.button === 0 && (this.mousedown = true);
    },
    handleClear: function handleClear(t) {
      this.mousedown = false;
    },
    cb: null,
    init: function init2(t, n) {
      this.cb = n, this.handleClear = this.handleClear.bind(this), this.handleMouseMove = this.handleMouseMove.bind(this), this.handleMouseDown = this.handleMouseDown.bind(this), t.addEventListener("mousemove", this.handleMouseMove), t.addEventListener("mouseleave", this.handleClear), t.addEventListener("mouseup", this.handleClear), this.dom.addEventListener("mousedown", this.handleMouseDown);
    },
    destory: function destory(t) {
      t.removeEventListener("mousemove", this.handleMouseMove), t.removeEventListener("mouseleave", this.handleClear), t.removeEventListener("mouseup", this.handleClear), this.dom.removeEventListener("mousedown", this.handleMouseDown);
    },
    clear: function clear2() {
      this.moved = false, this.mousedown = false;
    }
  };
}, Ce = {
  create: $n
};
function se(e, t, n) {
  var _K2 = K(e.nodes, t), o = _K2.offsetLeft, i = _K2.offsetTop, s = t.offsetWidth, r = t.offsetHeight, l = o + s / 2, c = i + r / 2, h = l + n.x, a = c + n.y;
  return {
    w: s,
    h: r,
    cx: l,
    cy: c,
    ctrlX: h,
    ctrlY: a
  };
}
function I(e) {
  var t, n;
  var o = (e.cy - e.ctrlY) / (e.ctrlX - e.cx);
  return o > e.h / e.w || o < -e.h / e.w ? e.cy - e.ctrlY < 0 ? (t = e.cx - e.h / 2 / o, n = e.cy + e.h / 2) : (t = e.cx + e.h / 2 / o, n = e.cy - e.h / 2) : e.cx - e.ctrlX < 0 ? (t = e.cx + e.w / 2, n = e.cy - e.w * o / 2) : (t = e.cx - e.w / 2, n = e.cy + e.w * o / 2), {
    x: t,
    y: n
  };
}
var Dn = function Dn2(e, t, n, o) {
  var i = document.createElementNS("http://www.w3.org/2000/svg", "text");
  return C(i, {
    "text-anchor": "middle",
    x: t + "",
    y: n + "",
    fill: o || "#666"
  }), i.dataset.type = "custom-link", i.innerHTML = e, i;
}, jn = function jn2(e, t, n, o) {
  if (!e || !t)
    return;
  var i = performance.now(), s = se(this, e, n.delta1), r = se(this, t, n.delta2), _I = I(s), l = _I.x, c = _I.y, h = s.ctrlX, a = s.ctrlY, u = r.ctrlX, d = r.ctrlY, _I2 = I(r), p = _I2.x, g = _I2.y, m = $e(u, d, p, g), f = dt("M " + l + " " + c + " C " + h + " " + a + " " + u + " " + d + " " + p + " " + g, "M " + m.x1 + " " + m.y1 + " L " + p + " " + g + " L " + m.x2 + " " + m.y2), v = l / 8 + h * 3 / 8 + u * 3 / 8 + p / 8, y = c / 8 + a * 3 / 8 + d * 3 / 8 + g / 8, b = Dn(n.label, v, y, this.theme.cssVar["--color"]);
  f.appendChild(b), f.linkObj = n, f.dataset.linkid = n.id, this.linkSvgGroup.appendChild(f), o || (this.linkData[n.id] = n, this.currentLink = f, this.showLinkController(n, s, r));
  var x = performance.now();
  console.log("DrawCustomLink Execution time: " + (x - i) + " ms");
}, On = function On2(e, t) {
  var n = {
    id: J(),
    label: "Custom Link",
    from: e.nodeObj.id,
    to: t.nodeObj.id,
    delta1: {
      x: 0,
      y: -200
    },
    delta2: {
      x: 0,
      y: -200
    }
  };
  this.drawCustomLink(e, t, n), this.bus.fire("operation", {
    name: "createCustomLink",
    obj: n
  });
}, An = function An2(e) {
  var t;
  if (e ? t = e : t = this.currentLink, !t)
    return;
  this.hideLinkController();
  var n = t.linkObj.id;
  delete this.linkData[n], t.remove(), this.bus.fire("operation", {
    name: "removeCustomLink",
    obj: {
      id: n
    }
  });
}, Pn = function Pn2(e) {
  this.currentLink = e;
  var t = e.linkObj, n = N(t.from), o = N(t.to), i = se(this, n, t.delta1), s = se(this, o, t.delta2);
  this.showLinkController(t, i, s);
}, Hn = function Hn2() {
  this.currentLink = null, this.hideLinkController();
}, Bn = function Bn2() {
  this.linkController.style.display = "none", this.P2.style.display = "none", this.P3.style.display = "none";
}, zn = function zn2(e, t, n) {
  var _this6 = this;
  var u;
  this.linkController.style.display = "initial", this.P2.style.display = "initial", this.P3.style.display = "initial", this.nodes.appendChild(this.linkController), this.nodes.appendChild(this.P2), this.nodes.appendChild(this.P3);
  var _I3 = I(t), o = _I3.x, i = _I3.y, s = t.ctrlX, r = t.ctrlY, l = n.ctrlX, c = n.ctrlY, _I4 = I(n), h = _I4.x, a = _I4.y;
  this.P2.style.cssText = "top:" + r + "px;left:" + s + "px;", this.P3.style.cssText = "top:" + c + "px;left:" + l + "px;", C(this.line1, {
    x1: o + "",
    y1: i + "",
    x2: s + "",
    y2: r + ""
  }), C(this.line2, {
    x1: l + "",
    y1: c + "",
    x2: h + "",
    y2: a + ""
  }), this.helper1 && (this.helper1.destory(this.map), (u = this.helper2) == null || u.destory(this.map)), this.helper1 = Ce.create(this.P2), this.helper2 = Ce.create(this.P3), this.helper1.init(this.map, function(d, p) {
    var v;
    s = s + d / _this6.scaleVal, r = r + p / _this6.scaleVal;
    var g = I(_extends({}, t, {
      ctrlX: s,
      ctrlY: r
    }));
    o = g.x, i = g.y;
    var m = o / 8 + s * 3 / 8 + l * 3 / 8 + h / 8, f = i / 8 + r * 3 / 8 + c * 3 / 8 + a / 8;
    _this6.P2.style.top = r + "px", _this6.P2.style.left = s + "px", (v = _this6.currentLink) == null || v.children[0].setAttribute("d", "M " + o + " " + i + " C " + s + " " + r + " " + l + " " + c + " " + h + " " + a), C(_this6.currentLink.children[2], {
      x: m + "",
      y: f + ""
    }), C(_this6.line1, {
      x1: o + "",
      y1: i + "",
      x2: s + "",
      y2: r + ""
    }), e.delta1.x = s - t.cx, e.delta1.y = r - t.cy;
  }), this.helper2.init(this.map, function(d, p) {
    var y, b;
    l = l + d / _this6.scaleVal, c = c + p / _this6.scaleVal;
    var g = I(_extends({}, n, {
      ctrlX: l,
      ctrlY: c
    }));
    h = g.x, a = g.y;
    var m = o / 8 + s * 3 / 8 + l * 3 / 8 + h / 8, f = i / 8 + r * 3 / 8 + c * 3 / 8 + a / 8, v = $e(l, c, h, a);
    _this6.P3.style.top = c + "px", _this6.P3.style.left = l + "px", (y = _this6.currentLink) == null || y.children[0].setAttribute("d", "M " + o + " " + i + " C " + s + " " + r + " " + l + " " + c + " " + h + " " + a), (b = _this6.currentLink) == null || b.children[1].setAttribute("d", "M " + v.x1 + " " + v.y1 + " L " + h + " " + a + " L " + v.x2 + " " + v.y2), C(_this6.currentLink.children[2], {
      x: m + "",
      y: f + ""
    }), C(_this6.line2, {
      x1: l + "",
      y1: c + "",
      x2: h + "",
      y2: a + ""
    }), e.delta2.x = l - n.cx, e.delta2.y = c - n.cy;
  });
};
function Rn() {
  this.linkSvgGroup.innerHTML = "";
  for (var e in this.linkData) {
    var t = this.linkData[e];
    try {
      this.drawCustomLink(N(t.from), N(t.to), t, true);
    } catch (_unused2) {
      console.warn("Node may not be expanded");
    }
  }
  this.nodes.appendChild(this.linkSvgGroup);
}
function qn(e) {
  var _this7 = this;
  if (console.time("editSummary"), !e)
    return;
  var t = e.children[2];
  console.log(t, e), Oe(this, t, function(n) {
    var s;
    var o = e.linkObj, i = ((s = n.textContent) == null ? void 0 : s.trim()) || "";
    i === "" ? o.label = origin : o.label = i, n.remove(), i !== origin && (t.innerHTML = o.label, _this7.linkDiv(), _this7.bus.fire("operation", {
      name: "finishEditCustomLinkLabel",
      obj: o
    }));
  }), console.timeEnd("editSummary");
}
function Fn() {
  for (var e in this.linkData) {
    var t = this.linkData[e];
    (!_oe(t.from, this.nodeData) || !_oe(t.to, this.nodeData)) && delete this.linkData[t.id];
  }
}
var Vn = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createLink: On,
  drawCustomLink: jn,
  editCutsomLinkLabel: qn,
  hideLinkController: Bn,
  removeLink: An,
  renderCustomLink: Rn,
  selectLink: Pn,
  showLinkController: zn,
  tidyCustomLink: Fn,
  unselectLink: Hn
}, Symbol.toStringTag, {
  value: "Module"
})), Wn = function Wn2(e) {
  var c, h;
  if (e.length === 0)
    throw new Error("No selected node.");
  if (e.length === 1) {
    var a = e[0].nodeObj, u = e[0].nodeObj.parent;
    if (!u)
      throw new Error("Can not select root node.");
    var d = u.children.findIndex(function(p) {
      return a === p;
    });
    return {
      parent: u.id,
      start: d,
      end: d
    };
  }
  var t = 0;
  var n = e.map(function(a2) {
    var u2 = a2.nodeObj;
    var d2 = [];
    for (; u2.parent; ) {
      var p = u2.parent, g = p.children, m = g == null ? void 0 : g.indexOf(u2);
      u2 = p, d2.unshift({
        node: u2,
        index: m
      });
    }
    return d2.length > t && (t = d2.length), d2;
  });
  var o = 0;
  e:
    for (; o < t; o++) {
      var _a2 = (c = n[0][o]) == null ? void 0 : c.node;
      for (var _u = 1; _u < n.length; _u++)
        if (((h = n[_u][o]) == null ? void 0 : h.node) !== _a2)
          break e;
    }
  if (!o)
    throw new Error("Can not select root node.");
  var i = n.map(function(a2) {
    return a2[o - 1].index;
  }).sort(), s = i[0] || 0, r = i[i.length - 1] || 0, l = n[0][o - 1].node;
  if (l.root)
    throw new Error("Please select nodes in the same main topic.");
  return {
    parent: l.id,
    start: s,
    end: r
  };
}, In = function In2(e) {
  var t = document.createElementNS("http://www.w3.org/2000/svg", "g");
  return t.setAttribute("id", e), t;
}, _e = function _e2(e, t) {
  var n = document.createElementNS("http://www.w3.org/2000/svg", "path");
  return C(n, {
    d: e,
    stroke: t || "#666",
    fill: "none",
    "stroke-linecap": "round",
    "stroke-width": "2"
  }), n;
}, ke = function ke2(e, t, n, o, i) {
  var s = document.createElementNS("http://www.w3.org/2000/svg", "text");
  return C(s, {
    "text-anchor": o,
    x: t + "",
    y: n + "",
    fill: i || "#666"
  }), s.innerHTML = e, s;
}, Kn = function Kn2(e) {
  return N(e).parentElement.parentElement;
}, Un = function Un2(_ref15) {
  var e = _ref15.parent, t = _ref15.start;
  var s, r;
  var n = N(e), o = n.nodeObj;
  var i;
  return o.root === true ? i = (s = N(o.children[t].id).closest("me-main")) == null ? void 0 : s.className : i = (r = n.closest("me-main")) == null ? void 0 : r.className, i;
}, Ie = function Ie2(e, t) {
  var _;
  var n = t.id, o = t.text, i = t.parent, s = t.start, r = t.end, l = e.nodes, h = N(i).nodeObj, a = Un(t);
  var u = 1 / 0, d = 0, p = 0, g = 0;
  for (var P = s; P <= r; P++) {
    var U = (_ = h.children) == null ? void 0 : _[P];
    if (!U)
      return console.warn("Child not found"), e.removeSummary(n), null;
    var H = Kn(U.id), _K3 = K(l, H), Z = _K3.offsetLeft, fe = _K3.offsetTop;
    P === s && (p = fe), P === r && (g = fe + H.offsetHeight), Z < u && (u = Z), H.offsetWidth + Z > d && (d = H.offsetWidth + Z);
  }
  var m, f;
  var v = p + 10, y = g + 10, b = (v + y) / 2, x = e.theme.cssVar["--color"];
  a === "lhs" ? (m = _e("M " + (u + 10) + " " + v + " c -5 0 -10 5 -10 10 L " + u + " " + (y - 10) + " c 0 5 5 10 10 10 M " + u + " " + b + " h -10", x), f = ke(o, u - 20, b + 6, "end", x)) : (m = _e("M " + (d - 10) + " " + v + " c 5 0 10 5 10 10 L " + d + " " + (y - 10) + " c 0 5 -5 10 -10 10 M " + d + " " + b + " h 10", x), f = ke(o, d + 20, b + 6, "start", x));
  var w = In("s-" + n);
  return w.appendChild(m), w.appendChild(f), w.summaryObj = t, e.summarySvg.appendChild(w), w;
}, Yn = function Yn2() {
  var e = [];
  this.currentNode ? e = [this.currentNode] : this.currentNodes && (e = this.currentNodes);
  var _Wn = Wn(e), t = _Wn.parent, n = _Wn.start, o = _Wn.end, i = {
    id: J(),
    parent: t,
    start: n,
    end: o,
    text: "summary"
  }, s = Ie(this, i);
  this.summaries.push(i), this.editSummary(s), this.bus.fire("operation", {
    name: "createSummary",
    obj: i
  });
}, Gn = function Gn2(e) {
  var n;
  var t = this.summaries.findIndex(function(o) {
    return o.id === e;
  });
  t > -1 && (this.summaries.splice(t, 1), (n = document.querySelector("#s-" + e)) == null || n.remove()), this.bus.fire("operation", {
    name: "removeSummary",
    obj: {
      id: e
    }
  });
}, Xn = function Xn2(e) {
  var t = e.children[1].getBBox(), n = 6, o = 3, i = document.createElementNS("http://www.w3.org/2000/svg", "rect");
  C(i, {
    x: t.x - n + "",
    y: t.y - n + "",
    width: t.width + n * 2 + "",
    height: t.height + n * 2 + "",
    rx: o + "",
    stroke: this.theme.cssVar["--selected"] || "#4dc4ff",
    "stroke-width": "2",
    fill: "none"
  }), i.classList.add("selected"), e.appendChild(i), this.currentSummary = e;
}, Jn = function Jn2() {
  var e, t;
  (t = (e = this.currentSummary) == null ? void 0 : e.querySelector("rect")) == null || t.remove(), this.currentSummary = null;
}, Qn = function Qn2() {
  var _this8 = this;
  this.summarySvg.innerHTML = "", this.summaries.forEach(function(e) {
    try {
      Ie(_this8, e);
    } catch (_unused3) {
      console.warn("Node may not be expanded");
    }
  }), this.nodes.insertAdjacentElement("beforeend", this.summarySvg);
}, Zn = function Zn2(e) {
  var _this9 = this;
  if (console.time("editSummary"), !e)
    return;
  var t = e.childNodes[1];
  Oe(this, t, function(n) {
    var s;
    var o = e.summaryObj, i = ((s = n.textContent) == null ? void 0 : s.trim()) || "";
    i === "" ? o.text = origin : o.text = i, n.remove(), i !== origin && (t.innerHTML = o.text, _this9.linkDiv(), _this9.bus.fire("operation", {
      name: "finishEditSummary",
      obj: o
    }));
  }), console.timeEnd("editSummary");
}, eo = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createSummary: Yn,
  editSummary: Zn,
  removeSummary: Gn,
  renderSummary: Qn,
  selectSummary: Xn,
  unselectSummary: Jn
}, Symbol.toStringTag, {
  value: "Module"
}));
function to(e, t) {
  var n = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  return C(n, {
    version: "1.1",
    xmlns: "http://www.w3.org/2000/svg",
    height: e,
    width: t
  }), n;
}
function no(e, t) {
  return (parseInt(e) - parseInt(t)) / 2;
}
function oo(e, t, n, o) {
  var i = document.createElementNS("http://www.w3.org/2000/svg", "g");
  var s = "";
  return e.text ? s = e.text.textContent : s = e.childNodes[0].textContent, s.split("\n").forEach(function(l, c) {
    var h = document.createElementNS("http://www.w3.org/2000/svg", "text");
    C(h, {
      x: n + parseInt(t.paddingLeft) + "",
      y: o + parseInt(t.paddingTop) + no(t.lineHeight, t.fontSize) * (c + 1) + parseFloat(t.fontSize) * (c + 1) + "",
      "text-anchor": "start",
      "font-family": t.fontFamily,
      "font-size": "" + t.fontSize,
      "font-weight": "" + t.fontWeight,
      fill: "" + t.color
    }), h.innerHTML = l, i.appendChild(h);
  }), i;
}
function io(e, t, n, o) {
  var i = "";
  e.text ? i = e.text.textContent : i = e.childNodes[0].textContent;
  var s = document.createElementNS("http://www.w3.org/2000/svg", "foreignObject");
  C(s, {
    x: n + parseInt(t.paddingLeft) + "",
    y: o + parseInt(t.paddingTop) + "",
    width: t.width,
    height: t.height
  });
  var r = document.createElement("div");
  return C(r, {
    xmlns: "http://www.w3.org/1999/xhtml",
    style: "font-family: " + t.fontFamily + "; font-size: " + t.fontSize + "; font-weight: " + t.fontWeight + "; color: " + t.color + "; white-space: pre-wrap;"
  }), r.innerHTML = i, s.appendChild(r), s;
}
function ce(e, t, n) {
  if (n === void 0) {
    n = false;
  }
  var o = getComputedStyle(t), _K4 = K(e.nodes, t), i = _K4.offsetLeft, s = _K4.offsetTop, r = document.createElementNS("http://www.w3.org/2000/svg", "rect");
  C(r, {
    x: i + "",
    y: s + "",
    rx: o.borderRadius,
    ry: o.borderRadius,
    width: o.width,
    height: o.height,
    fill: o.backgroundColor,
    stroke: o.borderColor,
    "stroke-width": o.borderWidth
  });
  var l = document.createElementNS("http://www.w3.org/2000/svg", "g");
  l.appendChild(r);
  var c;
  return n ? c = io(t, o, i, s) : c = oo(t, o, i, s), l.appendChild(c), l;
}
function so(e, t) {
  var n = getComputedStyle(t), _K5 = K(e.nodes, t), o = _K5.offsetLeft, i = _K5.offsetTop, s = document.createElementNS("http://www.w3.org/2000/svg", "a"), r = document.createElementNS("http://www.w3.org/2000/svg", "text");
  return C(r, {
    x: o + "",
    y: i + parseInt(n.fontSize) + "",
    "text-anchor": "start",
    "font-family": n.fontFamily,
    "font-size": "" + n.fontSize,
    "font-weight": "" + n.fontWeight,
    fill: "" + n.color
  }), r.innerHTML = t.textContent, s.appendChild(r), s.setAttribute("href", t.href), s;
}
var te = 100, ro = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">', Ke = function Ke2(e, t) {
  if (t === void 0) {
    t = false;
  }
  var u, d, p;
  var n = e.nodes, o = n.offsetHeight + te * 2, i = n.offsetWidth + te * 2, s = to(o + "px", i + "px"), r = document.createElementNS("http://www.w3.org/2000/svg", "svg"), l = document.createElementNS("http://www.w3.org/2000/svg", "rect");
  C(l, {
    x: "0",
    y: "0",
    width: "" + i,
    height: "" + o,
    fill: e.theme.cssVar["--bgcolor"]
  }), s.appendChild(l), n.querySelectorAll(".subLines").forEach(function(g) {
    var m = g.cloneNode(true), _K6 = K(n, g.parentElement), f = _K6.offsetLeft, v = _K6.offsetTop;
    m.setAttribute("x", "" + f), m.setAttribute("y", "" + v), r.appendChild(m);
  });
  var c = (u = n.querySelector(".lines")) == null ? void 0 : u.cloneNode(true);
  c && r.appendChild(c);
  var h = (d = n.querySelector(".topiclinks")) == null ? void 0 : d.cloneNode(true);
  h && r.appendChild(h);
  var a = (p = n.querySelector(".summary")) == null ? void 0 : p.cloneNode(true);
  return a && r.appendChild(a), n.querySelectorAll("me-tpc").forEach(function(g) {
    r.appendChild(ce(e, g, !t));
  }), n.querySelectorAll(".tags > span").forEach(function(g) {
    r.appendChild(ce(e, g));
  }), n.querySelectorAll(".icons > span").forEach(function(g) {
    r.appendChild(ce(e, g));
  }), n.querySelectorAll(".hyper-link").forEach(function(g) {
    r.appendChild(so(e, g));
  }), C(r, {
    x: te + "",
    y: te + "",
    overflow: "visible"
  }), s.appendChild(r), ro + s.outerHTML;
};
function lo(e) {
  return new Promise(function(t, n) {
    var o = new FileReader();
    o.onload = function(i) {
      t(i.target.result);
    }, o.onerror = function(i) {
      n(i);
    }, o.readAsDataURL(e);
  });
}
var co = function co2(e) {
  if (e === void 0) {
    e = false;
  }
  var t = Ke(this, e);
  return new Blob([t], {
    type: "image/svg+xml"
  });
}, ao = /* @__PURE__ */ function() {
  var _ref16 = _asyncToGenerator(/* @__PURE__ */ _regeneratorRuntime().mark(function _callee2(e) {
    var t, n, o;
    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1)
        switch (_context2.prev = _context2.next) {
          case 0:
            if (e === void 0) {
              e = false;
            }
            t = Ke(this, e);
            n = new Blob([t], {
              type: "image/svg+xml"
            });
            _context2.next = 5;
            return lo(n);
          case 5:
            o = _context2.sent;
            return _context2.abrupt("return", new Promise(function(i, s) {
              var r = new Image();
              r.setAttribute("crossOrigin", "anonymous"), r.onload = function() {
                var l = document.createElement("canvas");
                l.width = r.width, l.height = r.height, l.getContext("2d").drawImage(r, 0, 0), l.toBlob(i, "image/png", 1);
              }, r.src = o, r.onerror = s;
            }));
          case 7:
          case "end":
            return _context2.stop();
        }
    }, _callee2, this);
  }));
  return function ao2(_x2) {
    return _ref16.apply(this, arguments);
  };
}(), ho = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  exportPng: ao,
  exportSvg: co
}, Symbol.toStringTag, {
  value: "Module"
}));
function uo(e, t) {
  return /* @__PURE__ */ _asyncToGenerator(/* @__PURE__ */ _regeneratorRuntime().mark(function _callee3() {
    var o, _len4, n, _key4, _args2 = arguments;
    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
      while (1)
        switch (_context3.prev = _context3.next) {
          case 0:
            o = this.before[t];
            for (_len4 = _args2.length, n = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
              n[_key4] = _args2[_key4];
            }
            _context3.t0 = o;
            if (!_context3.t0) {
              _context3.next = 7;
              break;
            }
            _context3.next = 6;
            return o.apply(this, n);
          case 6:
            _context3.t0 = !_context3.sent;
          case 7:
            _context3.t1 = _context3.t0;
            if (_context3.t1) {
              _context3.next = 10;
              break;
            }
            e.apply(this, n);
          case 10:
          case "end":
            return _context3.stop();
        }
    }, _callee3, this);
  }));
}
var Se = Object.keys(We), Ue = {};
for (var e = 0; e < Se.length; e++) {
  var t = Se[e];
  Ue[t] = uo(We[t], t);
}
var fo = _extends({
  getObjById: _oe,
  generateNewObj: Xe,
  layout: et,
  linkDiv: ht,
  editTopic: lt,
  createWrapper: ot,
  createParent: it,
  createChildren: st,
  createTopic: rt,
  findEle: N,
  changeTheme: At
}, ln, Ue, Vn, eo, ho, {
  init: function init(e) {
    if (!e || !e.nodeData)
      return new Error("MindElixir: `data` is required");
    e.direction !== void 0 && (this.direction = e.direction), this.changeTheme(e.theme || this.theme, false), this.nodeData = e.nodeData, _$(this.nodeData), this.linkData = e.linkData || {}, this.summaries = e.summaries || [], this.tidyCustomLink(), this.toolBar && St(this), this.keypress && bt(this), this.editable && Ot(this), Ye() && this.mobileMenu ? yt(this) : this.contextMenu && mt(this, this.contextMenuOption), this.draggable && Et(this), this.allowUndo && Ct(this), this.toCenter(), this.layout(), this.linkDiv();
  }
}), Y = document;
function D(_ref18) {
  var e = _ref18.el, t = _ref18.direction, n = _ref18.locale, o = _ref18.draggable, i = _ref18.editable, s = _ref18.contextMenu, r = _ref18.contextMenuOption, l = _ref18.toolBar, c = _ref18.keypress, h = _ref18.mouseSelectionButton, a = _ref18.before, u = _ref18.newTopicName, d = _ref18.allowUndo, p = _ref18.mainLinkStyle, g = _ref18.subLinkStyle, m = _ref18.overflowHidden, f = _ref18.mobileMenu, v = _ref18.theme;
  console.log("ME_version " + D.version, this);
  var y = null;
  var b = Object.prototype.toString.call(e);
  if (b === "[object HTMLDivElement]" ? y = e : b === "[object String]" && (y = document.querySelector(e)), !y)
    throw new Error("MindElixir: el is not a valid element");
  y.className += " mind-elixir", y.innerHTML = "", y.style.setProperty("--gap", T + "px"), this.mindElixirBox = y, this.before = a || {}, this.locale = n || "en", this.contextMenuOption = r, this.contextMenu = s === void 0 ? true : s, this.toolBar = l === void 0 ? true : l, this.keypress = c === void 0 ? true : c, this.mouseSelectionButton = h || 0, this.mobileMenu = f || false, this.direction = typeof t == "number" ? t : 1, this.draggable = o === void 0 ? true : o, this.newTopicName = u || "new node", this.editable = i === void 0 ? true : i, this.allowUndo = d === void 0 ? false : d, this.currentNode = null, this.currentLink = null, this.scaleVal = 1, this.tempDirection = null, this.mainLinkStyle = p || 0, this.subLinkStyle = g || 0, this.overflowHidden = m || false, this.bus = Ze.create(), this.container = Y.createElement("div"), this.container.className = "map-container";
  var x = window.matchMedia("(prefers-color-scheme: dark)");
  this.theme = v || (x.matches ? Me : Le);
  var w = Y.createElement("div");
  w.className = "map-canvas", this.map = w, this.map.setAttribute("tabindex", "0"), this.container.appendChild(this.map), this.mindElixirBox.appendChild(this.container), this.nodes = Y.createElement("me-nodes"), this.nodes.className = "main-node-container", this.lines = G("lines"), this.summarySvg = G("summary"), this.linkController = G("linkcontroller"), this.P2 = Y.createElement("div"), this.P3 = Y.createElement("div"), this.P2.className = this.P3.className = "circle", this.P2.style.display = this.P3.style.display = "none", this.line1 = pe(), this.line2 = pe(), this.linkController.appendChild(this.line1), this.linkController.appendChild(this.line2), this.linkSvgGroup = G("topiclinks"), this.map.appendChild(this.nodes), this.overflowHidden ? this.container.style.overflow = "hidden" : Qe(this);
}
D.prototype = fo;
D.LEFT = L;
D.RIGHT = z;
D.SIDE = X;
D.THEME = Le;
D.DARK_THEME = Me;
D.version = "3.3.2";
D.E = N;
D.new = function(e) {
  return {
    nodeData: {
      id: J(),
      topic: e || "new topic",
      root: true,
      children: []
    },
    linkData: {}
  };
};
var _sfc_main = defineComponent({
  emits: ["update:modelValue", "operation", "selectNode", "selectNewNode", "selectNodes", "unselectNode", "unselectNodes", "expandNode,", "beforeImport", "afterImport,", "create"],
  props: [].concat(props, ["modelValue", "options"]),
  setup: function setup$1(props2, context) {
    return setup({
      props: props2,
      context,
      renderless,
      api,
      mono: false,
      extendOptions: {
        MindElixir: D
      }
    });
  }
});
var _hoisted_1 = {
  ref: "mindmap",
  class: "tiny-mind-map"
};
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock(
    "div",
    _hoisted_1,
    null,
    512
    /* NEED_PATCH */
  );
}
var pc = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);

export { pc as default };
