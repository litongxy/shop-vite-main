{"version":3,"file":"toolbar-tip.cjs.js","sources":["../../../src/toolbar/toolbar-tip.ts"],"sourcesContent":["import type { QuillToolbarTipOptions } from 'quill-toolbar-tip'\r\nimport type { FluentEditor } from '../fluent-editor'\r\nimport QuillToolbarTip from 'quill-toolbar-tip'\r\nimport { CHANGE_LANGUAGE_EVENT } from '../config'\r\n\r\nexport class ToolbarTip extends QuillToolbarTip {\r\n  static moduleName: string = 'toolbar-tip'\r\n  constructor(public quill: FluentEditor, options: Partial<QuillToolbarTipOptions>) {\r\n    if (!options?.tipTextMap) {\r\n      options.tipTextMap = {}\r\n    }\r\n    super(quill, options)\r\n\r\n    this.quill.on(CHANGE_LANGUAGE_EVENT, () => {\r\n      this.destroyAllTips()\r\n      this.options = this.resolveOptions(options)\r\n      this.createToolbarTip()\r\n    })\r\n  }\r\n\r\n  resolveOptions(options: Partial<QuillToolbarTipOptions>): QuillToolbarTipOptions {\r\n    const result = super.resolveOptions(options)\r\n    const langText = this.quill.options.langText\r\n    const btnTips = [\r\n      'bold',\r\n      'italic',\r\n      'strike',\r\n      'underline',\r\n      'undo',\r\n      'redo',\r\n      'clean',\r\n      'link',\r\n      'blockquote',\r\n      'code',\r\n      'image',\r\n      'file',\r\n      'emoji',\r\n      'video',\r\n      'screenshot',\r\n      'better-table',\r\n      'code-block',\r\n      'formula',\r\n      'format-painter',\r\n    ].reduce((map, name) => {\r\n      map[name] = langText[name]\r\n      return map\r\n    }, {} as Record<string, string>)\r\n    const selectTips = [\r\n      'color',\r\n      'background',\r\n      'font',\r\n      'size',\r\n    ].reduce((map, name) => {\r\n      map[name] = {\r\n        onShow() {\r\n          return langText[name]\r\n        },\r\n      }\r\n      return map\r\n    }, {})\r\n    const valueControlTips = [\r\n      'list',\r\n      'align',\r\n      'script',\r\n      'indent',\r\n      'header',\r\n      'direction',\r\n    ].reduce((map, name) => {\r\n      map[name] = {\r\n        onShow(target: HTMLElement, value: string) {\r\n          if (name === 'direction') {\r\n            value = target.classList.contains('ql-active') ? 'rtl' : 'ltr'\r\n          }\r\n          if (!value) {\r\n            if (name === 'align') {\r\n              value = 'left'\r\n            }\r\n            else if (name === 'header') {\r\n              value = 'normal'\r\n            }\r\n          }\r\n          return langText[`${name}-${value}`]\r\n        },\r\n      }\r\n      return map\r\n    }, {})\r\n    const textMap: QuillToolbarTipOptions['tipTextMap'] = {\r\n      ...btnTips,\r\n      ...valueControlTips,\r\n      ...selectTips,\r\n      fullscreen: {\r\n        onShow: () => {\r\n          return langText[this.quill.isFullscreen ? 'exit-fullscreen' : 'fullscreen']\r\n        },\r\n      },\r\n    }\r\n    return {\r\n      ...result,\r\n      tipTextMap: {\r\n        ...textMap,\r\n        ...options.tipTextMap,\r\n      },\r\n    }\r\n  }\r\n}\r\n"],"names":["CHANGE_LANGUAGE_EVENT"],"mappings":";;;;;AAKO,MAAM,cAAN,MAAM,oBAAmB,gBAAgB;AAAA,EAE9C,YAAmB,OAAqB,SAA0C;AAC5E,QAAA,EAAC,mCAAS,aAAY;AACxB,cAAQ,aAAa;IACvB;AACA,UAAM,OAAO,OAAO;AAJH,SAAA,QAAA;AAMZ,SAAA,MAAM,GAAGA,cAAAA,uBAAuB,MAAM;AACzC,WAAK,eAAe;AACf,WAAA,UAAU,KAAK,eAAe,OAAO;AAC1C,WAAK,iBAAiB;AAAA,IAAA,CACvB;AAAA,EACH;AAAA,EAEA,eAAe,SAAkE;AACzE,UAAA,SAAS,MAAM,eAAe,OAAO;AACrC,UAAA,WAAW,KAAK,MAAM,QAAQ;AACpC,UAAM,UAAU;AAAA,MACd;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,EACA,OAAO,CAAC,KAAK,SAAS;AAClB,UAAA,IAAI,IAAI,SAAS,IAAI;AAClB,aAAA;AAAA,IACT,GAAG,CAA4B,CAAA;AAC/B,UAAM,aAAa;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,EACA,OAAO,CAAC,KAAK,SAAS;AACtB,UAAI,IAAI,IAAI;AAAA,QACV,SAAS;AACP,iBAAO,SAAS,IAAI;AAAA,QACtB;AAAA,MAAA;AAEK,aAAA;AAAA,IACT,GAAG,CAAE,CAAA;AACL,UAAM,mBAAmB;AAAA,MACvB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,EACA,OAAO,CAAC,KAAK,SAAS;AACtB,UAAI,IAAI,IAAI;AAAA,QACV,OAAO,QAAqB,OAAe;AACzC,cAAI,SAAS,aAAa;AACxB,oBAAQ,OAAO,UAAU,SAAS,WAAW,IAAI,QAAQ;AAAA,UAC3D;AACA,cAAI,CAAC,OAAO;AACV,gBAAI,SAAS,SAAS;AACZ,sBAAA;AAAA,YAAA,WAED,SAAS,UAAU;AAClB,sBAAA;AAAA,YACV;AAAA,UACF;AACA,iBAAO,SAAS,GAAG,IAAI,IAAI,KAAK,EAAE;AAAA,QACpC;AAAA,MAAA;AAEK,aAAA;AAAA,IACT,GAAG,CAAE,CAAA;AACL,UAAM,UAAgD;AAAA,MACpD,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,YAAY;AAAA,QACV,QAAQ,MAAM;AACZ,iBAAO,SAAS,KAAK,MAAM,eAAe,oBAAoB,YAAY;AAAA,QAC5E;AAAA,MACF;AAAA,IAAA;AAEK,WAAA;AAAA,MACL,GAAG;AAAA,MACH,YAAY;AAAA,QACV,GAAG;AAAA,QACH,GAAG,QAAQ;AAAA,MACb;AAAA,IAAA;AAAA,EAEJ;AACF;AAlGE,YAAO,aAAqB;AADvB,IAAM,aAAN;;"}