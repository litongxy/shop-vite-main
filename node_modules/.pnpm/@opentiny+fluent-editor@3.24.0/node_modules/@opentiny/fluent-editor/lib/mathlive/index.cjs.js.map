{"version":3,"file":"index.cjs.js","sources":["../../../src/mathlive/index.ts"],"sourcesContent":["import Quill from 'quill'\r\nimport MathliveBlot from './formats'\r\nimport MathliveTooltip from './tooltip'\r\n\r\nexport default class MathliveModule {\r\n  tooltip: MathliveTooltip\r\n  constructor(public quill: Quill) {\r\n    this.tooltip = new MathliveTooltip(quill)\r\n\r\n    this.quill.root.addEventListener(\r\n      'click',\r\n      (e: MouseEvent) => {\r\n        if (!this.quill.isEnabled()) return\r\n        const path = e.composedPath() as HTMLElement[]\r\n        if (!path || path.length <= 0) return\r\n\r\n        const mathliveNode = path.find(node => node.tagName && node.tagName.toUpperCase() === MathliveBlot.tagName.toUpperCase() && node.classList.contains(MathliveBlot.className))\r\n        const mathliveBlot = Quill.find(mathliveNode) as MathliveBlot | null\r\n        if (mathliveBlot) {\r\n          const { value, mode } = MathliveBlot.value(mathliveBlot.domNode)\r\n          if (mode === 'dialog') {\r\n            this.createDialog(value)\r\n          }\r\n        }\r\n      },\r\n      true,\r\n    )\r\n  }\r\n\r\n  createDialog(value?: string) {\r\n    this.tooltip.edit(value)\r\n  }\r\n}\r\n"],"names":["MathliveTooltip","MathliveBlot"],"mappings":";;;;;AAIA,MAAqB,eAAe;AAAA,EAElC,YAAmB,OAAc;AAAd,SAAA,QAAA;AACZ,SAAA,UAAU,IAAIA,QAAA,QAAgB,KAAK;AAExC,SAAK,MAAM,KAAK;AAAA,MACd;AAAA,MACA,CAAC,MAAkB;AACjB,YAAI,CAAC,KAAK,MAAM,UAAa,EAAA;AACvB,cAAA,OAAO,EAAE;AACf,YAAI,CAAC,QAAQ,KAAK,UAAU,EAAG;AAE/B,cAAM,eAAe,KAAK,KAAK,UAAQ,KAAK,WAAW,KAAK,QAAQ,kBAAkBC,gBAAa,QAAQ,iBAAiB,KAAK,UAAU,SAASA,QAAAA,QAAa,SAAS,CAAC;AACrK,cAAA,eAAe,MAAM,KAAK,YAAY;AAC5C,YAAI,cAAc;AAChB,gBAAM,EAAE,OAAO,SAASA,QAAa,QAAA,MAAM,aAAa,OAAO;AAC/D,cAAI,SAAS,UAAU;AACrB,iBAAK,aAAa,KAAK;AAAA,UACzB;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AAAA,EAEA,aAAa,OAAgB;AACtB,SAAA,QAAQ,KAAK,KAAK;AAAA,EACzB;AACF;;"}