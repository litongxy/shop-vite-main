{"version":3,"file":"link.cjs.js","sources":["../../../../src/link/formats/link.ts"],"sourcesContent":["import type TypeInline from 'quill/blots/inline'\r\nimport Quill from 'quill'\r\nimport { hadProtocol, sanitize } from '../../config/editor.utils'\r\n\r\nconst Inline = Quill.import('blots/inline') as typeof TypeInline\r\n\r\n// @dynamic\r\nexport default class Link extends Inline {\r\n  static blotName: string\r\n  static tagName: string\r\n  static SANITIZED_URL: string\r\n  static PROTOCOL_WHITELIST: string[]\r\n  static className: string\r\n  static autoProtocol: string = ''\r\n  static create(value) {\r\n    const node = super.create(value)\r\n    let href = value\r\n    if (!hadProtocol(href) && this.autoProtocol) {\r\n      href = `${this.autoProtocol}://${value}`\r\n    }\r\n    href = this.sanitize(href)\r\n    node.setAttribute('href', href)\r\n    node.setAttribute('target', '_blank')\r\n    return node\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('href')\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name !== this.statics.blotName || [false, null].includes(value)) {\r\n      super.format(name, value)\r\n    }\r\n    else {\r\n      this.domNode.setAttribute('href', Link.sanitize(value))\r\n    }\r\n  }\r\n}\r\nLink.blotName = 'link'\r\nLink.tagName = 'A'\r\nLink.SANITIZED_URL = 'about:blank'\r\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel']\r\nLink.className = 'ql-normal-link'\r\n"],"names":["hadProtocol","sanitize","Link"],"mappings":";;;;;AAIA,MAAM,SAAS,MAAM,OAAO,cAAc;cAG1C,mBAAkC,OAAO;AAAA,EAOvC,OAAO,OAAO,OAAO;AACb,UAAA,OAAO,MAAM,OAAO,KAAK;AAC/B,QAAI,OAAO;AACX,QAAI,CAACA,aAAAA,YAAY,IAAI,KAAK,KAAK,cAAc;AAC3C,aAAO,GAAG,KAAK,YAAY,MAAM,KAAK;AAAA,IACxC;AACO,WAAA,KAAK,SAAS,IAAI;AACpB,SAAA,aAAa,QAAQ,IAAI;AACzB,SAAA,aAAa,UAAU,QAAQ;AAC7B,WAAA;AAAA,EACT;AAAA,EAEA,OAAO,QAAQ,SAAS;AACf,WAAA,QAAQ,aAAa,MAAM;AAAA,EACpC;AAAA,EAEA,OAAO,SAAS,KAAK;AACnB,WAAOC,aAAAA,SAAS,KAAK,KAAK,kBAAkB,IAAI,MAAM,KAAK;AAAA,EAC7D;AAAA,EAEA,OAAO,MAAM,OAAO;AACd,QAAA,SAAS,KAAK,QAAQ,YAAY,CAAC,OAAO,IAAI,EAAE,SAAS,KAAK,GAAG;AAC7D,YAAA,OAAO,MAAM,KAAK;AAAA,IAAA,OAErB;AACH,WAAK,QAAQ,aAAa,QAAQ,GAAK,SAAS,KAAK,CAAC;AAAA,IACxD;AAAA,EACF;AACF,GA7BE,GAAO,eAAuB,IANhC;AAoCAC,OAAK,WAAW;AAChBA,OAAK,UAAU;AACfA,OAAK,gBAAgB;AACrBA,OAAK,qBAAqB,CAAC,QAAQ,SAAS,UAAU,KAAK;AAC3DA,OAAK,YAAY;;"}