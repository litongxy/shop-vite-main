{"version":3,"file":"formats.es.js","sources":["../../../src/mathlive/formats.ts"],"sourcesContent":["import type { MathfieldElement } from 'mathlive'\r\nimport type { Root } from 'parchment'\r\nimport Quill from 'quill'\r\n\r\nconst Parchment = Quill.import('parchment')\r\ntype MathliveBlotMode = 'dialog' | 'only-read'\r\nexport default class MathliveBlot extends Parchment.EmbedBlot {\r\n  static blotName = 'mathlive'\r\n  static tagName = 'math-field'\r\n  static className = 'ql-math-field'\r\n  mode: MathliveBlotMode\r\n\r\n  static create(obj: { value: string, mode: MathliveBlotMode }) {\r\n    const el = super.create() as MathfieldElement\r\n    el.setAttribute('mode', obj.mode)\r\n    el.classList.add('view')\r\n    el.innerHTML = obj.value\r\n    el.setValue(obj.value)\r\n    return el\r\n  }\r\n\r\n  static value(domNode: MathfieldElement) {\r\n    return {\r\n      value: domNode.value,\r\n      mode: domNode.getAttribute('mode'),\r\n    }\r\n  }\r\n\r\n  constructor(scroll: Root, public domNode: MathfieldElement) {\r\n    super(scroll, domNode)\r\n    domNode.setAttribute('contenteditable', 'false')\r\n    this.mode = (domNode.getAttribute('mode') || 'only-read') as MathliveBlotMode\r\n  }\r\n\r\n  html() {\r\n    const formula = this.domNode.value\r\n    return `<math-field class=\"ql-math-field view\" contenteditable=\"false\" mode=\"${this.mode}\">${formula}</math-field>`\r\n  }\r\n}\r\n"],"names":[],"mappings":";AAIA,MAAM,YAAY,MAAM,OAAO,WAAW;AAErB,MAAA,gBAAA,MAAA,sBAAqB,UAAU,UAAU;AAAA,EAsB5D,YAAY,QAAqB,SAA2B;AAC1D,UAAM,QAAQ,OAAO;AADU,SAAA,UAAA;AAEvB,YAAA,aAAa,mBAAmB,OAAO;AAC/C,SAAK,OAAQ,QAAQ,aAAa,MAAM,KAAK;AAAA,EAC/C;AAAA,EApBA,OAAO,OAAO,KAAgD;AACtD,UAAA,KAAK,MAAM;AACd,OAAA,aAAa,QAAQ,IAAI,IAAI;AAC7B,OAAA,UAAU,IAAI,MAAM;AACvB,OAAG,YAAY,IAAI;AAChB,OAAA,SAAS,IAAI,KAAK;AACd,WAAA;AAAA,EACT;AAAA,EAEA,OAAO,MAAM,SAA2B;AAC/B,WAAA;AAAA,MACL,OAAO,QAAQ;AAAA,MACf,MAAM,QAAQ,aAAa,MAAM;AAAA,IAAA;AAAA,EAErC;AAAA,EAQA,OAAO;AACC,UAAA,UAAU,KAAK,QAAQ;AAC7B,WAAO,wEAAwE,KAAK,IAAI,KAAK,OAAO;AAAA,EACtG;AACF;AA/BE,cAAO,WAAW;AAClB,cAAO,UAAU;AACjB,cAAO,YAAY;AAHA,IAAA,eAAA;"}